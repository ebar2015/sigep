<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.gov.dafp.sigep2.interfaces.PersonaMapper">
  <resultMap id="BaseResultMap" type="co.gov.dafp.sigep2.bean.Persona">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    <id column="COD_PERSONA" jdbcType="NUMERIC" property="codPersona" />
    <result column="COD_GENERO" jdbcType="NUMERIC" property="codGenero" />
    <result column="COD_ESTADO_CIVIL" jdbcType="NUMERIC" property="codEstadoCivil" />
    <result column="COD_MUNICIPIO_NACIMIENTO" jdbcType="NUMERIC" property="codMunicipioNacimiento" />
    <result column="COD_DEPARTAMENTO_NACIMIENTO" jdbcType="NUMERIC" property="codDepartamentoNacimiento" />
    <result column="COD_PAIS_NACIMIENTO" jdbcType="NUMERIC" property="codPaisNacimiento" />
    <result column="COD_FACTOR_RH" jdbcType="NUMERIC" property="codFactorRh" />
    <result column="COD_TIPO_IDENTIFICACION" jdbcType="NUMERIC" property="codTipoIdentificacion" />
    <result column="NUMERO_IDENTIFICACION" jdbcType="VARCHAR" property="numeroIdentificacion" />
    <result column="PRIMER_NOMBRE" jdbcType="VARCHAR" property="primerNombre" />
    <result column="SEGUNDO_NOMBRE" jdbcType="VARCHAR" property="segundoNombre" />
    <result column="PRIMER_APELLIDO" jdbcType="VARCHAR" property="primerApellido" />
    <result column="SEGUNDO_APELLIDO" jdbcType="VARCHAR" property="segundoApellido" />
    <result column="RESUMEN_PROFESIONAL" jdbcType="VARCHAR" property="resumenProfesional" />
    <result column="NUMERO_LIBRETA_MILITAR" jdbcType="VARCHAR" property="numeroLibretaMilitar" />
    <result column="DISTRITO_MILITAR" jdbcType="VARCHAR" property="distritoMilitar" />
    <result column="CLASE_LIBRETA_MILITAR" jdbcType="NUMERIC" property="claseLibretaMilitar" />
    <result column="LIBRETA_MILITAR_URL" jdbcType="VARCHAR" property="libretaMilitarUrl" />
    <result column="FOTO_URL" jdbcType="VARCHAR" property="fotoUrl" />
    <result column="DOCUMENTO_IDENTIFICACION_URL" jdbcType="VARCHAR" property="documentoIdentificacionUrl" />
    <result column="FECHA_NACIMIENTO" jdbcType="TIMESTAMP" property="fechaNacimiento" />
    <result column="EXPUESTO_POLITICAMENTE" jdbcType="NUMERIC" property="expuestoPoliticamente" />
    <result column="CORREO_ELECTRONICO" jdbcType="VARCHAR" property="correoElectronico" />
    <result column="CORREO_ALTERNATIVO" jdbcType="VARCHAR" property="correoAlternativo" />
    <result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
    <result column="FLG_ESTADO" jdbcType="NUMERIC" property="flgEstado" />
    <result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
    <result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
    <result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
    <result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />
    <result column="COD_PERTENENCIA_ETNICA" jdbcType="NUMERIC" property="codPertenenciaEtnica" />
    <result column="COD_SIGEP" jdbcType="VARCHAR" property="codSigep" />
    <result column="FLG_DOCUMENTO_IDENTIFICACION_VALIDADO" jdbcType="NUMERIC" property="flgDocumentoIdentificacionValidado" />
    <result column="FLG_LIBRETA_MILITAR_VALIDADA" jdbcType="NUMERIC" property="flgLibretaMilitarValidada" />
    <result column="FECHA_MARCACION_PEP" jdbcType="TIMESTAMP" property="fechaMarcacionPep" />
    <result column="MARCACION_PEP_VIN" jdbcType="NUMERIC" property="marcacionPepVinc" />
    <result column="PORCENTAJE_HV" jdbcType="NUMERIC" property="porcentajeHV" />
    <result column="FLG_DISCAPACIDAD_VALIDADA" jdbcType="NUMERIC" property="flgDiscapacidadValidada" />
    <result column="DOCUMENTO_DISCAPACIDAD_URL" jdbcType="VARCHAR" property="documentoDiscapacidadUrl" />
  </resultMap>
  
  <resultMap id="BaseResultMapExt" type="co.gov.dafp.sigep2.bean.ext.PersonaExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    <id column="COD_PERSONA" jdbcType="NUMERIC" property="codPersona" />
    <result column="COD_GENERO" jdbcType="NUMERIC" property="codGenero" />
    <result column="COD_ESTADO_CIVIL" jdbcType="NUMERIC" property="codEstadoCivil" />
    <result column="COD_MUNICIPIO_NACIMIENTO" jdbcType="NUMERIC" property="codMunicipioNacimiento" />
    <result column="COD_DEPARTAMENTO_NACIMIENTO" jdbcType="NUMERIC" property="codDepartamentoNacimiento" />
    <result column="COD_PAIS_NACIMIENTO" jdbcType="NUMERIC" property="codPaisNacimiento" />
    <result column="COD_FACTOR_RH" jdbcType="NUMERIC" property="codFactorRh" />
    <result column="COD_TIPO_IDENTIFICACION" jdbcType="NUMERIC" property="codTipoIdentificacion" />
    <result column="NUMERO_IDENTIFICACION" jdbcType="VARCHAR" property="numeroIdentificacion" />
    <result column="PRIMER_NOMBRE" jdbcType="VARCHAR" property="primerNombre" />
    <result column="SEGUNDO_NOMBRE" jdbcType="VARCHAR" property="segundoNombre" />
    <result column="PRIMER_APELLIDO" jdbcType="VARCHAR" property="primerApellido" />
    <result column="SEGUNDO_APELLIDO" jdbcType="VARCHAR" property="segundoApellido" />
    <result column="RESUMEN_PROFESIONAL" jdbcType="VARCHAR" property="resumenProfesional" />
    <result column="NUMERO_LIBRETA_MILITAR" jdbcType="VARCHAR" property="numeroLibretaMilitar" />
    <result column="LIBRETA_MILITAR_URL" jdbcType="VARCHAR" property="libretaMilitarUrl" />
    <result column="DOCUMENTO_IDENTIFICACION_URL" jdbcType="VARCHAR" property="documentoIdentificacionUrl" />
    <result column="DISTRITO_MILITAR" jdbcType="VARCHAR" property="distritoMilitar" />
    <result column="CLASE_LIBRETA_MILITAR" jdbcType="NUMERIC" property="claseLibretaMilitar" />
    <result column="FOTO_URL" jdbcType="VARCHAR" property="fotoUrl" />
    <result column="FECHA_NACIMIENTO" jdbcType="TIMESTAMP" property="fechaNacimiento" />
    <result column="EXPUESTO_POLITICAMENTE" jdbcType="NUMERIC" property="expuestoPoliticamente" />
    <result column="CORREO_ELECTRONICO" jdbcType="VARCHAR" property="correoElectronico" />
    <result column="CORREO_ALTERNATIVO" jdbcType="VARCHAR" property="correoAlternativo" />
    <result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
    <result column="FLG_ESTADO" jdbcType="NUMERIC" property="flgEstado" />
    <result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
    <result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
    <result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
    <result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />
    <result column="COD_PERTENENCIA_ETNICA" jdbcType="NUMERIC" property="codPertenenciaEtnica" />
    <result column="COD_SIGEP" jdbcType="VARCHAR" property="codSigep" />
    <result column="FLG_DOCUMENTO_IDENTIFICACION_VALIDADO" jdbcType="NUMERIC" property="flgDocumentoIdentificacionValidado" />
    <result column="FLG_LIBRETA_MILITAR_VALIDADA" jdbcType="NUMERIC" property="flgLibretaMilitarValidada" />
    <result column="FECHA_MARCACION_PEP" jdbcType="TIMESTAMP" property="fechaMarcacionPep" />
    <result column="MARCACION_PEP_VIN" jdbcType="NUMERIC" property="marcacionPepVinc" />
    <result column="PORCENTAJE_HV" jdbcType="NUMERIC" property="porcentajeHV" />
    <result column="FLG_DISCAPACIDAD_VALIDADA" jdbcType="NUMERIC" property="flgDiscapacidadValidada" />
    <result column="DOCUMENTO_DISCAPACIDAD_URL" jdbcType="VARCHAR" property="documentoDiscapacidadUrl" />
    
    <result column="NOMBRE_ENTIDAD" jdbcType="VARCHAR" property="nombreEntidad" />
    <result column="NOMBRE_PAIS" jdbcType="VARCHAR" property="nombrePais" />
    <result column="NOMBRE_DEPARTAMENTO" jdbcType="VARCHAR" property="nombreDepartamento" />
    <result column="NOMBRE_MUNICIPIO" jdbcType="VARCHAR" property="nombreMunicipio" />
    <result column="NOMBRE_ESTADO_CIVIL" jdbcType="VARCHAR" property="nombreEstadoCivil" />
    <result column="NOMBRE_LIBRETA_MILITAR" jdbcType="VARCHAR" property="nombreLibretaMilitar" />
    <result column="NOMBRE_GENERO" jdbcType="VARCHAR" property="nombreGenero" />
    <result column="NOMBRE_TIPO_DOCUMENTO" jdbcType="VARCHAR" property="nombreTipoDocuento" />
    <result column="NOMBRE_MUNICIPIO_RESIDENCIA" jdbcType="VARCHAR" property="nombreMunicipioResidencia" />
    <result column="NOMBRE_DEPARTAMENTO_RESIDENCIA" jdbcType="VARCHAR" property="nombreDepartamentoResidencia" />
    <result column="NOMBRE_PAIS_RESIDENCIA" jdbcType="VARCHAR" property="nombrePaisResidencia" />
    <result column="DIRECCION_RESIDENCIA" jdbcType="VARCHAR" property="direccionResidencia" />
    <result column="NOMBRE_PERTENENCIA_ETNICA" jdbcType="VARCHAR" property="nombrePertenenciaEtnica" />
    <result column="TOTAL" jdbcType="VARCHAR" property="total" />
    <result column="COD_ENTIDAD" jdbcType="NUMERIC" property="codEntidad" />
    <result column="COD_USUARIO" jdbcType="NUMERIC" property="codUsuario" />
    <result column="NOMBRE_USUARIO" jdbcType="VARCHAR" property="nombreUsuario" />
    <result column="NUM_CELULAR" jdbcType="VARCHAR" property="numCelular" />
    <result column="NUM_TELEFONO_OFICINA" jdbcType="VARCHAR" property="numTelefonoOficina" />
    <result column="TELEFONO_RESIDENCIA" jdbcType="VARCHAR" property="telefonoResidencia" />
    <result column="EXTENCION_TELEFONO_OFICINA" jdbcType="VARCHAR" property="extencionTelefonoOficina" />
    <result column="FLG_APROBADO" jdbcType="NUMERIC" property="flgAprobado" />
    <result column="COD_ROL" jdbcType="NUMERIC" property="codRol" />
    <result column="COD_VINCULACION" jdbcType="NUMERIC" property="codVinculacion" />
    <result column="TIPO_ASOCIACION" jdbcType="NUMERIC" property="tipoAsociacion" />
    <result column="NOMBRE_CARGO" jdbcType="VARCHAR" property="nombreCargo" />
    <result column="FECHA_POSESION" jdbcType="TIMESTAMP" property="fechaPosesion" />
    <result column="FECHA_FINALIZACION" jdbcType="TIMESTAMP" property="fechaFinalizacion" />
    <result column="VINCULACION" jdbcType="NUMERIC" property="vinculacion"/>
    <result column="DESHACERVINC" jdbcType="NUMERIC" property="deshacerVinc"/>
    <result column="FECHAVINC" jdbcType="TIMESTAMP" property="fechaVinc"/>
    <result column="DIASDESVINC" jdbcType="NUMERIC" property="diasDesvinc"/>
   	<result column="CAUSAL_DESVINCULACION" jdbcType="NUMERIC" property="causalDesv"/>
   	<result column="PAR_DIAS_DESV" jdbcType="NUMERIC" property="parDiasDesv"/>
    <result column="TOTAL_RESPONSABLE" jdbcType="NUMERIC" property="totalResponsable"/>
    <result column="TOTAL_RESPONSABLE_NACIONAL" jdbcType="NUMERIC" property="totalResponsableNacional"/>
    <result column="TOTAL_RESPONSABLE_TERRRITORIAL" jdbcType="NUMERIC" property="totalResponsableTerritorial"/>
    
    <result column="COD_ENTIDAD_PLANTA" jdbcType="NUMERIC" property="codEntidadPlanta"/>
	<result column="COD_ENTIDAD_PLANTA_DETALLE" jdbcType="NUMERIC" property="codEntidadPlantaDetalle"/>
	<result column="COD_NOMENCLATURA_DENOMINACION" jdbcType="NUMERIC" property="codNomenclaturaDenominacion"/>
	<result column="COD_DENOMINACION" jdbcType="NUMERIC" property="codDenominacion"/>
	<result column="NOMBRE_DENOMINACION" jdbcType="VARCHAR" property="nombreDenominacion"/>
	<result column="NOMBRE_PERSONA_COMPLETO" jdbcType="VARCHAR" property="nombrePersonaCompleto"/>
    
  </resultMap>
  
  
  <resultMap id="BaseResultMapHv" type="co.gov.dafp.sigep2.bean.ext.VinculacionExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 02 08:00:26 COT 2018.
    -->
    <result column="NOMBRE_CARGO" jdbcType="VARCHAR" property="nombreCargo" />
    <result column="FECHA_POSESION" jdbcType="TIMESTAMP" property="fechaPosesion" />
    <result column="FECHA_FINALIZACION" jdbcType="TIMESTAMP" property="fechaFinalizacion" />
    
  </resultMap>
  
  
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    COD_PERSONA, COD_GENERO, COD_ESTADO_CIVIL, COD_MUNICIPIO_NACIMIENTO, COD_DEPARTAMENTO_NACIMIENTO, 
    COD_PAIS_NACIMIENTO, COD_FACTOR_RH, COD_TIPO_IDENTIFICACION, NUMERO_IDENTIFICACION, 
    PRIMER_NOMBRE, SEGUNDO_NOMBRE, PRIMER_APELLIDO, SEGUNDO_APELLIDO, RESUMEN_PROFESIONAL, 
    NUMERO_LIBRETA_MILITAR, DISTRITO_MILITAR, CLASE_LIBRETA_MILITAR, LIBRETA_MILITAR_URL, 
    FOTO_URL, DOCUMENTO_IDENTIFICACION_URL, FECHA_NACIMIENTO, EXPUESTO_POLITICAMENTE, 
    CORREO_ELECTRONICO, CORREO_ALTERNATIVO, FLG_ACTIVO, FLG_ESTADO, AUD_FECHA_ACTUALIZACION, 
    AUD_COD_USUARIO, AUD_COD_ROL, AUD_ACCION, COD_PERTENENCIA_ETNICA, COD_SIGEP, FLG_DOCUMENTO_IDENTIFICACION_VALIDADO, 
    FLG_LIBRETA_MILITAR_VALIDADA, FECHA_MARCACION_PEP,MARCACION_PEP_VIN,PORCENTAJE_HV, FLG_DISCAPACIDAD_VALIDADA,
    DOCUMENTO_DISCAPACIDAD_URL
  </sql>
  <select id="selectByExample" parameterType="co.gov.dafp.sigep2.bean.PersonaExample" resultMap="BaseResultMapExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
	(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = COD_GENERO) NOMBRE_GENERO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO,
    <include refid="Base_Column_List" />
    from PERSONA
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  
  <select id="selectByActivas" parameterType="co.gov.dafp.sigep2.bean.Persona" resultMap="BaseResultMapExt">
    select
    (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
	(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = COD_GENERO) NOMBRE_GENERO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO,
    <include refid="Base_Column_List" />
    FROM PERSONA INNER JOIN VINCULACION ON PERSONA.COD_PERSONA=VINCULACION.COD_PERSONA
    INNER JOIN DEPENDENCIA_ENTIDAD ON VINCULACION.COD_DEPENDENCIA_ENTIDAD=DEPENDENCIA_ENTIDAD.COD_DEPENDENCIA_ENTIDAD
    INNER JOIN ENTIDAD ON DEPENDENCIA_ENTIDAD.COD_ENTIDAD=ENTIDAD.COD_ENTIDAD
    WHERE VINCULACION.FLG_ACTIVO = #{flgActivo,jdbcType=VARCHAR}
    AND ENTIDAD.COD_ENTIDAD =  #{codEntidad,jdbcType=VARCHAR}

  </select>
  
  
  <select id="selectByEntidad" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMap">
   
    select
    A.*
    FROM PERSONA A, USUARIO U, USUARIO_ENTIDAD UE
	WHERE A.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
	AND A. NUMERO_IDENTIFICACION =  #{numeroIdentificacion,jdbcType=VARCHAR}
	AND A.COD_PERSONA = U.COD_PERSONA
	AND U.COD_USUARIO = UE.COD_USUARIO
	AND UE.COD_ENTIDAD = #{idEntidad,jdbcType=VARCHAR}
    
  </select>
  
  <select id="selectPersonaCargosFecha" parameterType="co.gov.dafp.sigep2.bean.Persona" resultMap="BaseResultMapExt">
   
   select PRIMER_NOMBRE,NUMERO_IDENTIFICACION,NOMBRE_CARGO,FECHA_POSESION,FECHA_FINALIZACION
   FROM PERSONA
   inner join HOJA_VIDA
   on PERSONA.COD_PERSONA = HOJA_VIDA.COD_PERSONA
   inner join CARGO
   on HOJA_VIDA.COD_CARGO = CARGO.COD_CARGO
   inner join VINCULACION
     on PERSONA.COD_PERSONA =  VINCULACION.COD_PERSONA
  where NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR}
    
  </select>
  
  <select id="selectPersonaCargosPosesion" parameterType="co.gov.dafp.sigep2.bean.Persona" resultMap="BaseResultMapHv">
   
  select NOMBRE_CARGO,FECHA_POSESION,FECHA_FINALIZACION
	FROM PERSONA
	inner join HOJA_VIDA
	on PERSONA.COD_PERSONA = HOJA_VIDA.COD_PERSONA
	inner join CARGO
	on HOJA_VIDA.COD_CARGO = CARGO.COD_CARGO
	inner join VINCULACION
	on PERSONA.COD_PERSONA =  VINCULACION.COD_PERSONA
	where NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR}
    
  </select>
  
  <select id="selectPersonaEnt" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
   
    SELECT 
	U.COD_USUARIO, 
	U.COD_PERSONA, 
	U.NOMBRE_USUARIO, 
	P.* ,
	UE.COD_ENTIDAD 
	FROM USUARIO U
	INNER JOIN PERSONA P ON U.COD_PERSONA = P.COD_PERSONA
	INNER JOIN USUARIO_ENTIDAD UE ON UE.COD_USUARIO = U.COD_USUARIO
	WHERE P.COD_PERSONA =  #{codPersona,jdbcType=NUMERIC} 
	  <if test="codEntidad != null">
			AND UE.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	</if>
    OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY
  </select>
  
  <select id="selectPersonaControlInterno" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
   
  select
  PERSONA.PRIMER_NOMBRE,
  PERSONA.PRIMER_APELLIDO,
  PERSONA.SEGUNDO_NOMBRE,
  PERSONA.SEGUNDO_APELLIDO,
  PERSONA.CORREO_ELECTRONICO,
  USUARIO.NOMBRE_USUARIO NOMBRE_USUARIO,
  USUARIO_ENTIDAD.COD_ENTIDAD COD_ENTIDAD,
  USUARIO_ROL_ENTIDAD.COD_ROL COD_ROL,
  ENTIDAD.NOMBRE_ENTIDAD
from USUARIO
  left outer join PERSONA on USUARIO.COD_PERSONA = PERSONA.COD_PERSONA
  left outer join DATO_CONTACTO on PERSONA.COD_PERSONA = DATO_CONTACTO.COD_PERSONA
  left outer join USUARIO_ENTIDAD on USUARIO.COD_USUARIO = USUARIO_ENTIDAD.COD_USUARIO
  left outer join USUARIO_ROL_ENTIDAD on USUARIO_ENTIDAD.COD_USUARIO_ENTIDAD = USUARIO_ROL_ENTIDAD.COD_USUARIO_ENTIDAD
  LEFT OUTER JOIN ENTIDAD on USUARIO_ENTIDAD.COD_ENTIDAD = ENTIDAD.COD_ENTIDAD
where USUARIO.FLG_ESTADO = 1 
	 and USUARIO.FLG_BLOQUEADO = 0 
	 and USUARIO_ENTIDAD.FLG_ACTIVO = 1 
	 and USUARIO_ROL_ENTIDAD.COD_ROL = #{codRol,jdbcType=NUMERIC} 
     and USUARIO_ENTIDAD.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
     and USUARIO_ROL_ENTIDAD.flg_activo = 1
  </select>
  
  <select id="selectPersonaEntFiltro" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
   
    SELECT distinct
    count(*) over() TOTAL,
	U.COD_USUARIO, 
	U.NOMBRE_USUARIO, 
	P.* ,
	(SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = P.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = P.COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
	(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = P.COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_GENERO) NOMBRE_GENERO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO,
	UE.COD_ENTIDAD 
	FROM USUARIO U
	INNER JOIN PERSONA P ON U.COD_PERSONA = P.COD_PERSONA
	INNER JOIN USUARIO_ENTIDAD UE ON UE.COD_USUARIO = U.COD_USUARIO
	INNER JOIN HOJA_VIDA H ON U.COD_PERSONA = H.COD_PERSONA
	INNER JOIN USUARIO_ROL_ENTIDAD URE ON ue.cod_usuario_entidad   = ure.cod_usuario_entidad 
	WHERE  H.FLG_ACTIVO = 1 
	  AND UE.FLG_ACTIVO = 1
	  AND ure.cod_rol IN( 3,4)  
	  and ure.flg_activo =1
	  AND H.COD_ENTIDAD = UE.COD_ENTIDAD
	  <if test="codEntidad != null">
			AND UE.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	  </if>
	  <if test="codPersona != null">
			AND P.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
	  </if>	  
	  <if test="codTipoVinculacion != null">
			AND UE.COD_TIPO_VINCULACION = #{codTipoVinculacion,jdbcType=NUMERIC}
	  </if>
	  <if test="codTipoIdentificacion != null">
			AND P.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
	  </if>
	  <if test="numeroIdentificacion != null">
			AND UPPER(P.NUMERO_IDENTIFICACION) LIKE '%'|| UPPER(#{numeroIdentificacion,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="primerNombre != null">
			AND UPPER(P.PRIMER_NOMBRE) like '%'||UPPER(#{primerNombre,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="segundoNombre != null">
			AND UPPER(P.SEGUNDO_NOMBRE) like '%'||UPPER(#{segundoNombre,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="primerApellido != null">
			AND UPPER(P.PRIMER_APELLIDO) like '%'||UPPER(#{primerApellido,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="segundoApellido != null">
			AND UPPER(P.SEGUNDO_APELLIDO) like '%'||UPPER(#{segundoApellido,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="flgEstado != null">
			AND U.FLG_ESTADO = #{flgEstado,jdbcType=NUMERIC}
	  </if>
        OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  <select id="selectPersonaEntFiltroF" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
   
    SELECT 
	    count(*) over() TOTAL,
		U.COD_USUARIO, 
		U.NOMBRE_USUARIO,
	    V.COD_VINCULACION,
		P.* ,
		(SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = P.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
		(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = P.COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
		(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = P.COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
		(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
		(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
		(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_GENERO) NOMBRE_GENERO,
		(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO,
		UE.COD_ENTIDAD 
        FROM USUARIO U
	    INNER JOIN PERSONA P ON U.COD_PERSONA = P.COD_PERSONA
		INNER JOIN USUARIO_ENTIDAD UE ON UE.COD_USUARIO = U.COD_USUARIO
	    INNER JOIN VINCULACION V ON V.COD_PERSONA = P.COD_PERSONA
        INNER JOIN ENTIDAD_PLANTA_DETALLE EPD ON V.COD_ENTIDAD_PLANTA_DETALLE = EPD.COD_ENTIDAD_PLANTA_DETALLE
        INNER JOIN ENTIDAD_PLANTA EP ON EPD.COD_ENTIDAD_PLANTA = EP.COD_ENTIDAD_PLANTA AND UE.COD_ENTIDAD = EP.COD_ENTIDAD
	WHERE v.FECHA_FINALIZACION IS NULL
      <if test="flgActivo != null">
			AND UE.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
	  </if>
	  <if test="codEntidad != null">
			AND UE.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	  </if>
	  <if test="codTipoVinculacion != null">
			AND UE.COD_TIPO_VINCULACION = #{codTipoVinculacion,jdbcType=NUMERIC}
	  </if>
	  <if test="codTipoIdentificacion != null">
			AND P.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
	  </if>
	  <if test="numeroIdentificacion != null">
			AND P.NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR}
	  </if>
	  <if test="primerNombre != null">
			AND UPPER(P.PRIMER_NOMBRE) like '%'||UPPER(#{primerNombre,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="segundoNombre != null">
			AND UPPER(P.SEGUNDO_NOMBRE) like '%'||UPPER(#{segundoNombre,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="primerApellido != null">
			AND UPPER(P.PRIMER_APELLIDO) like '%'||UPPER(#{primerApellido,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="segundoApellido != null">
			AND UPPER(P.SEGUNDO_APELLIDO) like '%'||UPPER(#{segundoApellido,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="flgEstado != null">
			AND U.FLG_ESTADO = #{flgEstado,jdbcType=NUMERIC}
	  </if>
	  <if test="flgActivoVinculacion != null">
			AND V.FLG_ACTIVO = #{flgActivoVinculacion ,jdbcType=NUMERIC}
	  </if>
        OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  <select id="selectPersonaHVFiltro" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
 
    SELECT 
    DISTINCT PERSONA.*,
    (SELECT COUNT(*) FROM VINCULACION WHERE VINCULACION.COD_PERSONA= PERSONA.COD_PERSONA AND USUARIO_ENTIDAD.COD_ENTIDAD= #{codEntidad,jdbcType=NUMERIC}) VINCULACION,
	(SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = PERSONA.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = PERSONA.COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
	(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = PERSONA.COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = PERSONA.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = PERSONA.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = PERSONA.COD_GENERO) NOMBRE_GENERO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = PERSONA.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO
	FROM PERSONA 
	INNER JOIN USUARIO ON PERSONA.COD_PERSONA = USUARIO.COD_PERSONA
    INNER JOIN USUARIO_ENTIDAD ON USUARIO_ENTIDAD.COD_USUARIO = USUARIO.COD_USUARIO 
	WHERE   
    (
    PERSONA.FLG_ACTIVO = 1 
    AND USUARIO.FLG_ESTADO = 1
    AND USUARIO_ENTIDAD.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
    )
	  <if test="codTipoIdentificacion != null">
			AND PERSONA.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
	  </if>
	  <if test="numeroIdentificacion != null">
			AND PERSONA.NUMERO_IDENTIFICACION like '%'||#{numeroIdentificacion,jdbcType=VARCHAR}||'%'  
	  </if>
	  <if test="primerNombre != null">
			AND UPPER(PERSONA.PRIMER_NOMBRE) like '%'||UPPER(#{primerNombre,jdbcType=VARCHAR})||'%'
	  </if>
	  <if test="segundoNombre != null">
			AND UPPER(PERSONA.SEGUNDO_NOMBRE) like '%'||UPPER(#{segundoNombre,jdbcType=VARCHAR})||'%'
	  </if>
	  <if test="primerApellido != null">
			AND UPPER(PERSONA.PRIMER_APELLIDO) like '%'||UPPER(#{primerApellido,jdbcType=VARCHAR})||'%'
	  </if>
	  <if test="segundoApellido != null">
			AND UPPER(PERSONA.SEGUNDO_APELLIDO) like '%'||UPPER(#{segundoApellido,jdbcType=VARCHAR})||'%'
	  </if>
        OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  
  
  
  <select id="selectPersonaRolEntidad" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
   		select distinct per.*
		from   entidad ent    ,
		       usuario_entidad ue  ,
		       usuario_rol_entidad ure ,
		       usuario usu,
		       persona per
		where  ent.cod_entidad = ue.cod_entidad
		and  ue.cod_usuario_entidad   = ure.cod_usuario_entidad
		and  ue.cod_usuario = usu.cod_usuario
		and  usu.cod_persona = per.cod_persona
		and  COALESCE(usu.fecha_vence,NOW()) &gt;= NOW()
		and COALESCE(per.flg_activo,1)=1
		 <if test="codEntidad != null">
			and ent.cod_entidad = #{codEntidad,jdbcType=NUMERIC}
	     </if>
		 <if test="codRol != null">
			and  ure.cod_rol = #{codRol,jdbcType=NUMERIC}
	     </if>
		  <if test="flgActivo != null">
			and  ue.flg_activo = #{flgActivo,jdbcType=NUMERIC}
		    and  ure.flg_activo = #{flgActivo,jdbcType=NUMERIC}
	     </if>
		   <if test="flgEstado != null">
			and usu.flg_estado = #{flgEstado,jdbcType=NUMERIC}
	     </if>
  </select>
  
  <select id="selectPersonasRolesNotificaGI" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMap">
		select distinct p.primer_nombre||' ' ||p.segundo_nombre|| ' '|| p.primer_apellido ||' '||p.segundo_apellido, p.NUMERO_IDENTIFICACION,
		       p.CORREO_ELECTRONICO, p.CORREO_ALTERNATIVO
		from   persona p,usuario u , usuario_entidad ue, usuario_rol_entidad ure, rol r, parametrica pr
		where  p.cod_persona = u.cod_persona
		  and  u.flg_estado = 1
		  and  u.cod_usuario = ue.cod_usuario
		  and  ue.flg_activo = 1
		  and  ue.cod_usuario_entidad = ure.cod_usuario_entidad
		  and  ure.flg_activo = 1
		  and  ure.cod_rol = r.cod_rol
		  and  r.nombre = pr.valor_parametro
		  and  pr.COD_PADRE_PARAMETRICA = #{codRol,jdbcType=NUMERIC}
		 <if test="codEntidad != null">
			and ue.cod_entidad = #{codEntidad,jdbcType=NUMERIC}
	     </if>		  
  </select>  
  
  <select id="selectByPrimaryKey" parameterType="java.math.BigDecimal" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from PERSONA
    where COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
  </select>
  
  <select id="selectByPrimaryKeyExt" parameterType="java.math.BigDecimal" resultMap="BaseResultMapExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 25 12:04:19 COT 2018.
    -->
   
    select 
    P.*,
    (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = P.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = P.COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
	(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = P.COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_GENERO) NOMBRE_GENERO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_PERTENENCIA_ETNICA) NOMBRE_PERTENENCIA_ETNICA,
	(SELECT COD_VINCULACION FROM VINCULACION WHERE COD_PERSONA = P.COD_PERSONA
    OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY) COD_VINCULACION
    from PERSONA P
    where P.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
    
  </select>
  
  
  <select id="codPersonaBytipoIdNumId" parameterType="co.gov.dafp.sigep2.bean.Persona" resultMap="BaseResultMap">
   
    select P.COD_PERSONA
    from PERSONA P
    where P.COD_TIPO_IDENTIFICACION =  #{codTipoIdentificacion,jdbcType=NUMERIC}
    AND P.NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR}
     OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY
  </select>
  <select id="selectPersonaContacto" parameterType="java.math.BigDecimal" resultMap="BaseResultMapExt">
    SELECT
	  P.PRIMER_NOMBRE,
	  P.PRIMER_APELLIDO,
	  P.SEGUNDO_NOMBRE,
	  P.SEGUNDO_APELLIDO,
	  P.NUMERO_IDENTIFICACION,
	  P.FECHA_NACIMIENTO,
	  P.CLASE_LIBRETA_MILITAR,
	  P.COD_TIPO_IDENTIFICACION,
	  P.DISTRITO_MILITAR DISTRITO_MILITAR,
	  P.NUMERO_LIBRETA_MILITAR NUMERO_LIBRETA_MILITAR,
	  P.DOCUMENTO_IDENTIFICACION_URL, 
	  P.LIBRETA_MILITAR_URL,
	  P.CORREO_ELECTRONICO,
	  P.CORREO_ALTERNATIVO,
	  p.COD_GENERO,
	  (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = P.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	  case when p.COD_PAIS_NACIMIENTO = 169 then (SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = P.COD_DEPARTAMENTO_NACIMIENTO) else null end NOMBRE_DEPARTAMENTO,
	  case when p.COD_PAIS_NACIMIENTO = 169 then (SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = P.COD_MUNICIPIO_NACIMIENTO) else null end NOMBRE_MUNICIPIO,
	  (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	  (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	  (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_GENERO) NOMBRE_GENERO,
	  (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO,
	  dc.COD_MUNICIPIO_RESIDENCIA,
	  dc.COD_PAIS_RESIDENCIA,
	  dc.DIRECCION_RESIDENCIA DIRECCION_RESIDENCIA,
	  dc.COD_DEPARTAMENTO_RESIDENCIA,
	  dc.NUM_CELULAR,
	  dc.NUM_TELEFONO_OFICINA,
	  dc.TELEFONO_RESIDENCIA,
	  dc.EXTENCION_TELEFONO_OFICINA,
	  (SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = dc.COD_MUNICIPIO_RESIDENCIA) NOMBRE_MUNICIPIO_RESIDENCIA,
	  (SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = dc.COD_DEPARTAMENTO_RESIDENCIA) NOMBRE_DEPARTAMENTO_RESIDENCIA ,
	  (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = dc.COD_PAIS_RESIDENCIA) NOMBRE_PAIS_RESIDENCIA,
	  (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_PERTENENCIA_ETNICA) NOMBRE_PERTENENCIA_ETNICA,
	  p.DOCUMENTO_DISCAPACIDAD_URL
	FROM PERSONA P
	  LEFT OUTER JOIN
	  DATO_CONTACTO dc ON P.COD_PERSONA = dc.COD_PERSONA
	  WHERE P.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
	  OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY
  </select>
  
  <select id="selectByFilter" parameterType="co.gov.dafp.sigep2.bean.Persona" resultMap="BaseResultMapExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 25 12:04:19 COT 2018.
    -->
    select 
      P.*,
       (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = P.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = P.COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
	(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = P.COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_GENERO) NOMBRE_GENERO,
	(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO,
     count(*) over() TOTAL
    from PERSONA P
    where P.COD_PERSONA > 0
     <if test="codGenero != null">
         AND P.COD_GENERO = #{codGenero,jdbcType=NUMERIC}
     </if>
      <if test="codPersona != null">
         AND P.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
     </if>
      <if test="codEstadoCivil != null">
     	 AND P.COD_ESTADO_CIVIL = #{codEstadoCivil,jdbcType=NUMERIC}
     </if>
      <if test="codMunicipioNacimiento != null">
         AND P.COD_MUNICIPIO_NACIMIENTO = #{codMunicipioNacimiento,jdbcType=NUMERIC}
     </if>
      <if test="codDepartamentoNacimiento != null">
     	 AND P.COD_DEPARTAMENTO_NACIMIENTO = #{codDepartamentoNacimiento,jdbcType=NUMERIC}
     </if>
      <if test="codPaisNacimiento != null">
     	AND P.COD_PAIS_NACIMIENTO = #{codPaisNacimiento,jdbcType=NUMERIC}
     </if>
     <if test="codFactorRh != null">
     	AND P.COD_FACTOR_RH = #{codFactorRh,jdbcType=NUMERIC}
     </if>
     <if test="codTipoIdentificacion != null">
     	AND P.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
     </if>
     <if test="numeroIdentificacion != null">
     	AND P.NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR}
     </if>
     <if test="primerNombre != null">
     	AND P.PRIMER_NOMBRE = #{primerNombre,jdbcType=VARCHAR}
     </if>
     <if test="segundoNombre != null">
     	AND P.SEGUNDO_NOMBRE = #{segundoNombre,jdbcType=VARCHAR}
     </if>
     <if test="primerApellido != null">
     	AND P.PRIMER_APELLIDO = #{primerApellido,jdbcType=VARCHAR}
     </if>
     <if test="segundoApellido != null">
     	AND P.SEGUNDO_APELLIDO = #{segundoApellido,jdbcType=VARCHAR}
     </if>
     <if test="numeroLibretaMilitar != null">
     	AND P.NUMERO_LIBRETA_MILITAR = #{numeroLibretaMilitar,jdbcType=VARCHAR}
     </if>
     <if test="fechaNacimiento != null">
     	AND P.FECHA_NACIMIENTO = #{fechaNacimiento,jdbcType=TIMESTAMP}
     </if>
    <if test="correoElectronico != null">
     	AND P.CORREO_ELECTRONICO = #{correoElectronico,jdbcType=VARCHAR}
     </if>
    <if test="flgActivo != null">
     	AND P.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
     </if>
    
     OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.math.BigDecimal">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    delete from PERSONA
    where COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
  </delete>
  <delete id="deleteByExample" parameterType="co.gov.dafp.sigep2.bean.PersonaExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    delete from PERSONA
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="co.gov.dafp.sigep2.bean.Persona">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    insert into PERSONA (COD_GENERO, COD_ESTADO_CIVIL, 
      COD_MUNICIPIO_NACIMIENTO, COD_DEPARTAMENTO_NACIMIENTO, 
      COD_PAIS_NACIMIENTO, COD_FACTOR_RH, COD_TIPO_IDENTIFICACION, 
      NUMERO_IDENTIFICACION, PRIMER_NOMBRE, SEGUNDO_NOMBRE, 
      PRIMER_APELLIDO, SEGUNDO_APELLIDO, RESUMEN_PROFESIONAL, 
      NUMERO_LIBRETA_MILITAR, DISTRITO_MILITAR, 
      CLASE_LIBRETA_MILITAR, LIBRETA_MILITAR_URL, 
      FOTO_URL, DOCUMENTO_IDENTIFICACION_URL, FECHA_NACIMIENTO, 
      EXPUESTO_POLITICAMENTE, CORREO_ELECTRONICO, 
      CORREO_ALTERNATIVO, FLG_ACTIVO, FLG_ESTADO, 
      AUD_FECHA_ACTUALIZACION, AUD_COD_USUARIO, 
      AUD_COD_ROL, AUD_ACCION, COD_PERTENENCIA_ETNICA, 
      COD_SIGEP, FLG_DOCUMENTO_IDENTIFICACION_VALIDADO, 
      FLG_LIBRETA_MILITAR_VALIDADA, FECHA_MARCACION_PEP,MARCACION_PEP_VIN,PORCENTAJE_HV)
    values (#{codGenero,jdbcType=NUMERIC}, #{codEstadoCivil,jdbcType=NUMERIC}, 
      #{codMunicipioNacimiento,jdbcType=NUMERIC}, #{codDepartamentoNacimiento,jdbcType=NUMERIC}, 
      #{codPaisNacimiento,jdbcType=NUMERIC}, #{codFactorRh,jdbcType=NUMERIC}, #{codTipoIdentificacion,jdbcType=NUMERIC}, 
      #{numeroIdentificacion,jdbcType=VARCHAR}, #{primerNombre,jdbcType=VARCHAR}, #{segundoNombre,jdbcType=VARCHAR}, 
      #{primerApellido,jdbcType=VARCHAR}, #{segundoApellido,jdbcType=VARCHAR}, #{resumenProfesional,jdbcType=VARCHAR}, 
      #{numeroLibretaMilitar,jdbcType=VARCHAR}, #{distritoMilitar,jdbcType=VARCHAR}, 
      #{claseLibretaMilitar,jdbcType=NUMERIC}, #{libretaMilitarUrl,jdbcType=VARCHAR}, 
      #{fotoUrl,jdbcType=VARCHAR}, #{documentoIdentificacionUrl,jdbcType=VARCHAR}, #{fechaNacimiento,jdbcType=TIMESTAMP}, 
      #{expuestoPoliticamente,jdbcType=NUMERIC}, #{correoElectronico,jdbcType=VARCHAR}, 
      #{correoAlternativo,jdbcType=VARCHAR}, #{flgActivo,jdbcType=NUMERIC}, #{flgEstado,jdbcType=NUMERIC}, 
      #{audFechaActualizacion,jdbcType=TIMESTAMP}, #{audCodUsuario,jdbcType=NUMERIC}, 
      #{audCodRol,jdbcType=NUMERIC}, #{audAccion,jdbcType=NUMERIC}, #{codPertenenciaEtnica,jdbcType=NUMERIC}, 
      #{codSigep,jdbcType=VARCHAR}, #{flgDocumentoIdentificacionValidado,jdbcType=NUMERIC}, 
      #{flgLibretaMilitarValidada,jdbcType=NUMERIC}, #{fechaMarcacionPep,jdbcType=TIMESTAMP},
      #{marcacionPepVinc,jdbcType=NUMERIC},#{porcentajeHV,jdbcType=NUMERIC})
  </insert>
  <insert id="insertSelective" parameterType="co.gov.dafp.sigep2.bean.Persona">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    insert into PERSONA
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="codPersona != null">
        COD_PERSONA,
      </if>
      <if test="codGenero != null">
        COD_GENERO,
      </if>
      <if test="codEstadoCivil != null">
        COD_ESTADO_CIVIL,
      </if>
      <if test="codMunicipioNacimiento != null">
        COD_MUNICIPIO_NACIMIENTO,
      </if>
      <if test="codDepartamentoNacimiento != null">
        COD_DEPARTAMENTO_NACIMIENTO,
      </if>
      <if test="codPaisNacimiento != null">
        COD_PAIS_NACIMIENTO,
      </if>
      <if test="codFactorRh != null">
        COD_FACTOR_RH,
      </if>
      <if test="codTipoIdentificacion != null">
        COD_TIPO_IDENTIFICACION,
      </if>
      <if test="numeroIdentificacion != null">
        NUMERO_IDENTIFICACION,
      </if>
      <if test="primerNombre != null">
        PRIMER_NOMBRE,
      </if>
      <if test="segundoNombre != null">
        SEGUNDO_NOMBRE,
      </if>
      <if test="primerApellido != null">
        PRIMER_APELLIDO,
      </if>
      <if test="segundoApellido != null">
        SEGUNDO_APELLIDO,
      </if>
      <if test="resumenProfesional != null">
        RESUMEN_PROFESIONAL,
      </if>
      <if test="numeroLibretaMilitar != null">
        NUMERO_LIBRETA_MILITAR,
      </if>
      <if test="distritoMilitar != null">
        DISTRITO_MILITAR,
      </if>
      <if test="claseLibretaMilitar != null">
        CLASE_LIBRETA_MILITAR,
      </if>
      <if test="libretaMilitarUrl != null">
        LIBRETA_MILITAR_URL,
      </if>
      <if test="fotoUrl != null">
        FOTO_URL,
      </if>
      <if test="documentoIdentificacionUrl != null">
        DOCUMENTO_IDENTIFICACION_URL,
      </if>
      <if test="fechaNacimiento != null">
        FECHA_NACIMIENTO,
      </if>
      <if test="expuestoPoliticamente != null">
        EXPUESTO_POLITICAMENTE,
      </if>
      <if test="correoElectronico != null">
        CORREO_ELECTRONICO,
      </if>
      <if test="correoAlternativo != null">
        CORREO_ALTERNATIVO,
      </if>
      <if test="flgActivo != null">
        FLG_ACTIVO,
      </if>
      <if test="flgEstado != null">
        FLG_ESTADO,
      </if>
      <if test="audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION,
      </if>
      <if test="audCodUsuario != null">
        AUD_COD_USUARIO,
      </if>
      <if test="audCodRol != null">
        AUD_COD_ROL,
      </if>
      <if test="audAccion != null">
        AUD_ACCION,
      </if>
      <if test="codPertenenciaEtnica != null">
        COD_PERTENENCIA_ETNICA,
      </if>
      <if test="codSigep != null">
        COD_SIGEP,
      </if>
      <if test="flgDocumentoIdentificacionValidado != null">
        FLG_DOCUMENTO_IDENTIFICACION_VALIDADO,
      </if>
      <if test="flgLibretaMilitarValidada != null">
        FLG_LIBRETA_MILITAR_VALIDADA,
      </if>
      
      <if test="fechaMarcacionPep != null">
        FECHA_MARCACION_PEP,
      </if>
      <if test="marcacionPepVinc != null">
        MARCACION_PEP_VIN,
      </if>
       <if test="porcentajeHV != null">
        PORCENTAJE_HV,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="codPersona != null">
        #{codPersona,jdbcType=NUMERIC},
      </if>
      <if test="codGenero != null">
        #{codGenero,jdbcType=NUMERIC},
      </if>
      <if test="codEstadoCivil != null">
        #{codEstadoCivil,jdbcType=NUMERIC},
      </if>
      <if test="codMunicipioNacimiento != null">
        #{codMunicipioNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="codDepartamentoNacimiento != null">
        #{codDepartamentoNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="codPaisNacimiento != null">
        #{codPaisNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="codFactorRh != null">
        #{codFactorRh,jdbcType=NUMERIC},
      </if>
      <if test="codTipoIdentificacion != null">
        #{codTipoIdentificacion,jdbcType=NUMERIC},
      </if>
      <if test="numeroIdentificacion != null">
        #{numeroIdentificacion,jdbcType=VARCHAR},
      </if>
      <if test="primerNombre != null">
        #{primerNombre,jdbcType=VARCHAR},
      </if>
      <if test="segundoNombre != null">
        #{segundoNombre,jdbcType=VARCHAR},
      </if>
      <if test="primerApellido != null">
        #{primerApellido,jdbcType=VARCHAR},
      </if>
      <if test="segundoApellido != null">
        #{segundoApellido,jdbcType=VARCHAR},
      </if>
      <if test="resumenProfesional != null">
        #{resumenProfesional,jdbcType=VARCHAR},
      </if>
      <if test="numeroLibretaMilitar != null">
        #{numeroLibretaMilitar,jdbcType=VARCHAR},
      </if>
      <if test="distritoMilitar != null">
        #{distritoMilitar,jdbcType=VARCHAR},
      </if>
      <if test="claseLibretaMilitar != null">
        #{claseLibretaMilitar,jdbcType=NUMERIC},
      </if>
      <if test="libretaMilitarUrl != null">
        #{libretaMilitarUrl,jdbcType=VARCHAR},
      </if>
      <if test="fotoUrl != null">
        #{fotoUrl,jdbcType=VARCHAR},
      </if>
      <if test="documentoIdentificacionUrl != null">
        #{documentoIdentificacionUrl,jdbcType=VARCHAR},
      </if>
      <if test="fechaNacimiento != null">
        #{fechaNacimiento,jdbcType=TIMESTAMP},
      </if>
      <if test="expuestoPoliticamente != null">
        #{expuestoPoliticamente,jdbcType=NUMERIC},
      </if>
      <if test="correoElectronico != null">
        #{correoElectronico,jdbcType=VARCHAR},
      </if>
      <if test="correoAlternativo != null">
        #{correoAlternativo,jdbcType=VARCHAR},
      </if>
      <if test="flgActivo != null">
        #{flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="flgEstado != null">
        #{flgEstado,jdbcType=NUMERIC},
      </if>
      <if test="audFechaActualizacion != null">
        #{audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audCodUsuario != null">
        #{audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="audCodRol != null">
        #{audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="audAccion != null">
        #{audAccion,jdbcType=NUMERIC},
      </if>
      <if test="codPertenenciaEtnica != null">
        #{codPertenenciaEtnica,jdbcType=NUMERIC},
      </if>
      <if test="codSigep != null">
        #{codSigep,jdbcType=VARCHAR},
      </if>
      <if test="flgDocumentoIdentificacionValidado != null">
        #{flgDocumentoIdentificacionValidado,jdbcType=NUMERIC},
      </if>
      <if test="flgLibretaMilitarValidada != null">
        #{flgLibretaMilitarValidada,jdbcType=NUMERIC},
      </if>
      <if test="fechaMarcacionPep != null">
        #{fechaMarcacionPep,jdbcType=TIMESTAMP},
      </if>
       <if test="marcacionPepVinc != null">
        #{marcacionPepVinc,jdbcType=NUMERIC},
      </if>
      <if test="porcentajeHV != null">
        #{porcentajeHV,jdbcType=NUMERIC},
      </if>
    </trim>
  </insert>
  
  <insert id="insertPerson" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt"  statementType = "CALLABLE" >
			{CALL sp_crear_usuario1( #{primerNombre,jdbcType=VARCHAR},
								    #{segundoNombre,jdbcType=VARCHAR},
								    #{primerApellido,jdbcType=VARCHAR},
								    #{segundoApellido,jdbcType=VARCHAR},
								    #{correoElectronico,jdbcType=VARCHAR},
								    #{correoAlternativo,jdbcType=VARCHAR},
								    #{numeroIdentificacion,jdbcType=VARCHAR},
								    #{codTipoIdentificacion,jdbcType=VARCHAR},
								    #{idEntidad,jdbcType=VARCHAR},
								    #{tipoAsociacion,jdbcType=VARCHAR},
								    #{idPersonaAud,jdbcType=VARCHAR},
								    #{fechaNacimiento,jdbcType=TIMESTAMP},
								    #{codGenero,jdbcType=VARCHAR})}
</insert>
  <select id="countByExample" parameterType="co.gov.dafp.sigep2.bean.PersonaExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    select count(*) from PERSONA
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    update PERSONA
    <set>

      <if test="record.codGenero != null">
        COD_GENERO = #{record.codGenero,jdbcType=NUMERIC},
      </if>
      <if test="record.codEstadoCivil != null">
        COD_ESTADO_CIVIL = #{record.codEstadoCivil,jdbcType=NUMERIC},
      </if>
      <if test="record.codMunicipioNacimiento != null">
        COD_MUNICIPIO_NACIMIENTO = #{record.codMunicipioNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="record.codDepartamentoNacimiento != null">
        COD_DEPARTAMENTO_NACIMIENTO = #{record.codDepartamentoNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="record.codPaisNacimiento != null">
        COD_PAIS_NACIMIENTO = #{record.codPaisNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="record.codFactorRh != null">
        COD_FACTOR_RH = #{record.codFactorRh,jdbcType=NUMERIC},
      </if>
      <if test="record.codTipoIdentificacion != null">
        COD_TIPO_IDENTIFICACION = #{record.codTipoIdentificacion,jdbcType=NUMERIC},
      </if>
      <if test="record.numeroIdentificacion != null">
        NUMERO_IDENTIFICACION = #{record.numeroIdentificacion,jdbcType=VARCHAR},
      </if>
      <if test="record.primerNombre != null">
        PRIMER_NOMBRE = #{record.primerNombre,jdbcType=VARCHAR},
      </if>
      <if test="record.segundoNombre != null">
        SEGUNDO_NOMBRE = #{record.segundoNombre,jdbcType=VARCHAR},
      </if>
      <if test="record.primerApellido != null">
        PRIMER_APELLIDO = #{record.primerApellido,jdbcType=VARCHAR},
      </if>
      <if test="record.segundoApellido != null">
        SEGUNDO_APELLIDO = #{record.segundoApellido,jdbcType=VARCHAR},
      </if>
      <if test="record.resumenProfesional != null">
        RESUMEN_PROFESIONAL = #{record.resumenProfesional,jdbcType=VARCHAR},
      </if>
      <if test="record.numeroLibretaMilitar != null">
        NUMERO_LIBRETA_MILITAR = #{record.numeroLibretaMilitar,jdbcType=VARCHAR},
      </if>
      <if test="record.distritoMilitar != null">
        DISTRITO_MILITAR = #{record.distritoMilitar,jdbcType=VARCHAR},
      </if>
      <if test="record.claseLibretaMilitar != null">
        CLASE_LIBRETA_MILITAR = #{record.claseLibretaMilitar,jdbcType=NUMERIC},
      </if>
      <if test="record.libretaMilitarUrl != null">
        LIBRETA_MILITAR_URL = #{record.libretaMilitarUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.fotoUrl != null">
        FOTO_URL = #{record.fotoUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.documentoIdentificacionUrl != null">
        DOCUMENTO_IDENTIFICACION_URL = #{record.documentoIdentificacionUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.fechaNacimiento != null">
        FECHA_NACIMIENTO = #{record.fechaNacimiento,jdbcType=TIMESTAMP},
      </if>
      <if test="record.expuestoPoliticamente != null">
        EXPUESTO_POLITICAMENTE = #{record.expuestoPoliticamente,jdbcType=NUMERIC},
      </if>
      <if test="record.correoElectronico != null">
        CORREO_ELECTRONICO = #{record.correoElectronico,jdbcType=VARCHAR},
      </if>
      <if test="record.correoAlternativo != null">
        CORREO_ALTERNATIVO = #{record.correoAlternativo,jdbcType=VARCHAR},
      </if>
      <if test="record.flgActivo != null">
        FLG_ACTIVO = #{record.flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="record.flgEstado != null">
        FLG_ESTADO = #{record.flgEstado,jdbcType=NUMERIC},
      </if>
      <if test="record.audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION = #{record.audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="record.audCodUsuario != null">
        AUD_COD_USUARIO = #{record.audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="record.audCodRol != null">
        AUD_COD_ROL = #{record.audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="record.audAccion != null">
        AUD_ACCION = #{record.audAccion,jdbcType=NUMERIC},
      </if>
      <if test="record.codPertenenciaEtnica != null">
        COD_PERTENENCIA_ETNICA = #{record.codPertenenciaEtnica,jdbcType=NUMERIC},
      </if>
      <if test="record.codSigep != null">
        COD_SIGEP = #{record.codSigep,jdbcType=VARCHAR},
      </if>
      <if test="record.flgDocumentoIdentificacionValidado != null">
        FLG_DOCUMENTO_IDENTIFICACION_VALIDADO = #{record.flgDocumentoIdentificacionValidado,jdbcType=NUMERIC},
      </if>
      <if test="record.flgLibretaMilitarValidada != null">
        FLG_LIBRETA_MILITAR_VALIDADA = #{record.flgLibretaMilitarValidada,jdbcType=NUMERIC},
      </if>
       <if test="record.fechaMarcacionPep != null">
        FECHA_MARCACION_PEP = #{record.fechaMarcacionPep,jdbcType=TIMESTAMP},
      </if>
       <if test="record.marcacionPepVinc != null">
        MARCACION_PEP_VIN = #{record.marcacionPepVinc,jdbcType=NUMERIC},
      </if>
       <if test="record.porcentajeHV != null">
        PORCENTAJE_HV = #{record.porcentajeHV,jdbcType=NUMERIC},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    update PERSONA
    set 
      COD_GENERO = #{record.codGenero,jdbcType=NUMERIC},
      COD_ESTADO_CIVIL = #{record.codEstadoCivil,jdbcType=NUMERIC},
      COD_MUNICIPIO_NACIMIENTO = #{record.codMunicipioNacimiento,jdbcType=NUMERIC},
      COD_DEPARTAMENTO_NACIMIENTO = #{record.codDepartamentoNacimiento,jdbcType=NUMERIC},
      COD_PAIS_NACIMIENTO = #{record.codPaisNacimiento,jdbcType=NUMERIC},
      COD_FACTOR_RH = #{record.codFactorRh,jdbcType=NUMERIC},
      COD_TIPO_IDENTIFICACION = #{record.codTipoIdentificacion,jdbcType=NUMERIC},
      NUMERO_IDENTIFICACION = #{record.numeroIdentificacion,jdbcType=VARCHAR},
      PRIMER_NOMBRE = #{record.primerNombre,jdbcType=VARCHAR},
      SEGUNDO_NOMBRE = #{record.segundoNombre,jdbcType=VARCHAR},
      PRIMER_APELLIDO = #{record.primerApellido,jdbcType=VARCHAR},
      SEGUNDO_APELLIDO = #{record.segundoApellido,jdbcType=VARCHAR},
      RESUMEN_PROFESIONAL = #{record.resumenProfesional,jdbcType=VARCHAR},
      NUMERO_LIBRETA_MILITAR = #{record.numeroLibretaMilitar,jdbcType=VARCHAR},
      DISTRITO_MILITAR = #{record.distritoMilitar,jdbcType=VARCHAR},
      CLASE_LIBRETA_MILITAR = #{record.claseLibretaMilitar,jdbcType=NUMERIC},
      LIBRETA_MILITAR_URL = #{record.libretaMilitarUrl,jdbcType=VARCHAR},
      FOTO_URL = #{record.fotoUrl,jdbcType=VARCHAR},
      DOCUMENTO_IDENTIFICACION_URL = #{record.documentoIdentificacionUrl,jdbcType=VARCHAR},
      FECHA_NACIMIENTO = #{record.fechaNacimiento,jdbcType=TIMESTAMP},
      EXPUESTO_POLITICAMENTE = #{record.expuestoPoliticamente,jdbcType=NUMERIC},
      CORREO_ELECTRONICO = #{record.correoElectronico,jdbcType=VARCHAR},
      CORREO_ALTERNATIVO = #{record.correoAlternativo,jdbcType=VARCHAR},
      FLG_ACTIVO = #{record.flgActivo,jdbcType=NUMERIC},
      FLG_ESTADO = #{record.flgEstado,jdbcType=NUMERIC},
      AUD_FECHA_ACTUALIZACION = #{record.audFechaActualizacion,jdbcType=TIMESTAMP},
      AUD_COD_USUARIO = #{record.audCodUsuario,jdbcType=NUMERIC},
      AUD_COD_ROL = #{record.audCodRol,jdbcType=NUMERIC},
      AUD_ACCION = #{record.audAccion,jdbcType=NUMERIC},
      COD_PERTENENCIA_ETNICA = #{record.codPertenenciaEtnica,jdbcType=NUMERIC},
      COD_SIGEP = #{record.codSigep,jdbcType=VARCHAR},
      FLG_DOCUMENTO_IDENTIFICACION_VALIDADO = #{record.flgDocumentoIdentificacionValidado,jdbcType=NUMERIC},
      FLG_LIBRETA_MILITAR_VALIDADA = #{record.flgLibretaMilitarValidada,jdbcType=NUMERIC},
      FECHA_MARCACION_PEP = #{record.fechaMarcacionPep,jdbcType=TIMESTAMP},
      MARCACION_PEP_VIN = #{record.marcacionPepVinc,jdbcType=NUMERIC},
      PORCENTAJE_HV = #{record.porcentajeHV,jdbcType=NUMERIC}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="co.gov.dafp.sigep2.bean.Persona">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    update PERSONA
    <set>
      <if test="codGenero != null">
        COD_GENERO = #{codGenero,jdbcType=NUMERIC},
      </if>
      <if test="codEstadoCivil != null">
        COD_ESTADO_CIVIL = #{codEstadoCivil,jdbcType=NUMERIC},
      </if>
      <if test="codMunicipioNacimiento != null">
        COD_MUNICIPIO_NACIMIENTO = #{codMunicipioNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="codDepartamentoNacimiento != null">
        COD_DEPARTAMENTO_NACIMIENTO = #{codDepartamentoNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="codPaisNacimiento != null">
        COD_PAIS_NACIMIENTO = #{codPaisNacimiento,jdbcType=NUMERIC},
      </if>
      <if test="codFactorRh != null">
        COD_FACTOR_RH = #{codFactorRh,jdbcType=NUMERIC},
      </if>
      <if test="codTipoIdentificacion != null">
        COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC},
      </if>
      <if test="numeroIdentificacion != null">
        NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR},
      </if>
      <if test="primerNombre != null">
        PRIMER_NOMBRE = #{primerNombre,jdbcType=VARCHAR},
      </if>
      <if test="segundoNombre != null">
        SEGUNDO_NOMBRE = #{segundoNombre,jdbcType=VARCHAR},
      </if>
      <if test="primerApellido != null">
        PRIMER_APELLIDO = #{primerApellido,jdbcType=VARCHAR},
      </if>
      <if test="segundoApellido != null">
        SEGUNDO_APELLIDO = #{segundoApellido,jdbcType=VARCHAR},
      </if>
      <if test="resumenProfesional != null">
        RESUMEN_PROFESIONAL = #{resumenProfesional,jdbcType=VARCHAR},
      </if>
      <if test="numeroLibretaMilitar != null">
        NUMERO_LIBRETA_MILITAR = #{numeroLibretaMilitar,jdbcType=VARCHAR},
      </if>
      <if test="distritoMilitar != null">
        DISTRITO_MILITAR = #{distritoMilitar,jdbcType=VARCHAR},
      </if>
      
        CLASE_LIBRETA_MILITAR = #{claseLibretaMilitar,jdbcType=NUMERIC},
      
      <if test="libretaMilitarUrl != null">
        LIBRETA_MILITAR_URL = #{libretaMilitarUrl,jdbcType=VARCHAR},
      </if>
      <if test="fotoUrl != null">
        FOTO_URL = #{fotoUrl,jdbcType=VARCHAR},
      </if>
      <if test="documentoIdentificacionUrl != null">
        DOCUMENTO_IDENTIFICACION_URL = #{documentoIdentificacionUrl,jdbcType=VARCHAR},
      </if>
      <if test="fechaNacimiento != null">
        FECHA_NACIMIENTO = #{fechaNacimiento,jdbcType=TIMESTAMP},
      </if>
      <if test="expuestoPoliticamente != null">
        EXPUESTO_POLITICAMENTE = #{expuestoPoliticamente,jdbcType=NUMERIC},
      </if>
      <if test="correoElectronico != null">
        CORREO_ELECTRONICO = #{correoElectronico,jdbcType=VARCHAR},
      </if>
      <if test="correoAlternativo != null">
        CORREO_ALTERNATIVO = #{correoAlternativo,jdbcType=VARCHAR},
      </if>
      <if test="flgActivo != null">
        FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="flgEstado != null">
        FLG_ESTADO = #{flgEstado,jdbcType=NUMERIC},
      </if>
      <if test="audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION = #{audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audCodUsuario != null">
        AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="audCodRol != null">
        AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="audAccion != null">
        AUD_ACCION = #{audAccion,jdbcType=NUMERIC},
      </if>
      <if test="codPertenenciaEtnica != null">
        COD_PERTENENCIA_ETNICA = #{codPertenenciaEtnica,jdbcType=NUMERIC},
      </if>
      <if test="codSigep != null">
        COD_SIGEP = #{codSigep,jdbcType=VARCHAR},
      </if>
      <if test="flgDocumentoIdentificacionValidado != null">
        FLG_DOCUMENTO_IDENTIFICACION_VALIDADO = #{flgDocumentoIdentificacionValidado,jdbcType=NUMERIC},
      </if>
      <if test="flgLibretaMilitarValidada != null">
        FLG_LIBRETA_MILITAR_VALIDADA = #{flgLibretaMilitarValidada,jdbcType=NUMERIC},
      </if>
      <if test="fechaMarcacionPep != null">
        FECHA_MARCACION_PEP = #{fechaMarcacionPep,jdbcType=TIMESTAMP},
      </if>
       <if test="marcacionPepVinc != null">
        MARCACION_PEP_VIN = #{marcacionPepVinc,jdbcType=NUMERIC},
      </if>
      <if test="porcentajeHV != null">
        PORCENTAJE_HV = #{porcentajeHV,jdbcType=NUMERIC},
      </if>
      <if test="documentoDiscapacidadUrl != null">
        DOCUMENTO_DISCAPACIDAD_URL = #{documentoDiscapacidadUrl,jdbcType=VARCHAR},
      </if>
      
      <if test="flgDiscapacidadValidada != null">
        FLG_DISCAPACIDAD_VALIDADA = #{flgDiscapacidadValidada,jdbcType=NUMERIC},
      </if>
      
    </set>
    where COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
  </update>
  <update id="updateByPrimaryKey" parameterType="co.gov.dafp.sigep2.bean.Persona">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
    update PERSONA
    set COD_GENERO = #{codGenero,jdbcType=NUMERIC},
      COD_ESTADO_CIVIL = #{codEstadoCivil,jdbcType=NUMERIC},
      COD_MUNICIPIO_NACIMIENTO = #{codMunicipioNacimiento,jdbcType=NUMERIC},
      COD_DEPARTAMENTO_NACIMIENTO = #{codDepartamentoNacimiento,jdbcType=NUMERIC},
      COD_PAIS_NACIMIENTO = #{codPaisNacimiento,jdbcType=NUMERIC},
      COD_FACTOR_RH = #{codFactorRh,jdbcType=NUMERIC},
      COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC},
      NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR},
      PRIMER_NOMBRE = #{primerNombre,jdbcType=VARCHAR},
      SEGUNDO_NOMBRE = #{segundoNombre,jdbcType=VARCHAR},
      PRIMER_APELLIDO = #{primerApellido,jdbcType=VARCHAR},
      SEGUNDO_APELLIDO = #{segundoApellido,jdbcType=VARCHAR},
      RESUMEN_PROFESIONAL = #{resumenProfesional,jdbcType=VARCHAR},
      NUMERO_LIBRETA_MILITAR = #{numeroLibretaMilitar,jdbcType=VARCHAR},
      DISTRITO_MILITAR = #{distritoMilitar,jdbcType=VARCHAR},
      CLASE_LIBRETA_MILITAR = #{claseLibretaMilitar,jdbcType=NUMERIC},
      LIBRETA_MILITAR_URL = #{libretaMilitarUrl,jdbcType=VARCHAR},
      FOTO_URL = #{fotoUrl,jdbcType=VARCHAR},
      DOCUMENTO_IDENTIFICACION_URL = #{documentoIdentificacionUrl,jdbcType=VARCHAR},
      FECHA_NACIMIENTO = #{fechaNacimiento,jdbcType=TIMESTAMP},
      EXPUESTO_POLITICAMENTE = #{expuestoPoliticamente,jdbcType=NUMERIC},
      CORREO_ELECTRONICO = #{correoElectronico,jdbcType=VARCHAR},
      CORREO_ALTERNATIVO = #{correoAlternativo,jdbcType=VARCHAR},
      FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC},
      FLG_ESTADO = #{flgEstado,jdbcType=NUMERIC},
      AUD_FECHA_ACTUALIZACION = #{audFechaActualizacion,jdbcType=TIMESTAMP},
      AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC},
      AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC},
      AUD_ACCION = #{audAccion,jdbcType=NUMERIC},
      COD_PERTENENCIA_ETNICA = #{codPertenenciaEtnica,jdbcType=NUMERIC},
      COD_SIGEP = #{codSigep,jdbcType=VARCHAR},
      FLG_DOCUMENTO_IDENTIFICACION_VALIDADO = #{flgDocumentoIdentificacionValidado,jdbcType=NUMERIC},
      FLG_LIBRETA_MILITAR_VALIDADA = #{flgLibretaMilitarValidada,jdbcType=NUMERIC},
      FECHA_MARCACION_PEP = #{fechaMarcacionPep,jdbcType=NUMERIC},
      MARCACION_PEP_VIN = #{marcacionPepVinc,jdbcType=NUMERIC},
      PORCENTAJE_HV = #{porcentajeHV,jdbcType=NUMERIC}
    where COD_PERSONA = #{codPersona,jdbcType=TIMESTAMP}
  </update>
  <select id="selectPersonaRolActivoEntidad" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
    SELECT DISTINCT PERSONA.*
	FROM PERSONA 
	INNER JOIN USUARIO ON PERSONA.COD_PERSONA = USUARIO.COD_PERSONA
    INNER JOIN USUARIO_ENTIDAD ON USUARIO_ENTIDAD.COD_USUARIO = USUARIO.COD_USUARIO
    INNER JOIN USUARIO_ROL_ENTIDAD ON USUARIO_ENTIDAD.COD_USUARIO_ENTIDAD = USUARIO_ROL_ENTIDAD.COD_USUARIO_ENTIDAD 
	WHERE
    PERSONA.FLG_ACTIVO = 1 
    AND USUARIO.FLG_ESTADO = 1
    AND USUARIO_ENTIDAD.FLG_ACTIVO = 1
    AND USUARIO_ROL_ENTIDAD.FLG_ACTIVO = 1
    AND USUARIO_ROL_ENTIDAD.FLG_ESTADO = 1
    AND PERSONA.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
    AND USUARIO_ENTIDAD.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
  </select>
   <select id="selectEmailPersonasDesvincular" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
    SELECT DISTINCT PERSONA.*
	FROM PERSONA 
	INNER JOIN USUARIO ON PERSONA.COD_PERSONA = USUARIO.COD_PERSONA
	INNER JOIN USUARIO_ENTIDAD ON USUARIO_ENTIDAD.COD_USUARIO = USUARIO.COD_USUARIO
	INNER JOIN USUARIO_ROL_ENTIDAD ON USUARIO_ROL_ENTIDAD.COD_USUARIO_ENTIDAD = USUARIO_ENTIDAD.COD_USUARIO_ENTIDAD
	WHERE
	PERSONA.FLG_ACTIVO = 1 
	AND USUARIO.FLG_ESTADO = 1
	AND USUARIO_ENTIDAD.FLG_ACTIVO = 1
	AND USUARIO_ENTIDAD.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	AND USUARIO_ROL_ENTIDAD.FLG_ACTIVO = 1
	AND USUARIO_ROL_ENTIDAD.FLG_ESTADO = 1
	AND USUARIO_ROL_ENTIDAD.COD_ROL IN (8,16,18)
  </select>
   <select id="selectAactivaEntidad" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
	    SELECT DISTINCT  P.*,
       		(SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = P.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
			(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = P.COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
			(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = P.COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
			(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
			(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
			(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_GENERO) NOMBRE_GENERO,
			(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = P.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO
	    FROM ENTIDAD E
	    INNER JOIN ENTIDAD_CARGO ON E.COD_ENTIDAD = ENTIDAD_CARGO.COD_ENTIDAD
	    INNER JOIN ENTIDAD_PLANTA_DETALLE ON ENTIDAD_CARGO.COD_ENTIDAD_CARGO = ENTIDAD_PLANTA_DETALLE.COD_ENTIDAD_CARGO
	    INNER JOIN VINCULACION V ON ENTIDAD_PLANTA_DETALLE.COD_ENTIDAD_PLANTA_DETALLE = V.COD_ENTIDAD_PLANTA_DETALLE
	    INNER JOIN PERSONA P ON P.COD_PERSONA = V.COD_PERSONA
	    WHERE E.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	    AND V.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
  </select>
   <select id="selectByCodUsuario" parameterType="co.gov.dafp.sigep2.bean.Usuario" resultMap="BaseResultMap">
	    SELECT P.* FROM PERSONA P
               INNER JOIN USUARIO U on P.COD_PERSONA = U.COD_PERSONA
            WHERE U.NOMBRE_USUARIO = #{nombreUsuario,jdbcType=VARCHAR}
             <if test="ticket != null">
            	AND U.TICKET = #{ticket,jdbcType=VARCHAR}
             </if>
             
  </select>
  <update id="updateTiket" parameterType="co.gov.dafp.sigep2.bean.Usuario">
        UPDATE USUARIO SET TICKET = NULL
           WHERE TICKET = #{ticket,jdbcType=VARCHAR}
           AND NOMBRE_USUARIO = #{nombreUsuario,jdbcType=VARCHAR}
  </update>
  <select id="selectPersonaVinculacionFiltro" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
	  SELECT a.*, 
	           CASE 
           WHEN VINCULACION > 0 AND (DATE_TRUNC('day', FECHAVINC) + (DIASDESVINC || ' days')::INTERVAL) >= CURRENT_DATE 
           THEN 1 
           ELSE 0 
       END AS DESHACERVINC
	FROM (
	    SELECT DISTINCT p.*,
	       (SELECT COUNT(*)
	            FROM VINCULACION v
	              	INNER JOIN ENTIDAD_PLANTA_DETALLE epd ON epd.COD_ENTIDAD_PLANTA_DETALLE = v.COD_ENTIDAD_PLANTA_DETALLE
            		INNER JOIN ENTIDAD_PLANTA ep ON ep.COD_ENTIDAD_PLANTA = epd.COD_ENTIDAD_PLANTA
	            WHERE v.COD_PERSONA= p.COD_PERSONA
	                AND  ep.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	                AND  COALESCE(v.COD_CAUSAL_DESVINCULACION,1) != #{causalDesv,jdbcType=NUMERIC}
	                AND NOT(v.COD_CAUSAL_DESVINCULACION is null and v.FECHA_FINALIZACION is not null)) vinculacion,
	        (SELECT MAX(v.AUD_FECHA_ACTUALIZACION) 
	            FROM VINCULACION v
	            	INNER JOIN ENTIDAD_PLANTA_DETALLE epd ON epd.COD_ENTIDAD_PLANTA_DETALLE = v.COD_ENTIDAD_PLANTA_DETALLE
            		INNER JOIN ENTIDAD_PLANTA ep ON ep.COD_ENTIDAD_PLANTA = epd.COD_ENTIDAD_PLANTA 
	            WHERE v.COD_PERSONA= p.COD_PERSONA
	                AND  ep.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	                AND NOT(v.COD_CAUSAL_DESVINCULACION is null and v.FECHA_FINALIZACION is not null))FECHAVINC,
	        (SELECT VALOR_PARAMETRO FROM PARAMETRICA WHERE PARAMETRICA.COD_TABLA_PARAMETRICA = #{parDiasDesv,jdbcType=NUMERIC}) DIASDESVINC,
	        (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = p.COD_PAIS_NACIMIENTO) NOMBRE_PAIS ,
	        (SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = p.COD_DEPARTAMENTO_NACIMIENTO) NOMBRE_DEPARTAMENTO,
	        (SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = p.COD_MUNICIPIO_NACIMIENTO) NOMBRE_MUNICIPIO,
	        (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = p.COD_ESTADO_CIVIL) NOMBRE_ESTADO_CIVIL,
	        (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = p.CLASE_LIBRETA_MILITAR) NOMBRE_LIBRETA_MILITAR,
	        (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = p.COD_GENERO) NOMBRE_GENERO,
	        (SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = p.COD_TIPO_IDENTIFICACION) NOMBRE_TIPO_DOCUMENTO
	    from persona p
	    inner join usuario u on u.cod_persona = p.cod_persona
	    where(
	        p.FLG_ACTIVO = 1 
	        AND u.FLG_ESTADO = 1
	    )
	    <if test="codTipoIdentificacion != null">
			AND p.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
	  	</if>
	  	<if test="numeroIdentificacion != null">
			AND  UPPER(p.NUMERO_IDENTIFICACION) like UPPER(#{numeroIdentificacion,jdbcType=VARCHAR})||'%'  
	  	</if>
	  	<if test="primerNombre != null">
			AND UPPER(p.PRIMER_NOMBRE) like '%'||UPPER(#{primerNombre,jdbcType=VARCHAR})||'%'
	  	</if>
	  	<if test="segundoNombre != null">
			AND UPPER(p.SEGUNDO_NOMBRE) like '%'||UPPER(#{segundoNombre,jdbcType=VARCHAR})||'%'
	  	</if>
	  	<if test="primerApellido != null">
			AND UPPER(p.PRIMER_APELLIDO) like '%'||UPPER(#{primerApellido,jdbcType=VARCHAR})||'%'
	  	</if>
	  	<if test="segundoApellido != null">
			AND UPPER(p.SEGUNDO_APELLIDO) like '%'||UPPER(#{segundoApellido,jdbcType=VARCHAR})||'%'
	  	</if>
	  	 order by p.NUMERO_IDENTIFICACION asc
        OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY

	)a  
  </select>
   <select id="selectPersonasPorRoles" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
    SELECT DISTINCT PERSONA.*
	FROM PERSONA 
	INNER JOIN USUARIO ON PERSONA.COD_PERSONA = USUARIO.COD_PERSONA
	INNER JOIN USUARIO_ENTIDAD ON USUARIO_ENTIDAD.COD_USUARIO = USUARIO.COD_USUARIO
	INNER JOIN USUARIO_ROL_ENTIDAD ON USUARIO_ROL_ENTIDAD.COD_USUARIO_ENTIDAD = USUARIO_ENTIDAD.COD_USUARIO_ENTIDAD
	WHERE
	PERSONA.FLG_ACTIVO = 1 
	AND USUARIO.FLG_ESTADO = 1
	AND USUARIO_ENTIDAD.FLG_ACTIVO = 1
    <if test="codEntidad != null">
		AND USUARIO_ENTIDAD.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
  	</if>
	AND USUARIO_ROL_ENTIDAD.FLG_ACTIVO = 1
	AND USUARIO_ROL_ENTIDAD.FLG_ESTADO = 1
    <if test="codRolList != null">
	  AND USUARIO_ROL_ENTIDAD.COD_ROL IN
	  <foreach item="item" index="index" collection="codRolList"
       			open="(" separator="," close=")">
         					#{item}
   	  </foreach>
  	</if>
  </select>
  
  <select id="selectPersonaResponsableEntidad" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 08 14:16:06 COT 2018.
    -->
   		select DISTINCT per.*,
   						(SELECT COUNT(*) FROM entidad ent where ent.cod_responsable_gestion = per.cod_persona )TOTAL_RESPONSABLE,
        				(SELECT COUNT(*) FROM entidad ent where ent.cod_responsable_gestion = per.cod_persona AND ent.cod_orden = #{ordenNacional,jdbcType=NUMERIC})TOTAL_RESPONSABLE_NACIONAL,
        				(SELECT COUNT(*) FROM entidad ent where ent.cod_responsable_gestion = per.cod_persona AND ent.cod_orden = #{ordenTerritorial,jdbcType=NUMERIC})TOTAL_RESPONSABLE_TERRRITORIAL
		from   entidad ent    ,
		       usuario_entidad ue  ,
		       usuario_rol_entidad ure ,
		       usuario usu,
		       persona per
		where  ent.cod_entidad = ue.cod_entidad
		and  ue.cod_usuario_entidad   = ure.cod_usuario_entidad
		and  ue.cod_usuario = usu.cod_usuario
		and  usu.cod_persona = per.cod_persona
		and  COALESCE(usu.fecha_vence,NOW()) &gt;= NOW()
		and COALESCE(per.flg_activo,1)=1
		 <if test="codEntidad != null">
			and ent.cod_entidad = #{codEntidad,jdbcType=NUMERIC}
	     </if>
		 <if test="codRol != null">
			and  ure.cod_rol = #{codRol,jdbcType=NUMERIC}
	     </if>
		  <if test="flgActivo != null">
			and  ue.flg_activo = #{flgActivo,jdbcType=NUMERIC}
		    and  ure.flg_activo = #{flgActivo,jdbcType=NUMERIC}
	     </if>
		   <if test="flgEstado != null">
			and usu.flg_estado = #{flgEstado,jdbcType=NUMERIC}
	     </if>
  </select>
  <select id="selectPersonaEntidadPlanta" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
	  Select per.cod_tipo_identificacion, per.numero_identificacion, per.primer_nombre, per.segundo_nombre, per.primer_apellido,
		per.segundo_apellido, per.cod_persona, vin.cod_vinculacion, ep.cod_entidad_planta, epd.cod_entidad_planta_detalle, 
		nd.cod_nomenclatura_denominacion, d.cod_denominacion, d.nombre_denominacion, par.valor_parametro as nombre_tipoDocuento
		from persona per
		inner join vinculacion vin on per.cod_persona = vin.cod_persona
		inner join entidad_planta_detalle epd on vin.cod_entidad_planta_detalle = epd.cod_entidad_planta_detalle
		inner join entidad_planta ep on ep.cod_entidad_planta = epd.cod_entidad_planta
		inner join nomenclatura_denominacion nd on epd.cod_nomenclatura_denominacion = nd.cod_nomenclatura_denominacion
		inner join denominacion d on nd.cod_denominacion = d.cod_denominacion
		inner join parametrica par on par.cod_tabla_parametrica = per.cod_tipo_identificacion
		where ep.cod_entidad = #{codEntidad,jdbcType=NUMERIC}
		 <if test="codEntidadPlanta != null">
			epd.cod_entidad_planta = #{codEntidadPlanta,jdbcType=NUMERIC}
	     </if>
  </select>
  <select id="selectPersonaVinculdaOP" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
   SELECT 
		U.COD_USUARIO, 
        UE.COD_ENTIDAD,
	    V.COD_VINCULACION,
	    p.COD_PERSONA,
        p1.nombre_parametro,
        P.NUMERO_IDENTIFICACION,
		P.PRIMER_NOMBRE ,
        P.SEGUNDO_NOMBRE,
        P.PRIMER_APELLIDO,
        P.SEGUNDO_APELLIDO,
        e.nombre_entidad
	FROM USUARIO U
	    INNER JOIN PERSONA P ON U.COD_PERSONA = P.COD_PERSONA
		INNER JOIN USUARIO_ENTIDAD UE ON UE.COD_USUARIO = U.COD_USUARIO
	    INNER JOIN VINCULACION V ON V.COD_PERSONA = P.COD_PERSONA
        INNER JOIN ENTIDAD E ON UE.COD_ENTIDAD = E.COD_ENTIDAD
        INNER JOIN PARAMETRICA P1 ON P1.COD_TABLA_PARAMETRICA = P.COD_TIPO_IDENTIFICACION
	WHERE v.FECHA_FINALIZACION IS NULL
	 <if test="codigoSigep != null">
			AND E.CODIGO_SIGEP = #{codigoSigep,jdbcType=VARCHAR}
	  </if>
	  <if test="codEntidad != null">
			AND E.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	  </if>
	   <if test="flgActivo != null">
			AND UE.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
	  </if>
	  <if test="codTipoVinculacion != null">
			AND UE.COD_TIPO_VINCULACION = #{codTipoVinculacion,jdbcType=NUMERIC}
	  </if>
	  <if test="codTipoIdentificacion != null">
			AND P.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
	  </if>
	  <if test="numeroIdentificacion != null">
			AND P.NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR}
	  </if>
	  <if test="primerNombre != null">
			AND UPPER(P.PRIMER_NOMBRE) like '%'||UPPER(#{primerNombre,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="segundoNombre != null">
			AND UPPER(P.SEGUNDO_NOMBRE) like '%'||UPPER(#{segundoNombre,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="primerApellido != null">
			AND UPPER(P.PRIMER_APELLIDO) like '%'||UPPER(#{primerApellido,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="segundoApellido != null">
			AND UPPER(P.SEGUNDO_APELLIDO) like '%'||UPPER(#{segundoApellido,jdbcType=VARCHAR})||'%' 
	  </if>
	  <if test="flgEstado != null">
			AND U.FLG_ESTADO = #{flgEstado,jdbcType=NUMERIC}
	  </if>
	  <if test="flgActivoVinculacion != null">
			AND V.FLG_ACTIVO = #{flgActivoVinculacion ,jdbcType=NUMERIC}
	  </if>
  </select>
  
  <select id="selectPersonasVinculadas" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
   SELECT 
		U.COD_USUARIO,
		p.*,
		p.PRIMER_NOMBRE ||' '|| p.SEGUNDO_NOMBRE ||' '|| p.PRIMER_APELLIDO ||' '|| p.SEGUNDO_APELLIDO NOMBRE_PERSONA_COMPLETO
	    from persona p
	    inner join usuario u on u.cod_persona = p.cod_persona
	    inner join vinculacion v on v.cod_persona = p.cod_persona
	    inner join entidad_planta_detalle epd on epd.cod_entidad_planta_detalle = v.cod_entidad_planta_detalle
	    inner join entidad_planta ep on ep.cod_entidad_planta = epd.cod_entidad_planta
		WHERE v.FECHA_FINALIZACION IS NULL
	  <if test="codEntidad != null">
			AND Ep.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	  </if>
	   <if test="flgActivo != null">
			AND v.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
	  </if>
	 
	  <if test="flgEstado != null">
			AND U.FLG_ESTADO = #{flgEstado,jdbcType=NUMERIC}
	  </if>
	  
  </select>
</mapper>