<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.gov.dafp.sigep2.interfaces.ExperienciaProfesionalMapper">
  <resultMap id="BaseResultMap" type="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    <id column="COD_EXPERIENCIA_PROFESIONAL" jdbcType="NUMERIC" property="codExperienciaProfesional" />
    <result column="COD_PERSONA" jdbcType="NUMERIC" property="codPersona" />
    <result column="COD_PAIS" jdbcType="NUMERIC" property="codPais" />
    <result column="COD_DEPARTAMENTO" jdbcType="NUMERIC" property="codDepartamento" />
    <result column="COD_MUNICIPIO" jdbcType="NUMERIC" property="codMunicipio" />
    <result column="COD_JORNADA_LABORAL" jdbcType="NUMERIC" property="codJornadaLaboral" />
    <result column="COD_MOTIVO_RETIRO" jdbcType="NUMERIC" property="codMotivoRetiro" />
    <result column="COD_TIPO_ENTIDAD" jdbcType="NUMERIC" property="codTipoEntidad" />
    <result column="FLG_ENTIDAD_PUBLICA" jdbcType="NUMERIC" property="flgEntidadPublica" />
    <result column="INDICATIVO_TELEFONO" jdbcType="VARCHAR" property="indicativoTelefono" />
    <result column="NOMBRE_ENTIDAD" jdbcType="VARCHAR" property="nombreEntidad" />
    <result column="DIRECCION_ENTIDAD" jdbcType="VARCHAR" property="direccionEntidad" />
    <result column="TELEFONO" jdbcType="VARCHAR" property="telefono" />
    <result column="DEPENDENCIA" jdbcType="VARCHAR" property="dependencia" />
    <result column="CARGO" jdbcType="VARCHAR" property="cargo" />
    <result column="FLG_ACTIVO_ENTIDAD" jdbcType="NUMERIC" property="flgActivoEntidad" />
    <result column="FECHA_INGRESO" jdbcType="TIMESTAMP" property="fechaIngreso" />
    <result column="FECHA_RETIRO" jdbcType="TIMESTAMP" property="fechaRetiro" />
    <result column="HORAS_PROMEDIO_MES" jdbcType="NUMERIC" property="horasPromedioMes" />
    <result column="URL_DOCUMENTO_SOPORTE" jdbcType="VARCHAR" property="urlDocumentoSoporte" />
    <result column="NOMBRE_JEFE" jdbcType="VARCHAR" property="nombreJefe" />
    <result column="FLG_VALIDA_JEFE" jdbcType="NUMERIC" property="flgValidaJefe" />
    <result column="COD_USAURIO_VALIDA" jdbcType="NUMERIC" property="codUsaurioValida" />
    <result column="FECHA_VALIDACION" jdbcType="TIMESTAMP" property="fechaValidacion" />
    <result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
    <result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
    <result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
    <result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />
    <result column="JUSTIFICACION_ACTUALIZACION" jdbcType="VARCHAR" property="justificacionActualizacion" />
    <result column="FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="fechaActualizacion" />
    <result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
    <result column="COD_ENTIDAD" jdbcType="NUMERIC" property="codEntidad" />
    <result column="COD_CARGO" jdbcType="NUMERIC" property="codCargo" />
    <result column="COD_DEPENDENCIA_HV" jdbcType="NUMERIC" property="codDependenciaHV" />
    <result column="COD_CARGO_HV" jdbcType="NUMERIC" property="codCargoHV" />
    <result column="COD_NIVEL_JERARQUICO_HV" jdbcType="NUMERIC" property="codNivelJerarquicoHV" />
    
  </resultMap>
  
  <resultMap id="BaseResultMapExt" type="co.gov.dafp.sigep2.bean.ext.ExperienciaProfesionalExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    <id column="COD_EXPERIENCIA_PROFESIONAL" jdbcType="NUMERIC" property="codExperienciaProfesional" />
    <result column="COD_PERSONA" jdbcType="NUMERIC" property="codPersona" />
    <result column="COD_PAIS" jdbcType="NUMERIC" property="codPais" />
    <result column="COD_DEPARTAMENTO" jdbcType="NUMERIC" property="codDepartamento" />
    <result column="COD_MUNICIPIO" jdbcType="NUMERIC" property="codMunicipio" />
    <result column="COD_JORNADA_LABORAL" jdbcType="NUMERIC" property="codJornadaLaboral" />
    <result column="COD_MOTIVO_RETIRO" jdbcType="NUMERIC" property="codMotivoRetiro" />
    <result column="COD_TIPO_ENTIDAD" jdbcType="NUMERIC" property="codTipoEntidad" />
    <result column="FLG_ENTIDAD_PUBLICA" jdbcType="NUMERIC" property="flgEntidadPublica" />
    <result column="INDICATIVO_TELEFONO" jdbcType="VARCHAR" property="indicativoTelefono" />
    <result column="NOMBRE_ENTIDAD" jdbcType="VARCHAR" property="nombreEntidad" />
    <result column="DIRECCION_ENTIDAD" jdbcType="VARCHAR" property="direccionEntidad" />
    <result column="TELEFONO" jdbcType="VARCHAR" property="telefono" />
    <result column="DEPENDENCIA" jdbcType="VARCHAR" property="dependencia" />
    <result column="CARGO" jdbcType="VARCHAR" property="cargo" />
    <result column="FLG_ACTIVO_ENTIDAD" jdbcType="NUMERIC" property="flgActivoEntidad" />
    <result column="FECHA_INGRESO" jdbcType="TIMESTAMP" property="fechaIngreso" />
    <result column="FECHA_RETIRO" jdbcType="TIMESTAMP" property="fechaRetiro" />
    <result column="HORAS_PROMEDIO_MES" jdbcType="NUMERIC" property="horasPromedioMes" />
    <result column="URL_DOCUMENTO_SOPORTE" jdbcType="VARCHAR" property="urlDocumentoSoporte" />
    <result column="NOMBRE_JEFE" jdbcType="VARCHAR" property="nombreJefe" />
    <result column="FLG_VALIDA_JEFE" jdbcType="NUMERIC" property="flgValidaJefe" />
    <result column="COD_USAURIO_VALIDA" jdbcType="NUMERIC" property="codUsaurioValida" />
    <result column="FECHA_VALIDACION" jdbcType="TIMESTAMP" property="fechaValidacion" />
    <result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
    <result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
    <result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
    <result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />
    <result column="JUSTIFICACION_ACTUALIZACION" jdbcType="VARCHAR" property="justificacionActualizacion" />
    <result column="FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="fechaActualizacion" />
    <result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
    <result column="COD_ENTIDAD" jdbcType="NUMERIC" property="codEntidad" />
    <result column="COD_CARGO" jdbcType="NUMERIC" property="codCargo" />
    <result column="COD_DEPENDENCIA_HV" jdbcType="NUMERIC" property="codDependenciaHV" />
	<result column="COD_CARGO_HV" jdbcType="NUMERIC" property="codCargoHV" />
	<result column="COD_NIVEL_JERARQUICO_HV" jdbcType="NUMERIC" property="codNivelJerarquicoHV" />
     
     <result column="NOMBRE_PAIS" jdbcType="VARCHAR" property="nombrePais" />
     <result column="NOMBRE_DEPARTAMENTO" jdbcType="VARCHAR" property="nombreDepartamento" />
     <result column="NOMBRE_MUNICIPIO" jdbcType="VARCHAR" property="nombreMunicipio" />
     <result column="NOMBRE_ENTIDAD_EXT" jdbcType="VARCHAR" property="nombreEntidadExt" />
     <result column="TIPO_ENTIDAD" jdbcType="VARCHAR" property="tipoEntidad" />
     <result column="DESCRIPCION_LAB" jdbcType="VARCHAR" property="descripcionLab" />
     <result column="DESCRIPCION_RET" jdbcType="VARCHAR" property="descripcionRet" />
     <result column="DESCRIPCION_ENT" jdbcType="VARCHAR" property="descripcionEnt" />
     <result column="DIFERENCIA_DIAS" jdbcType="NUMERIC" property="diferenciaDias" />
     <result column="TOTAL" jdbcType="NUMERIC" property="total" />
    
    <result column="COD_GRADO" jdbcType="NUMERIC" property="codGrado" />
    <result column="COD_NIVEL_CARGO" jdbcType="NUMERIC" property="codNivelCargo" />
    <result column="COD_DENOMINACION" jdbcType="NUMERIC" property="codDenominacion" />
    <result column="NOMBRE_CARGO_PRIV" jdbcType="VARCHAR" property="nombreCargoPriv" />
    <result column="NOMBRE_DEPENDENCIA" jdbcType="VARCHAR" property="nombreDependencia" />
    <result column="NOMBRE_CARGO" jdbcType="VARCHAR" property="nombreCargo" />
    <result column="FLG_CONTRATISTA" jdbcType="NUMERIC" property="flgContratista" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    COD_EXPERIENCIA_PROFESIONAL, COD_PERSONA, COD_PAIS, COD_DEPARTAMENTO, COD_MUNICIPIO, 
    COD_JORNADA_LABORAL, COD_MOTIVO_RETIRO, COD_TIPO_ENTIDAD, FLG_ENTIDAD_PUBLICA, INDICATIVO_TELEFONO, 
    NOMBRE_ENTIDAD, DIRECCION_ENTIDAD, TELEFONO, DEPENDENCIA, CARGO, FLG_ACTIVO_ENTIDAD, 
    FECHA_INGRESO, FECHA_RETIRO, HORAS_PROMEDIO_MES, URL_DOCUMENTO_SOPORTE, NOMBRE_JEFE, 
    FLG_VALIDA_JEFE, COD_USAURIO_VALIDA, FECHA_VALIDACION, AUD_FECHA_ACTUALIZACION, AUD_COD_USUARIO, 
    AUD_COD_ROL, AUD_ACCION, JUSTIFICACION_ACTUALIZACION, FECHA_ACTUALIZACION, FLG_ACTIVO, 
    COD_ENTIDAD, COD_CARGO,COD_DEPENDENCIA_HV, COD_CARGO_HV, COD_NIVEL_JERARQUICO_HV
  </sql>
  <select id="selectByExample" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesionalExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from EXPERIENCIA_PROFESIONAL
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectExperiaciaById" parameterType="java.lang.Long" resultMap="BaseResultMapExt">
   select 
		exp.*, 
		p.NOMBRE_PAIS, 
		d.NOMBRE_DEPARTAMENTO, 
		m.NOMBRE_MUNICIPIO,
		jlab.DESCRIPCION as DESCRIPCION_LAB, 
		mret.DESCRIPCION as DESCRIPCION_RET, 
		tent.DESCRIPCION as DESCRIPCION_ENT
		from experiencia_profesional exp
		left join pais p on p.COD_PAIS = exp.COD_PAIS
		left join departamento d on d.COD_DEPARTAMENTO = exp.COD_DEPARTAMENTO
		left join municipio m on m.COD_MUNICIPIO = exp.COD_MUNICIPIO
		left join V_JORNADA_LABORAL jlab on jlab.JORNADA_LABORAL_ID = exp.COD_JORNADA_LABORAL
		left join V_MOTIVO_RETIRO mret on mret.MOTIVO_RETIRO_ID = exp.COD_MOTIVO_RETIRO
		left join V_TIPO_ENTIDAD tent on tent.TIPO_ENTIDAD_ID = exp.COD_TIPO_ENTIDAD
		where cod_experiencia_profesional = #{codExperienciaProfesional,jdbcType=NUMERIC}
		OFFSET 0 ROWS FETCH NEXT 1 ROWS ONLY
  </select>
  <select id="selectExperiaciaOP" parameterType="java.lang.Long" resultMap="BaseResultMapExt">
   select EXP.COD_EXPERIENCIA_PROFESIONAL,
		EXP.DEPENDENCIA, EXP.CARGO, EXP.COD_CARGO, EXP.FLG_ACTIVO_ENTIDAD, EXP.FECHA_INGRESO, EXP.FECHA_RETIRO, EXP.HORAS_PROMEDIO_MES, EXP.NOMBRE_JEFE,
		p.NOMBRE_PAIS,
		d.NOMBRE_DEPARTAMENTO,
		m.NOMBRE_MUNICIPIO,
		jlab.DESCRIPCION as DESCRIPCION_LAB,
		mret.DESCRIPCION as DESCRIPCION_RET,
		tent.DESCRIPCION as DESCRIPCION_ENT
		from experiencia_profesional EXP
		left join pais p on p.COD_PAIS = exp.COD_PAIS
		left join departamento d on d.COD_DEPARTAMENTO = exp.COD_DEPARTAMENTO
		left join municipio m on m.COD_MUNICIPIO = exp.COD_MUNICIPIO
		left join V_JORNADA_LABORAL jlab on jlab.JORNADA_LABORAL_ID = exp.COD_JORNADA_LABORAL
		left join V_MOTIVO_RETIRO mret on mret.MOTIVO_RETIRO_ID = exp.COD_MOTIVO_RETIRO
		left join V_TIPO_ENTIDAD tent on tent.TIPO_ENTIDAD_ID = exp.COD_TIPO_ENTIDAD
		where EXP.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
  </select>
  
  <select id="selectExperiaciaByPersona" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional" resultMap="BaseResultMapExt">
		SELECT DISTINCT 
			count(*) over() TOTAL, EP.COD_EXPERIENCIA_PROFESIONAL,
			 CASE
    			WHEN EP.NOMBRE_ENTIDAD IS NULL THEN 
    			      E.NOMBRE_ENTIDAD
    			ELSE 
    				EP.NOMBRE_ENTIDAD
    		 END AS NOMBRE_ENTIDAD,
			EP.COD_ENTIDAD,EP.FLG_ENTIDAD_PUBLICA 
			FROM EXPERIENCIA_PROFESIONAL EP 
			LEFT JOIN ENTIDAD E ON EP.COD_ENTIDAD = E.COD_ENTIDAD
			WHERE EP.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
			<if test="flgActivo != null">
      		 AND EP.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
    		    </if>
			AND EP.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}

		OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
		
  </select>
   <select id="selectCargoExprofePersona" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional" resultMap="BaseResultMapExt">
    select 
        distinct
        count(*) over() TOTAL,
        FLG_ENTIDAD_PUBLICA,
		cargo, nombre_entidad
		from experiencia_profesional 
		where cod_persona = #{codPersona,jdbcType=NUMERIC}
		<if test="flgActivo != null">
		   and FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
		 </if>
	  <if test="nombreEntidad != null">
			AND UPPER(NOMBRE_ENTIDAD) LIKE '%'|| UPPER(#{nombreEntidad,jdbcType=VARCHAR})||'%' 
	  </if>		 
		 OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  <select id="selectByPersona" parameterType="java.lang.Long" resultMap="BaseResultMapExt">
    select SUM(TRUNC((NVL(ep.FECHA_RETIRO+1, SYSDATE+1 ) - ep.FECHA_INGRESO))) DIFERENCIA_DIAS
    from EXPERIENCIA_PROFESIONAL ep 
	    where eP.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
	    AND ep.flg_activo = 1
  </select>
  
  <select id="selectCargo"  parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional" resultMap="BaseResultMapExt">
    SELECT  DISTINCT
     count(*) over() TOTAL,
     CARGO
	FROM EXPERIENCIA_PROFESIONAL WHERE CARGO is not null
	<if test="flgActivo != null">
	AND FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
	</if>
       OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  
  <select id="selectCargoPublic"  resultMap="BaseResultMapExt">
		select distinct exp.cargo 
		from EXPERIENCIA_PROFESIONAL exp 
		where exp.cargo is not null 
		and exp.COD_TIPO_ENTIDAD = 142
		and exp.FLG_ACTIVO=1
		union 
		select distinct c.NOMBRE_CARGO 
		from CARGO c
  </select>
  
  <select id="selectCargoEntidadPersona" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional" resultMap="BaseResultMapExt">
   select 
    	ep.*,
	    (SELECT NOMBRE_PAIS FROM PAIS WHERE COD_PAIS = ep.COD_PAIS) NOMBRE_PAIS ,
		(SELECT NOMBRE_DEPARTAMENTO FROM DEPARTAMENTO WHERE COD_DEPARTAMENTO = ep.COD_DEPARTAMENTO) NOMBRE_DEPARTAMENTO,
		(SELECT NOMBRE_MUNICIPIO FROM MUNICIPIO WHERE COD_MUNICIPIO = ep.COD_MUNICIPIO) NOMBRE_MUNICIPIO,
		(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = ep.COD_JORNADA_LABORAL) DESCRIPCION_LAB,
		(SELECT NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA = ep.COD_MOTIVO_RETIRO) DESCRIPCION_RET,
	    vte.descripcion as TIPO_ENTIDAD,
	    case when (ep.cod_entidad is null and ep.cod_tipo_entidad != 142) then ep.NOMBRE_ENTIDAD else e.NOMBRE_ENTIDAD end NOMBRE_ENTIDAD_EXT,
	    (SELECT dhv.NOMBRE_DEPENDENCIA FROM DEPENDENCIA_HOJA_VIDA dhv where dhv.cod_dependencia_hoja_vida = ep.cod_dependencia_hv ) nombre_dependencia,
	    (SELECT chv.NOMBRE_CARGO FROM CARGO_HOJA_VIDA chv where chv.cod_cargo_hoja_vida = ep.cod_cargo_hv ) nombre_cargo
	from experiencia_profesional ep 
    left join v_tipo_entidad vte on vte.tipo_entidad_id =  ep.cod_tipo_entidad
    left join entidad e on e.COD_ENTIDAD =  ep.cod_entidad
    where ep.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
    	and ep.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
    order by ep.FECHA_RETIRO DESC    
  </select>
  
    <select id="selectExperienciaCalculo" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional" resultMap="BaseResultMapExt">
       select  distinct ep.fecha_ingreso, ep.fecha_retiro, ep.cod_jornada_laboral,
        ep.horas_promedio_mes, e.cod_tipo_entidad
	from experiencia_profesional ep 
    left join v_tipo_entidad vte on vte.tipo_entidad_id =  ep.cod_tipo_entidad
    left join entidad e on e.COD_ENTIDAD =  ep.cod_entidad
    where ep.COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
    	and ep.FLG_ACTIVO = 1
    order by ep.FECHA_RETIRO DESC
  </select>
  
  <select id="selectEmpleoActual" parameterType="co.gov.dafp.sigep2.bean.ext.ExperienciaProfesionalExt" resultMap="BaseResultMapExt">
	  SELECT ep.*,
	       (SELECT nombre_pais FROM pais WHERE cod_pais = ep.cod_pais) AS nombre_pais,
	       (SELECT nombre_departamento FROM departamento WHERE cod_departamento = ep.cod_departamento) AS nombre_departamento,
	       (SELECT nombre_municipio FROM municipio WHERE cod_municipio = ep.cod_municipio) AS nombre_municipio,
	       (SELECT nombre_parametro FROM parametrica WHERE cod_tabla_parametrica = ep.cod_jornada_laboral) AS descripcion_lab,
	       (SELECT nombre_parametro FROM parametrica WHERE cod_tabla_parametrica = ep.cod_motivo_retiro) AS descripcion_ret,
	       vte.descripcion AS tipo_entidad,
	       ent.nombre_entidad AS nombre_entidad_ext
	FROM experiencia_profesional ep
	LEFT JOIN v_tipo_entidad vte ON vte.tipo_entidad_id = ep.cod_tipo_entidad
	LEFT JOIN entidad ent ON ep.cod_entidad = ent.cod_entidad
	WHERE 1=1 
	  and ep.fecha_retiro IS NULL
	  AND ep.cod_persona = #{codPersona, jdbcType=NUMERIC}
	  AND ep.flg_activo = #{flgActivo, jdbcType=NUMERIC}
	ORDER BY cod_experiencia_profesional ASC
  </select>
  
  <select id="selectEmpleosAnteriores" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional" resultMap="BaseResultMapExt">
	  SELECT ep.*,
	       (SELECT nombre_pais FROM pais WHERE cod_pais = ep.cod_pais) AS nombre_pais,
	       (SELECT nombre_departamento FROM departamento WHERE cod_departamento = ep.cod_departamento) AS nombre_departamento,
	       (SELECT nombre_municipio FROM municipio WHERE cod_municipio = ep.cod_municipio) AS nombre_municipio,
	       (SELECT nombre_parametro FROM parametrica WHERE cod_tabla_parametrica = ep.cod_jornada_laboral) AS descripcion_lab,
	       (SELECT nombre_parametro FROM parametrica WHERE cod_tabla_parametrica = ep.cod_motivo_retiro) AS descripcion_ret,
	       vte.descripcion AS tipo_entidad,
	       ent.nombre_entidad AS NOMBRE_ENTIDAD
	FROM experiencia_profesional ep
	LEFT JOIN v_tipo_entidad vte ON vte.tipo_entidad_id = ep.cod_tipo_entidad
	LEFT JOIN entidad ent ON ep.cod_entidad = ent.cod_entidad
	WHERE fecha_retiro IS NOT NULL
	  AND cod_persona = #{codPersona, jdbcType=NUMERIC}
	  AND ep.flg_activo = #{flgActivo, jdbcType=NUMERIC}
	ORDER BY cod_experiencia_profesional ASC
  </select>
  
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from EXPERIENCIA_PROFESIONAL
    where COD_EXPERIENCIA_PROFESIONAL = #{codExperienciaProfesional,jdbcType=NUMERIC}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    delete from EXPERIENCIA_PROFESIONAL
    where COD_EXPERIENCIA_PROFESIONAL = #{codExperienciaProfesional,jdbcType=NUMERIC}
  </delete>
  <delete id="deleteByExample" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesionalExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    delete from EXPERIENCIA_PROFESIONAL
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    insert into EXPERIENCIA_PROFESIONAL (COD_PERSONA, 
      COD_PAIS, COD_DEPARTAMENTO, COD_MUNICIPIO, 
      COD_JORNADA_LABORAL, COD_MOTIVO_RETIRO, COD_TIPO_ENTIDAD, 
      FLG_ENTIDAD_PUBLICA, INDICATIVO_TELEFONO, 
      NOMBRE_ENTIDAD, DIRECCION_ENTIDAD, TELEFONO, 
      DEPENDENCIA, CARGO, FLG_ACTIVO_ENTIDAD, 
      FECHA_INGRESO, FECHA_RETIRO, HORAS_PROMEDIO_MES, 
      URL_DOCUMENTO_SOPORTE, NOMBRE_JEFE, FLG_VALIDA_JEFE, 
      COD_USAURIO_VALIDA, FECHA_VALIDACION, AUD_FECHA_ACTUALIZACION, 
      AUD_COD_USUARIO, AUD_COD_ROL, AUD_ACCION, 
      JUSTIFICACION_ACTUALIZACION, FECHA_ACTUALIZACION, 
      FLG_ACTIVO, COD_ENTIDAD, COD_CARGO, COD_DEPENDENCIA_HV, COD_CARGO_HV, COD_NIVEL_JERARQUICO_HV)
    values (#{codPersona,jdbcType=NUMERIC}, 
      #{codPais,jdbcType=NUMERIC}, #{codDepartamento,jdbcType=NUMERIC}, #{codMunicipio,jdbcType=NUMERIC}, 
      #{codJornadaLaboral,jdbcType=NUMERIC}, #{codMotivoRetiro,jdbcType=NUMERIC}, #{codTipoEntidad,jdbcType=NUMERIC}, 
      #{flgEntidadPublica,jdbcType=NUMERIC}, #{indicativoTelefono,jdbcType=VARCHAR}, 
      #{nombreEntidad,jdbcType=VARCHAR}, #{direccionEntidad,jdbcType=VARCHAR}, #{telefono,jdbcType=VARCHAR}, 
      #{dependencia,jdbcType=VARCHAR}, #{cargo,jdbcType=VARCHAR}, #{flgActivoEntidad,jdbcType=NUMERIC}, 
      #{fechaIngreso,jdbcType=TIMESTAMP}, #{fechaRetiro,jdbcType=TIMESTAMP}, #{horasPromedioMes,jdbcType=NUMERIC}, 
      #{urlDocumentoSoporte,jdbcType=VARCHAR}, #{nombreJefe,jdbcType=VARCHAR}, #{flgValidaJefe,jdbcType=NUMERIC}, 
      #{codUsaurioValida,jdbcType=NUMERIC}, #{fechaValidacion,jdbcType=TIMESTAMP}, #{audFechaActualizacion,jdbcType=TIMESTAMP}, 
      #{audCodUsuario,jdbcType=NUMERIC}, #{audCodRol,jdbcType=NUMERIC}, #{audAccion,jdbcType=NUMERIC}, 
      #{justificacionActualizacion,jdbcType=VARCHAR}, #{fechaActualizacion,jdbcType=TIMESTAMP}, 
      #{flgActivo,jdbcType=NUMERIC}, #{codEntidad,jdbcType=NUMERIC}, #{codCargo,jdbcType=NUMERIC}, 
      #{codDependenciaHV,jdbcType=NUMERIC}, #{codCargoHV,jdbcType=NUMERIC}, #{codNivelJerarquicoHV,jdbcType=NUMERIC})
  </insert>
  <insert id="insertSelective" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    insert into EXPERIENCIA_PROFESIONAL
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="codExperienciaProfesional != null">
        COD_EXPERIENCIA_PROFESIONAL,
      </if>
      <if test="codPersona != null">
        COD_PERSONA,
      </if>
      <if test="codPais != null">
        COD_PAIS,
      </if>
      <if test="codDepartamento != null">
        COD_DEPARTAMENTO,
      </if>
      <if test="codMunicipio != null">
        COD_MUNICIPIO,
      </if>
      <if test="codJornadaLaboral != null">
        COD_JORNADA_LABORAL,
      </if>
      <if test="codMotivoRetiro != null">
        COD_MOTIVO_RETIRO,
      </if>
      <if test="codTipoEntidad != null">
        COD_TIPO_ENTIDAD,
      </if>
      <if test="flgEntidadPublica != null">
        FLG_ENTIDAD_PUBLICA,
      </if>
      <if test="indicativoTelefono != null">
        INDICATIVO_TELEFONO,
      </if>
      <if test="nombreEntidad != null">
        NOMBRE_ENTIDAD,
      </if>
      <if test="direccionEntidad != null">
        DIRECCION_ENTIDAD,
      </if>
      <if test="telefono != null">
        TELEFONO,
      </if>
      <if test="dependencia != null">
        DEPENDENCIA,
      </if>
      <if test="cargo != null">
        CARGO,
      </if>
      <if test="flgActivoEntidad != null">
        FLG_ACTIVO_ENTIDAD,
      </if>
      <if test="fechaIngreso != null">
        FECHA_INGRESO,
      </if>
      <if test="fechaRetiro != null">
        FECHA_RETIRO,
      </if>
      <if test="horasPromedioMes != null">
        HORAS_PROMEDIO_MES,
      </if>
      <if test="urlDocumentoSoporte != null">
        URL_DOCUMENTO_SOPORTE,
      </if>
      <if test="nombreJefe != null">
        NOMBRE_JEFE,
      </if>
      <if test="flgValidaJefe != null">
        FLG_VALIDA_JEFE,
      </if>
      <if test="codUsaurioValida != null">
        COD_USAURIO_VALIDA,
      </if>
      <if test="fechaValidacion != null">
        FECHA_VALIDACION,
      </if>
      <if test="audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION,
      </if>
      <if test="audCodUsuario != null">
        AUD_COD_USUARIO,
      </if>
      <if test="audCodRol != null">
        AUD_COD_ROL,
      </if>
      <if test="audAccion != null">
        AUD_ACCION,
      </if>
      <if test="justificacionActualizacion != null">
        JUSTIFICACION_ACTUALIZACION,
      </if>
      <if test="fechaActualizacion != null">
        FECHA_ACTUALIZACION,
      </if>
      <if test="flgActivo != null">
        FLG_ACTIVO,
      </if>
      <if test="codEntidad != null">
        COD_ENTIDAD,
      </if>
      <if test="codCargo != null">
        COD_CARGO,
      </if>
      <if test="codDependenciaHV != null">
        COD_DEPENDENCIA_HV,
      </if>
      <if test="codCargoHV != null">
        COD_CARGO_HV,
      </if>
      <if test="codNivelJerarquicoHV != null">
        COD_NIVEL_JERARQUICO_HV,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="codExperienciaProfesional != null">
        #{codExperienciaProfesional,jdbcType=NUMERIC},
      </if>
      <if test="codPersona != null">
        #{codPersona,jdbcType=NUMERIC},
      </if>
      <if test="codPais != null">
        #{codPais,jdbcType=NUMERIC},
      </if>
      <if test="codDepartamento != null">
        #{codDepartamento,jdbcType=NUMERIC},
      </if>
      <if test="codMunicipio != null">
        #{codMunicipio,jdbcType=NUMERIC},
      </if>
      <if test="codJornadaLaboral != null">
        #{codJornadaLaboral,jdbcType=NUMERIC},
      </if>
      <if test="codMotivoRetiro != null">
        #{codMotivoRetiro,jdbcType=NUMERIC},
      </if>
      <if test="codTipoEntidad != null">
        #{codTipoEntidad,jdbcType=NUMERIC},
      </if>
      <if test="flgEntidadPublica != null">
        #{flgEntidadPublica,jdbcType=NUMERIC},
      </if>
      <if test="indicativoTelefono != null">
        #{indicativoTelefono,jdbcType=VARCHAR},
      </if>
      <if test="nombreEntidad != null">
        #{nombreEntidad,jdbcType=VARCHAR},
      </if>
      <if test="direccionEntidad != null">
        #{direccionEntidad,jdbcType=VARCHAR},
      </if>
      <if test="telefono != null">
        #{telefono,jdbcType=VARCHAR},
      </if>
      <if test="dependencia != null">
        #{dependencia,jdbcType=VARCHAR},
      </if>
      <if test="cargo != null">
        #{cargo,jdbcType=VARCHAR},
      </if>
      <if test="flgActivoEntidad != null">
        #{flgActivoEntidad,jdbcType=NUMERIC},
      </if>
      <if test="fechaIngreso != null">
        #{fechaIngreso,jdbcType=TIMESTAMP},
      </if>
      <if test="fechaRetiro != null">
        #{fechaRetiro,jdbcType=TIMESTAMP},
      </if>
      <if test="horasPromedioMes != null">
        #{horasPromedioMes,jdbcType=NUMERIC},
      </if>
      <if test="urlDocumentoSoporte != null">
        #{urlDocumentoSoporte,jdbcType=VARCHAR},
      </if>
      <if test="nombreJefe != null">
        #{nombreJefe,jdbcType=VARCHAR},
      </if>
      <if test="flgValidaJefe != null">
        #{flgValidaJefe,jdbcType=NUMERIC},
      </if>
      <if test="codUsaurioValida != null">
        #{codUsaurioValida,jdbcType=NUMERIC},
      </if>
      <if test="fechaValidacion != null">
        #{fechaValidacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audFechaActualizacion != null">
        #{audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audCodUsuario != null">
        #{audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="audCodRol != null">
        #{audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="audAccion != null">
        #{audAccion,jdbcType=NUMERIC},
      </if>
      <if test="justificacionActualizacion != null">
        #{justificacionActualizacion,jdbcType=VARCHAR},
      </if>
      <if test="fechaActualizacion != null">
        #{fechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="flgActivo != null">
        #{flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="codEntidad != null">
        #{codEntidad,jdbcType=NUMERIC},
      </if>
      <if test="codCargo != null">
        #{codCargo,jdbcType=NUMERIC},
      </if>
      <if test="codDependenciaHV != null">
        #{codDependenciaHV,jdbcType=NUMERIC},
      </if>
       <if test="codCargoHV != null">
        #{codCargoHV,jdbcType=NUMERIC},
      </if>
      <if test="codNivelJerarquicoHV != null">
        #{codNivelJerarquicoHV,jdbcType=NUMERIC},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesionalExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    select count(*) from EXPERIENCIA_PROFESIONAL
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    update EXPERIENCIA_PROFESIONAL
    <set>
      <if test="record.codExperienciaProfesional != null">
        COD_EXPERIENCIA_PROFESIONAL = #{record.codExperienciaProfesional,jdbcType=NUMERIC},
      </if>
      <if test="record.codPersona != null">
        COD_PERSONA = #{record.codPersona,jdbcType=NUMERIC},
      </if>
      <if test="record.codPais != null">
        COD_PAIS = #{record.codPais,jdbcType=NUMERIC},
      </if>
      <if test="record.codDepartamento != null">
        COD_DEPARTAMENTO = #{record.codDepartamento,jdbcType=NUMERIC},
      </if>
      <if test="record.codMunicipio != null">
        COD_MUNICIPIO = #{record.codMunicipio,jdbcType=NUMERIC},
      </if>
      <if test="record.codJornadaLaboral != null">
        COD_JORNADA_LABORAL = #{record.codJornadaLaboral,jdbcType=NUMERIC},
      </if>
      <if test="record.codMotivoRetiro != null">
        COD_MOTIVO_RETIRO = #{record.codMotivoRetiro,jdbcType=NUMERIC},
      </if>
      <if test="record.codTipoEntidad != null">
        COD_TIPO_ENTIDAD = #{record.codTipoEntidad,jdbcType=NUMERIC},
      </if>
      <if test="record.flgEntidadPublica != null">
        FLG_ENTIDAD_PUBLICA = #{record.flgEntidadPublica,jdbcType=NUMERIC},
      </if>
      <if test="record.indicativoTelefono != null">
        INDICATIVO_TELEFONO = #{record.indicativoTelefono,jdbcType=VARCHAR},
      </if>
      <if test="record.nombreEntidad != null">
        NOMBRE_ENTIDAD = #{record.nombreEntidad,jdbcType=VARCHAR},
      </if>
      <if test="record.direccionEntidad != null">
        DIRECCION_ENTIDAD = #{record.direccionEntidad,jdbcType=VARCHAR},
      </if>
      <if test="record.telefono != null">
        TELEFONO = #{record.telefono,jdbcType=VARCHAR},
      </if>
      <if test="record.dependencia != null">
        DEPENDENCIA = #{record.dependencia,jdbcType=VARCHAR},
      </if>
      <if test="record.cargo != null">
        CARGO = #{record.cargo,jdbcType=VARCHAR},
      </if>
      <if test="record.flgActivoEntidad != null">
        FLG_ACTIVO_ENTIDAD = #{record.flgActivoEntidad,jdbcType=NUMERIC},
      </if>
      <if test="record.fechaIngreso != null">
        FECHA_INGRESO = #{record.fechaIngreso,jdbcType=TIMESTAMP},
      </if>
      <if test="record.fechaRetiro != null">
        FECHA_RETIRO = #{record.fechaRetiro,jdbcType=TIMESTAMP},
      </if>
      <if test="record.horasPromedioMes != null">
        HORAS_PROMEDIO_MES = #{record.horasPromedioMes,jdbcType=NUMERIC},
      </if>
      <if test="record.urlDocumentoSoporte != null">
        URL_DOCUMENTO_SOPORTE = #{record.urlDocumentoSoporte,jdbcType=VARCHAR},
      </if>
      <if test="record.nombreJefe != null">
        NOMBRE_JEFE = #{record.nombreJefe,jdbcType=VARCHAR},
      </if>
      <if test="record.flgValidaJefe != null">
        FLG_VALIDA_JEFE = #{record.flgValidaJefe,jdbcType=NUMERIC},
      </if>
      <if test="record.codUsaurioValida != null">
        COD_USAURIO_VALIDA = #{record.codUsaurioValida,jdbcType=NUMERIC},
      </if>
      <if test="record.fechaValidacion != null">
        FECHA_VALIDACION = #{record.fechaValidacion,jdbcType=TIMESTAMP},
      </if>
      <if test="record.audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION = #{record.audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="record.audCodUsuario != null">
        AUD_COD_USUARIO = #{record.audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="record.audCodRol != null">
        AUD_COD_ROL = #{record.audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="record.audAccion != null">
        AUD_ACCION = #{record.audAccion,jdbcType=NUMERIC},
      </if>
      <if test="record.justificacionActualizacion != null">
        JUSTIFICACION_ACTUALIZACION = #{record.justificacionActualizacion,jdbcType=VARCHAR},
      </if>
      <if test="record.fechaActualizacion != null">
        FECHA_ACTUALIZACION = #{record.fechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="record.flgActivo != null">
        FLG_ACTIVO = #{record.flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="record.codEntidad != null">
        COD_ENTIDAD = #{record.codEntidad,jdbcType=NUMERIC},
      </if>
      <if test="record.codCargo != null">
        COD_CARGO = #{record.codCargo,jdbcType=NUMERIC},
      </if>
       <if test="record.codDependenciaHV != null">
        COD_DEPENDENCIA_HV = #{record.codDependenciaHV,jdbcType=NUMERIC},
      </if>
      <if test="record.codCargoHV != null">
        COD_CARGO_HV = #{record.codCargoHV,jdbcType=NUMERIC},
      </if>
      <if test="record.codNivelJerarquicoHV != null">
        COD_NIVEL_JERARQUICO_HV = #{record.codNivelJerarquicoHV,jdbcType=NUMERIC},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    update EXPERIENCIA_PROFESIONAL
    set COD_EXPERIENCIA_PROFESIONAL = #{record.codExperienciaProfesional,jdbcType=NUMERIC},
      COD_PERSONA = #{record.codPersona,jdbcType=NUMERIC},
      COD_PAIS = #{record.codPais,jdbcType=NUMERIC},
      COD_DEPARTAMENTO = #{record.codDepartamento,jdbcType=NUMERIC},
      COD_MUNICIPIO = #{record.codMunicipio,jdbcType=NUMERIC},
      COD_JORNADA_LABORAL = #{record.codJornadaLaboral,jdbcType=NUMERIC},
      COD_MOTIVO_RETIRO = #{record.codMotivoRetiro,jdbcType=NUMERIC},
      COD_TIPO_ENTIDAD = #{record.codTipoEntidad,jdbcType=NUMERIC},
      FLG_ENTIDAD_PUBLICA = #{record.flgEntidadPublica,jdbcType=NUMERIC},
      INDICATIVO_TELEFONO = #{record.indicativoTelefono,jdbcType=VARCHAR},
      NOMBRE_ENTIDAD = #{record.nombreEntidad,jdbcType=VARCHAR},
      DIRECCION_ENTIDAD = #{record.direccionEntidad,jdbcType=VARCHAR},
      TELEFONO = #{record.telefono,jdbcType=VARCHAR},
      DEPENDENCIA = #{record.dependencia,jdbcType=VARCHAR},
      CARGO = #{record.cargo,jdbcType=VARCHAR},
      FLG_ACTIVO_ENTIDAD = #{record.flgActivoEntidad,jdbcType=NUMERIC},
      FECHA_INGRESO = #{record.fechaIngreso,jdbcType=TIMESTAMP},
      FECHA_RETIRO = #{record.fechaRetiro,jdbcType=TIMESTAMP},
      HORAS_PROMEDIO_MES = #{record.horasPromedioMes,jdbcType=NUMERIC},
      URL_DOCUMENTO_SOPORTE = #{record.urlDocumentoSoporte,jdbcType=VARCHAR},
      NOMBRE_JEFE = #{record.nombreJefe,jdbcType=VARCHAR},
      FLG_VALIDA_JEFE = #{record.flgValidaJefe,jdbcType=NUMERIC},
      COD_USAURIO_VALIDA = #{record.codUsaurioValida,jdbcType=NUMERIC},
      FECHA_VALIDACION = #{record.fechaValidacion,jdbcType=TIMESTAMP},
      AUD_FECHA_ACTUALIZACION = #{record.audFechaActualizacion,jdbcType=TIMESTAMP},
      AUD_COD_USUARIO = #{record.audCodUsuario,jdbcType=NUMERIC},
      AUD_COD_ROL = #{record.audCodRol,jdbcType=NUMERIC},
      AUD_ACCION = #{record.audAccion,jdbcType=NUMERIC},
      JUSTIFICACION_ACTUALIZACION = #{record.justificacionActualizacion,jdbcType=VARCHAR},
      FECHA_ACTUALIZACION = #{record.fechaActualizacion,jdbcType=TIMESTAMP},
      FLG_ACTIVO = #{record.flgActivo,jdbcType=NUMERIC},
      COD_ENTIDAD = #{record.codEntidad,jdbcType=NUMERIC},
      COD_CARGO = #{record.codCargo,jdbcType=NUMERIC},
      COD_DEPENDENCIA_HV = #{record.codDependenciaHV,jdbcType=NUMERIC},
      COD_CARGO_HV = #{record.codCargoHV,jdbcType=NUMERIC},
      COD_NIVEL_JERARQUICO_HV = #{record.codNivelJerarquicoHV,jdbcType=NUMERIC}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateExperienciaP" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    		UPDATE EXPERIENCIA_PROFESIONAL SET
		FLG_VALIDA_JEFE = 0, FECHA_VALIDACION = null, AUD_ACCION = 2, AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC}, AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC}, AUD_FECHA_ACTUALIZACION =  #{fechaActualizacion,jdbcType=TIMESTAMP}
		where COD_PERSONA = #{codPersona,jdbcType=NUMERIC}  AND FLG_ACTIVO = 1
  </update>
  <update id="updateExperienciaD" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    		UPDATE EXPERIENCIA_DOCENTE SET
		FLG_VERIFICADO = 0, FECHA_VERIFICACION = null, AUD_ACCION = 2, AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC}, AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC}, AUD_FECHA_ACTUALIZACION =  #{fechaActualizacion,jdbcType=TIMESTAMP}
		where COD_PERSONA = #{codPersona,jdbcType=NUMERIC} AND FLG_ACTIVO = 1
  </update>
  <update id="updateEducacionF" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    		UPDATE EDUCACION_FORMAL  SET
		FLG_VALIDADO_RRHH = 0, FECHA_VALIDACION_RRHH = null, AUD_ACCION = 2, AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC}, AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC}, AUD_FECHA_ACTUALIZACION =  #{fechaActualizacion,jdbcType=TIMESTAMP}
		WHERE COD_PERSONA = #{codPersona,jdbcType=NUMERIC} AND FLG_ACTIVO = 1
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    update EXPERIENCIA_PROFESIONAL
    <set>
      <if test="codPersona != null">
        COD_PERSONA = #{codPersona,jdbcType=NUMERIC},
      </if>
      <if test="codPais != null">
        COD_PAIS = #{codPais,jdbcType=NUMERIC},
      </if>
      <if test="codDepartamento != null">
        COD_DEPARTAMENTO = #{codDepartamento,jdbcType=NUMERIC},
      </if>
      <if test="codMunicipio != null">
        COD_MUNICIPIO = #{codMunicipio,jdbcType=NUMERIC},
      </if>
      <if test="codJornadaLaboral != null">
        COD_JORNADA_LABORAL = #{codJornadaLaboral,jdbcType=NUMERIC},
      </if>
      <if test="codMotivoRetiro != null">
        COD_MOTIVO_RETIRO = #{codMotivoRetiro,jdbcType=NUMERIC},
      </if>
      <if test="codTipoEntidad != null">
        COD_TIPO_ENTIDAD = #{codTipoEntidad,jdbcType=NUMERIC},
      </if>
      <if test="flgEntidadPublica != null">
        FLG_ENTIDAD_PUBLICA = #{flgEntidadPublica,jdbcType=NUMERIC},
      </if>
      <if test="indicativoTelefono != null">
        INDICATIVO_TELEFONO = #{indicativoTelefono,jdbcType=VARCHAR},
      </if>
      <if test="nombreEntidad != null">
        NOMBRE_ENTIDAD = #{nombreEntidad,jdbcType=VARCHAR},
      </if>
      <if test="direccionEntidad != null">
        DIRECCION_ENTIDAD = #{direccionEntidad,jdbcType=VARCHAR},
      </if>
      <if test="telefono != null">
        TELEFONO = #{telefono,jdbcType=VARCHAR},
      </if>
      <if test="dependencia != null">
        DEPENDENCIA = #{dependencia,jdbcType=VARCHAR},
      </if>
      <if test="cargo != null">
        CARGO = #{cargo,jdbcType=VARCHAR},
      </if>
      <if test="flgActivoEntidad != null">
        FLG_ACTIVO_ENTIDAD = #{flgActivoEntidad,jdbcType=NUMERIC},
      </if>
      <if test="fechaIngreso != null">
        FECHA_INGRESO = #{fechaIngreso,jdbcType=TIMESTAMP},
      </if>
      <if test="fechaRetiro != null">
        FECHA_RETIRO = #{fechaRetiro,jdbcType=TIMESTAMP},
      </if>
      <if test="horasPromedioMes != null">
        HORAS_PROMEDIO_MES = #{horasPromedioMes,jdbcType=NUMERIC},
      </if>
      <if test="urlDocumentoSoporte != null">
        URL_DOCUMENTO_SOPORTE = #{urlDocumentoSoporte,jdbcType=VARCHAR},
      </if>
      <if test="nombreJefe != null">
        NOMBRE_JEFE = #{nombreJefe,jdbcType=VARCHAR},
      </if>
      <if test="flgValidaJefe != null">
        FLG_VALIDA_JEFE = #{flgValidaJefe,jdbcType=NUMERIC},
      </if>
      <if test="codUsaurioValida != null">
        COD_USAURIO_VALIDA = #{codUsaurioValida,jdbcType=NUMERIC},
      </if>
      <if test="fechaValidacion != null">
        FECHA_VALIDACION = #{fechaValidacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION = #{audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audCodUsuario != null">
        AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="audCodRol != null">
        AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="audAccion != null">
        AUD_ACCION = #{audAccion,jdbcType=NUMERIC},
      </if>
      <if test="justificacionActualizacion != null">
        JUSTIFICACION_ACTUALIZACION = #{justificacionActualizacion,jdbcType=VARCHAR},
      </if>
      <if test="fechaActualizacion != null">
        FECHA_ACTUALIZACION = #{fechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="flgActivo != null">
        FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="codEntidad != null">
        COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC},
      </if>
      <if test="codCargo != null">
        COD_CARGO = #{codCargo,jdbcType=NUMERIC},
      </if>
      <if test="codDependenciaHV != null">
        COD_DEPENDENCIA_HV = #{codDependenciaHV,jdbcType=NUMERIC},
      </if>
      <if test="codCargoHV != null">
        COD_CARGO_HV = #{codCargoHV,jdbcType=NUMERIC},
      </if>
      <if test="codNivelJerarquicoHV != null">
        COD_NIVEL_JERARQUICO_HV = #{codNivelJerarquicoHV,jdbcType=NUMERIC},
      </if>
    </set>
    where COD_EXPERIENCIA_PROFESIONAL = #{codExperienciaProfesional,jdbcType=NUMERIC}
  </update>
  <update id="updateByPrimaryKey" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Feb 22 14:11:00 COT 2018.
    -->
    update EXPERIENCIA_PROFESIONAL
    set COD_PERSONA = #{codPersona,jdbcType=NUMERIC},
      COD_PAIS = #{codPais,jdbcType=NUMERIC},
      COD_DEPARTAMENTO = #{codDepartamento,jdbcType=NUMERIC},
      COD_MUNICIPIO = #{codMunicipio,jdbcType=NUMERIC},
      COD_JORNADA_LABORAL = #{codJornadaLaboral,jdbcType=NUMERIC},
      COD_MOTIVO_RETIRO = #{codMotivoRetiro,jdbcType=NUMERIC},
      COD_TIPO_ENTIDAD = #{codTipoEntidad,jdbcType=NUMERIC},
      FLG_ENTIDAD_PUBLICA = #{flgEntidadPublica,jdbcType=NUMERIC},
      INDICATIVO_TELEFONO = #{indicativoTelefono,jdbcType=VARCHAR},
      NOMBRE_ENTIDAD = #{nombreEntidad,jdbcType=VARCHAR},
      DIRECCION_ENTIDAD = #{direccionEntidad,jdbcType=VARCHAR},
      TELEFONO = #{telefono,jdbcType=VARCHAR},
      DEPENDENCIA = #{dependencia,jdbcType=VARCHAR},
      CARGO = #{cargo,jdbcType=VARCHAR},
      FLG_ACTIVO_ENTIDAD = #{flgActivoEntidad,jdbcType=NUMERIC},
      FECHA_INGRESO = #{fechaIngreso,jdbcType=TIMESTAMP},
      FECHA_RETIRO = #{fechaRetiro,jdbcType=TIMESTAMP},
      HORAS_PROMEDIO_MES = #{horasPromedioMes,jdbcType=NUMERIC},
      URL_DOCUMENTO_SOPORTE = #{urlDocumentoSoporte,jdbcType=VARCHAR},
      NOMBRE_JEFE = #{nombreJefe,jdbcType=VARCHAR},
      FLG_VALIDA_JEFE = #{flgValidaJefe,jdbcType=NUMERIC},
      COD_USAURIO_VALIDA = #{codUsaurioValida,jdbcType=NUMERIC},
      FECHA_VALIDACION = #{fechaValidacion,jdbcType=TIMESTAMP},
      AUD_FECHA_ACTUALIZACION = #{audFechaActualizacion,jdbcType=TIMESTAMP},
      AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC},
      AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC},
      AUD_ACCION = #{audAccion,jdbcType=NUMERIC},
      JUSTIFICACION_ACTUALIZACION = #{justificacionActualizacion,jdbcType=VARCHAR},
      FECHA_ACTUALIZACION = #{fechaActualizacion,jdbcType=TIMESTAMP},
      FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC},
      COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC},
      COD_CARGO = #{codCargo,jdbcType=NUMERIC},
      COD_DEPENDENCIA_HV = #{codDependenciaHV,jdbcType=NUMERIC},
      COD_CARGO_HV = #{codCargoHV,jdbcType=NUMERIC},
      COD_NIVEL_JERARQUICO_HV = #{codNivelJerarquicoHV,jdbcType=NUMERIC}
    where COD_EXPERIENCIA_PROFESIONAL = #{codExperienciaProfesional,jdbcType=NUMERIC}
  </update>
  <select id="selectbyFilter" parameterType="co.gov.dafp.sigep2.bean.ExperienciaProfesional" resultMap="BaseResultMapExt">
  		select 
		exp.*, 
		p.NOMBRE_PAIS, 
		d.NOMBRE_DEPARTAMENTO, 
		m.NOMBRE_MUNICIPIO,
		jlab.DESCRIPCION as DESCRIPCION_LAB, 
		mret.DESCRIPCION as DESCRIPCION_RET, 
		tent.DESCRIPCION as DESCRIPCION_ENT
		from experiencia_profesional exp
		left join pais p on p.COD_PAIS = exp.COD_PAIS
		left join departamento d on d.COD_DEPARTAMENTO = exp.COD_DEPARTAMENTO
		left join municipio m on m.COD_MUNICIPIO = exp.COD_MUNICIPIO
		left join V_JORNADA_LABORAL jlab on jlab.JORNADA_LABORAL_ID = exp.COD_JORNADA_LABORAL
		left join V_MOTIVO_RETIRO mret on mret.MOTIVO_RETIRO_ID = exp.COD_MOTIVO_RETIRO
		left join V_TIPO_ENTIDAD tent on tent.TIPO_ENTIDAD_ID = exp.COD_TIPO_ENTIDAD
		where 1 = 1
		  <if test="codPersona != null">
	        AND COD_PERSONA = #{codPersona,jdbcType=NUMERIC}
	      </if>
	      <if test="codPais != null">
	        AND COD_PAIS = #{codPais,jdbcType=NUMERIC}
	      </if>
	      <if test="codDepartamento != null">
	        AND COD_DEPARTAMENTO = #{codDepartamento,jdbcType=NUMERIC}
	      </if>
	      <if test="codMunicipio != null">
	        AND COD_MUNICIPIO = #{codMunicipio,jdbcType=NUMERIC}
	      </if>
	      <if test="codJornadaLaboral != null">
	        AND COD_JORNADA_LABORAL = #{codJornadaLaboral,jdbcType=NUMERIC}
	      </if>
	      <if test="codMotivoRetiro != null">
	        AND COD_MOTIVO_RETIRO = #{codMotivoRetiro,jdbcType=NUMERIC}
	      </if>
	      <if test="codTipoEntidad != null">
	        AND COD_TIPO_ENTIDAD = #{codTipoEntidad,jdbcType=NUMERIC}
	      </if>
	      <if test="flgEntidadPublica != null">
	        AND FLG_ENTIDAD_PUBLICA = #{flgEntidadPublica,jdbcType=NUMERIC}
	      </if>
	      <if test="indicativoTelefono != null">
	        AND INDICATIVO_TELEFONO = #{indicativoTelefono,jdbcType=VARCHAR}
	      </if>
	      <if test="nombreEntidad != null">
	        AND NOMBRE_ENTIDAD = #{nombreEntidad,jdbcType=VARCHAR}
	      </if>
	      <if test="direccionEntidad != null">
	        AND DIRECCION_ENTIDAD = #{direccionEntidad,jdbcType=VARCHAR}
	      </if>
	      <if test="telefono != null">
	        AND TELEFONO = #{telefono,jdbcType=VARCHAR}
	      </if>
	      <if test="dependencia != null">
	        AND DEPENDENCIA = #{dependencia,jdbcType=VARCHAR}
	      </if>
	      <if test="cargo != null">
	        AND CARGO = #{cargo,jdbcType=VARCHAR}
	      </if>
	      <if test="flgActivoEntidad != null">
	        AND FLG_ACTIVO_ENTIDAD = #{flgActivoEntidad,jdbcType=NUMERIC}
	      </if>
	      <if test="fechaIngreso != null">
	        AND FECHA_INGRESO = #{fechaIngreso,jdbcType=TIMESTAMP}
	      </if>
	      <if test="fechaRetiro != null">
	        AND FECHA_RETIRO = #{fechaRetiro,jdbcType=TIMESTAMP}
	      </if>
	      <if test="horasPromedioMes != null">
	        AND HORAS_PROMEDIO_MES = #{horasPromedioMes,jdbcType=NUMERIC}
	      </if>
	      <if test="urlDocumentoSoporte != null">
	        AND URL_DOCUMENTO_SOPORTE = #{urlDocumentoSoporte,jdbcType=VARCHAR}
	      </if>
	      <if test="nombreJefe != null">
	        AND NOMBRE_JEFE = #{nombreJefe,jdbcType=VARCHAR}
	      </if>
	      <if test="flgValidaJefe != null">
	        AND FLG_VALIDA_JEFE = #{flgValidaJefe,jdbcType=NUMERIC}
	      </if>
	      <if test="codUsaurioValida != null">
	        AND COD_USAURIO_VALIDA = #{codUsaurioValida,jdbcType=NUMERIC}
	      </if>
	      <if test="fechaValidacion != null">
	        AND FECHA_VALIDACION = #{fechaValidacion,jdbcType=TIMESTAMP}
	      </if>
	      <if test="audFechaActualizacion != null">
	        AND AUD_FECHA_ACTUALIZACION = #{audFechaActualizacion,jdbcType=TIMESTAMP}
	      </if>
	      <if test="audCodUsuario != null">
	        AND AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC}
	      </if>
	      <if test="audCodRol != null">
	        AND AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC}
	      </if>
	      <if test="audAccion != null">
	        AND AUD_ACCION = #{audAccion,jdbcType=NUMERIC}
	      </if>
	      <if test="justificacionActualizacion != null">
	        AND JUSTIFICACION_ACTUALIZACION = #{justificacionActualizacion,jdbcType=VARCHAR}
	      </if>
	      <if test="fechaActualizacion != null">
	        AND FECHA_ACTUALIZACION = #{fechaActualizacion,jdbcType=TIMESTAMP}
	      </if>
	      <if test="flgActivo != null">
	        AND EXP.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
	      </if>
	      <if test="codEntidad != null">
	        AND COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	      </if>
	      <if test="codCargo != null">
	        AND COD_CARGO = #{codCargo,jdbcType=NUMERIC}
	      </if>
  </select>
  <select id="selectEntidadPriv" parameterType="co.gov.dafp.sigep2.bean.ext.ExperienciaProfesionalExt" resultMap="BaseResultMapExt">
  		
	select distinct nombre_entidad NOMBRE_ENTIDAD from(
	        select UPPER(TRIM(ep.nombre_entidad))  nombre_entidad 
	        from experiencia_profesional ep
	        where ep.cod_tipo_entidad = #{codTipoEntidad,jdbcType=NUMERIC}
	        
	        union 
	        select UPPER(TRIM(nombre_entidad)) from entidad where cod_tipo_entidad = #{codTipoEntidad,jdbcType=NUMERIC}
	        ) e
		where 1 = 1
		<if test="nombreEntidad != null">
			AND translate(TRIM(upper(e.nombre_entidad)), '', 'aeiouAEIOU') LIKE '%'|| translate(TRIM(upper(#{nombreEntidad,jdbcType=VARCHAR})), '', 'aeiouAEIOU')||'%'
		</if>
		order by e.nombre_entidad asc
     	OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  
	<select id="selectDependenciasFilterLike" parameterType="co.gov.dafp.sigep2.bean.ext.ExperienciaProfesionalExt" resultMap="BaseResultMapExt">
	 		select distinct translate(TRIM(upper(DEPENDENCIA)), '', 'aeiouAEIOU') as DEPENDENCIA   
	 		from experiencia_profesional
		where flg_activo = 1
		<if test="strDependenciaLike != null">
			and   translate(TRIM(upper(DEPENDENCIA)), '', 'aeiouAEIOU') LIKE '%'|| translate(TRIM(upper(#{strDependenciaLike,jdbcType=VARCHAR})), '', 'aeiouAEIOU') ||'%'   
		</if>
		GROUP BY DEPENDENCIA
		order by DEPENDENCIA asc
		OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  	</select> 
  	
  <select id="selectCargosFilterLikeEntidadPublica"  resultMap="BaseResultMapExt">
		select cargo from (
        select distinct exp.cargo  cargo
		from EXPERIENCIA_PROFESIONAL exp 
		where exp.cargo is not null 
		and exp.COD_TIPO_ENTIDAD = 142
		and exp.FLG_ACTIVO=1
		union 
		select distinct c.NOMBRE_CARGO  cargo
		from CARGO c 
        where c.NOMBRE_CARGO is not null
        and c.FLG_ACTIVO=1
        ) cargos
        where  UPPER(cargos.cargo) LIKE '%'|| UPPER(#{strCargoLike,jdbcType=VARCHAR})||'%'
  </select>  	
  	 
  <select id="selectCargosFilterLikeEntidadPrivada" parameterType="co.gov.dafp.sigep2.bean.ext.ExperienciaProfesionalExt" resultMap="BaseResultMapExt">
	SELECT  DISTINCT count(*) over() TOTAL, CARGO
	FROM EXPERIENCIA_PROFESIONAL WHERE CARGO is not null AND FLG_ACTIVO = 1 and UPPER(CARGO) LIKE '%'|| UPPER(#{strCargoLike,jdbcType=VARCHAR})||'%'
		order by CARGO
       OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
  </select>
  
  
	<select id="selectExperienciaProfesionalYDocente" parameterType="co.gov.dafp.sigep2.bean.ext.ExperienciaProfesionalExt" resultMap="BaseResultMapExt">
		select cod_jornada_laboral,  cod_tipo_entidad, fecha_ingreso, fecha_retiro,
		case when upper(chv.nombre_cargo) = 'CONTRATISTA' THEN 1 else 0 end flg_contratista,
		horas_promedio_mes 
		from experiencia_profesional ep
		left join cargo_hoja_vida chv on chv.cod_cargo_hoja_vida = ep.cod_cargo_hv
		where ep.flg_Activo = #{flgActivo,jdbcType=NUMERIC}
		and cod_persona = #{codPersona,jdbcType=NUMERIC}
	
		union all
	
		select 257  cod_jornada_laboral,
		case when COALESCE(flg_entidad_publica, 1)  = 1 then 142 else 143 end as cod_tipo_entidad,
		fecha_ingreso, fecha_finalizacion as fecha_retiro, 0 flg_contratista,
		null horas_promedio_mes
		from experiencia_docente 
		where flg_Activo = #{flgActivo,jdbcType=NUMERIC}
		and cod_persona = #{codPersona,jdbcType=NUMERIC}
  </select>  	
</mapper>