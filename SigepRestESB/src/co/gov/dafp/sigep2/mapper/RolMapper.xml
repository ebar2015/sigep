<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.gov.dafp.sigep2.interfaces.RolMapper">
	<resultMap id="BaseResultMap" type="co.gov.dafp.sigep2.bean.Rol">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		<id column="COD_ROL" jdbcType="NUMERIC" property="codRol" />
		<result column="TOTAL" jdbcType="NUMERIC" property="total" />
		<result column="NOMBRE" jdbcType="VARCHAR" property="nombre" />
		<result column="DESCRIPCION_ROL" jdbcType="VARCHAR" property="descripcionRol" />
		<result column="COD_ROL_PADRE" jdbcType="NUMERIC" property="codRolPadre" />
		<result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
		<result column="FECHA_MODIFICACION" jdbcType="TIMESTAMP" property="fechaModificacion" />
		<result column="FLG_ESTADO" jdbcType="NUMERIC" property="flgEstado" />
		<result column="FLG_ROL_BASE" jdbcType="BOOLEAN" property="flgRolBase" />
		<result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
		<result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
		<result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
		<result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />
	</resultMap>

	<resultMap id="BaseResultMapExt" type="co.gov.dafp.sigep2.bean.ext.RolExt">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		<id column="COD_ROL" jdbcType="NUMERIC" property="codRol" />
		<result column="TOTAL" jdbcType="NUMERIC" property="total" />
		<result column="NOMBRE" jdbcType="VARCHAR" property="nombre" />
		<result column="DESCRIPCION_ROL" jdbcType="VARCHAR" property="descripcionRol" />
		<result column="COD_ROL_PADRE" jdbcType="NUMERIC" property="codRolPadre" />
		<result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
		<result column="FECHA_MODIFICACION" jdbcType="TIMESTAMP" property="fechaModificacion" />
		<result column="FLG_ESTADO" jdbcType="NUMERIC" property="flgEstado" />
		<result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
		<result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
		<result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
		<result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />

		<result column="COD_USUARIO" jdbcType="NUMERIC" property="codUsuario" />
		<result column="COD_PERSONA" jdbcType="NUMERIC" property="codPersona" />
		<result column="COD_ENTIDAD" jdbcType="NUMERIC" property="codEntidad" />
		<result column="COD_USUARIO_ROL_ENTIDAD" jdbcType="NUMERIC" property="codUsuarioRolEntidad" />
		<result column="COD_USUARIO_ROL_DEPENDENCIA" jdbcType="NUMERIC" property="codUsuarioRolDependencia" />
		<result column="COD_DEPENDENCIA_ENTIDAD" jdbcType="NUMERIC" property="codDependenciaEntidad" />
		<result column="TIPO_IDENTIFICACION" jdbcType="VARCHAR" property="tipoIdentificacion" />
		<result column="NUMERO_IDENTIFICACION" jdbcType="VARCHAR" property="numeroIdentificacion" />
		<result column="NOMBRE_ENTIDAD" jdbcType="VARCHAR" property="nombreEntidad" />
		<result column="NOMBRE_DEPENDENCIA" jdbcType="VARCHAR" property="nombreDependencia" />
		<result column="FECHA_INICIO" jdbcType="VARCHAR" property="fechaInicio" />
		<result column="FECHA_FIN" jdbcType="VARCHAR" property="fechaFin" />
		<result column="CODIGO_SIGEP" jdbcType="VARCHAR" property="codigoSigep" />
	</resultMap>
	<sql id="Example_Where_Clause">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		COD_ROL, NOMBRE, DESCRIPCION_ROL, COD_ROL_PADRE, FLG_ACTIVO,
		FECHA_MODIFICACION,
		FLG_ESTADO, FLG_ROL_BASE, AUD_FECHA_ACTUALIZACION,
		AUD_COD_USUARIO, AUD_COD_ROL,
		AUD_ACCION
	</sql>
	<select id="selectByExample" parameterType="co.gov.dafp.sigep2.bean.RolExample" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select
		<if test="distinct">
			distinct
		</if>
		count(*) over() TOTAL,
		<include refid="Base_Column_List" />
		from ROL
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<select id="selectRolesT" parameterType="co.gov.dafp.sigep2.bean.ext.RolExt" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select * from (
		select
		count(*) over() TOTAL,
		R.*
		from ROL R
		where r.nombre not in ('SISTEMA')
		<if test="flgActivo != null">
			and R.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
		</if>
		<if test="flgActivo == null">
			and R.FLG_ACTIVO = 1
		</if>
		<if test="fieldName != null and ascDesc != null">
	    	order by
	        <choose>  
	            <when test="fieldName == 'nombre'">
	                r.NOMBRE 
	            </when>         
	            <when test="fieldName == 'descripcionRol'">
	                r.DESCRIPCION_ROL  
	            </when>                                                        
	        </choose> 
	        <if test="fieldName != null and ascDesc == 'ASC'">
	        	asc 
	        </if>            
	        <if test="fieldName != null and ascDesc == 'DESC'">
	        	desc 
	        </if>  
	      </if>             
		<if test="fieldName == null and ascDesc == null">
    		order by NOMBRE asc
    	</if>) r
		OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH
		NEXT
		#{limitEnd,jdbcType=NUMERIC} ROWS ONLY
	</select>
	<select id="rolesPersona" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt"
		resultMap="BaseResultMap">
		SELECT DISTINCT ENTIDAD.COD_ROL
		FROM PERSONA P
		LEFT JOIN
		USUARIO U on
		P.COD_PERSONA = U.COD_PERSONA
		LEFT JOIN USUARIO_ENTIDAD E
		on
		U.COD_USUARIO = E.COD_USUARIO
		left join USUARIO_ROL_ENTIDAD ENTIDAD
		on
		E.COD_USUARIO_ENTIDAD = ENTIDAD.COD_USUARIO_ENTIDAD
		WHERE
		P.COD_TIPO_IDENTIFICACION = #{codTipoIdentificacion,jdbcType=NUMERIC}
		AND P.NUMERO_IDENTIFICACION = #{numeroIdentificacion,jdbcType=VARCHAR}
		AND E.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
	</select>
	<select id="selectByPersona" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt"
		resultMap="BaseResultMapExt">
		select DISTINCT
		count(*) over() TOTAL,
		UR.COD_ROL,
		UE.COD_ENTIDAD,
		UE.COD_USUARIO,
		P.COD_PERSONA,
		UR.COD_USUARIO_ROL_ENTIDAD,
		(SELECT
		NOMBRE_PARAMETRO FROM PARAMETRICA WHERE COD_TABLA_PARAMETRICA =
		P.COD_TIPO_IDENTIFICACION) AS TIPO_IDENTIFICACION,
		P.NUMERO_IDENTIFICACION,
		(SELECT NOMBRE_ENTIDAD FROM ENTIDAD WHERE
		COD_ENTIDAD = UE.COD_ENTIDAD) AS NOMBRE_ENTIDAD,
		R.NOMBRE,
		R.DESCRIPCION_ROL
		from ROL R, USUARIO_ROL_ENTIDAD UR,
		USUARIO_ENTIDAD
		UE, PERSONA P, USUARIO U
		WHERE R.COD_ROL = UR.COD_ROL
		AND
		UR.COD_USUARIO_ENTIDAD = UE.COD_USUARIO_ENTIDAD
		AND U.COD_PERSONA =
		P.COD_PERSONA
		AND U.COD_USUARIO = UE.COD_USUARIO
		<if test="codUsuario != null">
			AND UE.COD_USUARIO = #{codUsuario,jdbcType=NUMERIC}
		</if>
		<if test="codTipoIdentificacion != null">
			AND P.COD_TIPO_IDENTIFICACION =
			#{codTipoIdentificacion,jdbcType=NUMERIC}
		</if>
		<if test="numeroIdentificacion != null">
			AND P.NUMERO_IDENTIFICACION =
			#{numeroIdentificacion,jdbcType=VARCHAR}
		</if>
		<if test="primerNombre != null">
			AND UPPER(P.PRIMER_NOMBRE) =
			UPPER(#{primerNombre,jdbcType=VARCHAR})
		</if>
		<if test="segundoNombre != null">
			AND UPPER(P.SEGUNDO_NOMBRE) =
			UPPER(#{segundoNombre,jdbcType=VARCHAR})
		</if>
		<if test="primerApellido != null">
			AND UPPER(P.PRIMER_APELLIDO) =
			UPPER(#{primerApellido,jdbcType=VARCHAR})
		</if>
		<if test="segundoApellido != null">
			AND UPPER(P.SEGUNDO_APELLIDO) =
			UPPER(#{segundoApellido,jdbcType=VARCHAR})
		</if>
		<if test="codEntidad != null">
			AND UE.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
		</if>
		<if test="flgActivo != null">
			AND UR.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
		</if>
		ORDER BY R.NOMBRE
		OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT
		#{limitEnd,jdbcType=NUMERIC} ROWS ONLY
	</select>
	<select id="selectHijosRol" parameterType="co.gov.dafp.sigep2.bean.Rol"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select * from(
		select *
		from rol
		start with cod_rol_padre =
		#{codRolPadre,jdbcType=NUMERIC}
		connect by cod_rol_padre = prior
		cod_rol
		order by level
		) where flg_estado =
		#{flgEstado,jdbcType=NUMERIC}
		and nombre not in ('SERVIDOR PUBLICO', 'CONTRATISTA', 'SISTEMA')
	</select>

	<select id="selectByPrimaryKey" parameterType="java.math.BigDecimal"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select
		<include refid="Base_Column_List" />
		from ROL
		where COD_ROL = #{codRol,jdbcType=NUMERIC}
	</select>

	<select id="selectLike" parameterType="co.gov.dafp.sigep2.bean.ext.RolExt" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select count(*) over() TOTAL, R.* from ROL R
		WHERE 1=1
		and r.nombre not in ('SISTEMA') 
       	and r.flg_activo = 1
		and (
		upper(utl_raw.cast_to_varchar2((nlssort(R.NOMBRE,
		'nls_sort=binary_ai')))) like
		upper(utl_raw.cast_to_varchar2((nlssort('%'||
		#{nombre,jdbcType=VARCHAR} ||'%', 'nls_sort=binary_ai'))))
		or
		upper(utl_raw.cast_to_varchar2((nlssort(R.DESCRIPCION_ROL,
		'nls_sort=binary_ai')))) like
		upper(utl_raw.cast_to_varchar2((nlssort('%'||
		#{nombre,jdbcType=VARCHAR} ||'%', 'nls_sort=binary_ai'))))
		)
		<if test="flgActivo != null">
			and R.FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC}
		</if>
		<if test="fieldName != null and ascDesc != null">
	    	order by
	        <choose>  
	            <when test="fieldName == 'nombre'">
	                r.NOMBRE 
	            </when>         
	            <when test="fieldName == 'descripcionRol'">
	                r.DESCRIPCION_ROL  
	            </when>                                                        
	        </choose> 
	        <if test="fieldName != null and ascDesc == 'ASC'">
	        	asc 
	        </if>            
	        <if test="fieldName != null and ascDesc == 'DESC'">
	        	desc 
	        </if>  
	      </if>             
		<if test="fieldName == null and ascDesc == null">
    		order by NOMBRE asc
    	</if>
		OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.math.BigDecimal">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		delete from ROL
		where COD_ROL = #{codRol,jdbcType=NUMERIC}
	</delete>
	<delete id="deleteByExample" parameterType="co.gov.dafp.sigep2.bean.RolExample">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		delete from ROL
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</delete>
	<insert id="insert" parameterType="co.gov.dafp.sigep2.bean.Rol">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		insert into ROL (NOMBRE, DESCRIPCION_ROL,
		COD_ROL_PADRE, FLG_ACTIVO,
		FECHA_MODIFICACION,
		FLG_ESTADO, AUD_FECHA_ACTUALIZACION,
		AUD_COD_USUARIO,
		AUD_COD_ROL, AUD_ACCION)
		values
		(#{nombre,jdbcType=VARCHAR}, #{descripcionRol,jdbcType=VARCHAR},
		#{codRolPadre,jdbcType=NUMERIC}, #{flgActivo,jdbcType=NUMERIC},
		#{fechaModificacion,jdbcType=TIMESTAMP},
		#{flgEstado,jdbcType=NUMERIC},
		#{audFechaActualizacion,jdbcType=TIMESTAMP},
		#{audCodUsuario,jdbcType=NUMERIC},
		#{audCodRol,jdbcType=NUMERIC},
		#{audAccion,jdbcType=NUMERIC})
	</insert>
	<insert id="insertSelective" parameterType="co.gov.dafp.sigep2.bean.Rol">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		insert into ROL
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="codRol != null">
				COD_ROL,
			</if>
			<if test="nombre != null">
				NOMBRE,
			</if>
			<if test="descripcionRol != null">
				DESCRIPCION_ROL,
			</if>
			<if test="codRolPadre != null">
				COD_ROL_PADRE,
			</if>
			<if test="flgActivo != null">
				FLG_ACTIVO,
			</if>
			<if test="fechaModificacion != null">
				FECHA_MODIFICACION,
			</if>
			<if test="flgEstado != null">
				FLG_ESTADO,
			</if>
			<if test="audFechaActualizacion != null">
				AUD_FECHA_ACTUALIZACION,
			</if>
			<if test="audCodUsuario != null">
				AUD_COD_USUARIO,
			</if>
			<if test="audCodRol != null">
				AUD_COD_ROL,
			</if>
			<if test="audAccion != null">
				AUD_ACCION,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="codRol != null">
				#{codRol,jdbcType=NUMERIC},
			</if>
			<if test="nombre != null">
				#{nombre,jdbcType=VARCHAR},
			</if>
			<if test="descripcionRol != null">
				#{descripcionRol,jdbcType=VARCHAR},
			</if>
			<if test="codRolPadre != null">
				#{codRolPadre,jdbcType=NUMERIC},
			</if>
			<if test="flgActivo != null">
				#{flgActivo,jdbcType=NUMERIC},
			</if>
			<if test="fechaModificacion != null">
				#{fechaModificacion,jdbcType=TIMESTAMP},
			</if>
			<if test="flgEstado != null">
				#{flgEstado,jdbcType=NUMERIC},
			</if>
			<if test="audFechaActualizacion != null">
				#{audFechaActualizacion,jdbcType=TIMESTAMP},
			</if>
			<if test="audCodUsuario != null">
				#{audCodUsuario,jdbcType=NUMERIC},
			</if>
			<if test="audCodRol != null">
				#{audCodRol,jdbcType=NUMERIC},
			</if>
			<if test="audAccion != null">
				#{audAccion,jdbcType=NUMERIC},
			</if>
		</trim>
	</insert>
	<select id="countByExample" parameterType="co.gov.dafp.sigep2.bean.RolExample"
		resultType="java.lang.Long">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select count(*) from ROL
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>
	<update id="updateByExampleSelective" parameterType="map">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		update ROL
		<set>
			<if test="record.codRol != null">
				COD_ROL = #{record.codRol,jdbcType=NUMERIC},
			</if>
			<if test="record.nombre != null">
				NOMBRE = #{record.nombre,jdbcType=VARCHAR},
			</if>
			<if test="record.descripcionRol != null">
				DESCRIPCION_ROL =
				#{record.descripcionRol,jdbcType=VARCHAR},
			</if>
			<if test="record.codRolPadre != null">
				COD_ROL_PADRE = #{record.codRolPadre,jdbcType=NUMERIC},
			</if>
			<if test="record.flgActivo != null">
				FLG_ACTIVO = #{record.flgActivo,jdbcType=NUMERIC},
			</if>
			<if test="record.fechaModificacion != null">
				FECHA_MODIFICACION =
				#{record.fechaModificacion,jdbcType=TIMESTAMP},
			</if>
			<if test="record.flgEstado != null">
				FLG_ESTADO = #{record.flgEstado,jdbcType=NUMERIC},
			</if>
			<if test="record.audFechaActualizacion != null">
				AUD_FECHA_ACTUALIZACION =
				#{record.audFechaActualizacion,jdbcType=TIMESTAMP},
			</if>
			<if test="record.audCodUsuario != null">
				AUD_COD_USUARIO =
				#{record.audCodUsuario,jdbcType=NUMERIC},
			</if>
			<if test="record.audCodRol != null">
				AUD_COD_ROL = #{record.audCodRol,jdbcType=NUMERIC},
			</if>
			<if test="record.audAccion != null">
				AUD_ACCION = #{record.audAccion,jdbcType=NUMERIC},
			</if>
		</set>
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExample" parameterType="map">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		update ROL
		set COD_ROL = #{record.codRol,jdbcType=NUMERIC},
		NOMBRE =
		#{record.nombre,jdbcType=VARCHAR},
		DESCRIPCION_ROL =
		#{record.descripcionRol,jdbcType=VARCHAR},
		COD_ROL_PADRE =
		#{record.codRolPadre,jdbcType=NUMERIC},
		FLG_ACTIVO =
		#{record.flgActivo,jdbcType=NUMERIC},
		FECHA_MODIFICACION =
		#{record.fechaModificacion,jdbcType=TIMESTAMP},
		FLG_ESTADO =
		#{record.flgEstado,jdbcType=NUMERIC},
		AUD_FECHA_ACTUALIZACION =
		#{record.audFechaActualizacion,jdbcType=TIMESTAMP},
		AUD_COD_USUARIO =
		#{record.audCodUsuario,jdbcType=NUMERIC},
		AUD_COD_ROL =
		#{record.audCodRol,jdbcType=NUMERIC},
		AUD_ACCION =
		#{record.audAccion,jdbcType=NUMERIC}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByPrimaryKeySelective" parameterType="co.gov.dafp.sigep2.bean.Rol">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		update ROL
		<set>
			<if test="nombre != null">
				NOMBRE = #{nombre,jdbcType=VARCHAR},
			</if>
			<if test="descripcionRol != null">
				DESCRIPCION_ROL = #{descripcionRol,jdbcType=VARCHAR},
			</if>
			<if test="codRolPadre != null">
				COD_ROL_PADRE = #{codRolPadre,jdbcType=NUMERIC},
			</if>
			<if test="flgActivo != null">
				FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC},
			</if>
			<if test="fechaModificacion != null">
				FECHA_MODIFICACION =
				#{fechaModificacion,jdbcType=TIMESTAMP},
			</if>
			<if test="flgEstado != null">
				FLG_ESTADO = #{flgEstado,jdbcType=NUMERIC},
			</if>
			<if test="audFechaActualizacion != null">
				AUD_FECHA_ACTUALIZACION =
				#{audFechaActualizacion,jdbcType=TIMESTAMP},
			</if>
			<if test="audCodUsuario != null">
				AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC},
			</if>
			<if test="audCodRol != null">
				AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC},
			</if>
			<if test="audAccion != null">
				AUD_ACCION = #{audAccion,jdbcType=NUMERIC},
			</if>
		</set>
		where COD_ROL = #{codRol,jdbcType=NUMERIC}
	</update>
	<update id="updateByPrimaryKey" parameterType="co.gov.dafp.sigep2.bean.Rol">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		update ROL
		set NOMBRE = #{nombre,jdbcType=VARCHAR},
		DESCRIPCION_ROL =
		#{descripcionRol,jdbcType=VARCHAR},
		COD_ROL_PADRE =
		#{codRolPadre,jdbcType=NUMERIC},
		FLG_ACTIVO =
		#{flgActivo,jdbcType=NUMERIC},
		FECHA_MODIFICACION =
		#{fechaModificacion,jdbcType=TIMESTAMP},
		FLG_ESTADO =
		#{flgEstado,jdbcType=NUMERIC},
		AUD_FECHA_ACTUALIZACION =
		#{audFechaActualizacion,jdbcType=TIMESTAMP},
		AUD_COD_USUARIO =
		#{audCodUsuario,jdbcType=NUMERIC},
		AUD_COD_ROL =
		#{audCodRol,jdbcType=NUMERIC},
		AUD_ACCION =
		#{audAccion,jdbcType=NUMERIC}
		where COD_ROL =
		#{codRol,jdbcType=NUMERIC}
	</update>
	<select id="selectRolesBase" resultMap="BaseResultMap">
		SELECT
		<include refid="Base_Column_List" />
		from ROL
		where FLG_ROL_BASE = 1 and NOMBRE not in ('SERVIDOR PUBLICO', 'CONTRATISTA', 'SISTEMA', 'InterOperatibilidad') and FLG_ACTIVO = 1
	</select>
	<select id="selectRolesByPerosnaEntidad" parameterType="co.gov.dafp.sigep2.bean.ext.RolExt"
		resultMap="BaseResultMapExt">
  		select
  			d.cod_dependencia_entidad,
			urd.cod_usuario_rol_dependencia,
			ure.cod_usuario_rol_entidad,
			ue.cod_entidad,
			r.cod_rol, r.nombre,
			r.descripcion_rol,
			e.nombre_entidad,
			e.codigo_sigep,
			case when flg_dependencia_especial = 1 then 'TTL_YES' else 'TTL_NO' end nombre_dependencia,
			COALESCE(urd.fecha_inicio,ure.aud_fecha_actualizacion) fecha_inicio,
			urd.fecha_fin
		from usuario_rol_entidad ure
			inner join rol r on ure.cod_rol = r.cod_rol
			inner join usuario_entidad ue on ure.cod_usuario_entidad = ue.cod_usuario_entidad
			inner join entidad e on ue.cod_entidad = e.cod_entidad
			inner join usuario u on ue.cod_usuario = u.cod_usuario
			inner join persona p on u.cod_persona = p.cod_persona
			left join (select cod_usuario_rol_dependencia, cod_usuario_rol_entidad, cod_dependencia_entidad, fecha_inicio, fecha_fin from usuario_rol_dependencia where flg_activo = 1 order by aud_fecha_actualizacion desc) urd on ure.cod_usuario_rol_entidad = urd.cod_usuario_rol_entidad
			left join dependencia_entidad d on ue.cod_dependencia_entidad = d.cod_dependencia_entidad
		where
			u.cod_persona =  #{codPersona,jdbcType=NUMERIC}
      		and ue.flg_activo = 1
      		and ure.flg_activo = 1
			and ure.flg_estado = 1
       		and r.flg_activo = 1
      		<if test="codEntidad != null">
       		and e.cod_entidad = #{codEntidad,jdbcType=NUMERIC}
      		</if>
      		<if test="ocultarRolBase == null">
       			and r.nombre not in ('SERVIDOR PUBLICO', 'CONTRATISTA', 'SISTEMA') 
      		</if>
	</select>

	<select id="selectHijosRolJefeTH" parameterType="co.gov.dafp.sigep2.bean.Rol" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select * from(
		select *
		from rol
		start with cod_rol_padre =
		#{codRolPadre,jdbcType=NUMERIC}
		connect by cod_rol_padre = prior
		cod_rol
		order by level
		) where flg_estado =
		#{flgEstado,jdbcType=NUMERIC}
		and nombre not in ('SERVIDOR PUBLICO', 'CONTRATISTA', 'SISTEMA')
		union
		select * from rol where cod_rol =
		'15' and flg_estado = 1
	</select>
	
	
	
	<select id="selectHijosRolJefeTHYContratos" parameterType="co.gov.dafp.sigep2.bean.Rol" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Jan 25 
			12:04:19 COT 2018. -->
		select * from(
		select *
		from rol
		start with cod_rol_padre in (14,16)
		connect by cod_rol_padre = prior
		cod_rol
		order by level
		) where flg_estado =
		#{flgEstado,jdbcType=NUMERIC}
		and nombre not in ('SERVIDOR PUBLICO', 'CONTRATISTA', 'SISTEMA')
		union
		select * from rol where cod_rol = '15' and flg_estado = 1
	</select>

	<select id="selectRolPorNombre" parameterType="co.gov.dafp.sigep2.bean.Rol"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from rol r
		where r.nombre = #{nombre,jdbcType=VARCHAR}
	</select>
	<insert id="desactivarRoles" statementType="CALLABLE">
		{CALL SP_INACTIVA_ROLES()}
	</insert>
</mapper>