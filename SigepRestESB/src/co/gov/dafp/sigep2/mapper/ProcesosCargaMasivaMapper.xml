<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.gov.dafp.sigep2.interfaces.ProcesosCargaMasivaMapper">
  <resultMap id="BaseResultMap" type="co.gov.dafp.sigep2.bean.ProcesosCargaMasiva">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    <id column="COD_PROCESO_CARGA_MASIVA" jdbcType="NUMERIC" property="codProcesoCargaMasiva" />
    <result column="FECHA_INICIO" jdbcType="TIMESTAMP" property="fechaInicio" />
    <result column="FECHA_FIN" jdbcType="TIMESTAMP" property="fechaFin" />
    <result column="COD_ENTIDAD" jdbcType="NUMERIC" property="codEntidad" />
    <result column="TIPO_CARGUE" jdbcType="NUMERIC" property="tipoCargue" />
    <result column="ESTADO" jdbcType="NUMERIC" property="estado" />
    <result column="REGISTROS_EXITOSOS" jdbcType="NUMERIC" property="registrosExitosos" />
    <result column="REGISTROS_FALLIDOS" jdbcType="NUMERIC" property="registrosFallidos" />
    <result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
    <result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
    <result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
    <result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />
    <result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
    <result column="RESULTADO" jdbcType="VARCHAR" property="resultado" />
    <result column="URL_ARCHIVO_LOGS" jdbcType="VARCHAR" property="urlArchivoLogs" />
    <result column="FLG_NOTIFICADO" jdbcType="NUMERIC" property="flgNotificado" />
    
  </resultMap>
  <resultMap id="BaseResultMapExt" type="co.gov.dafp.sigep2.bean.ext.ProcesosCargaMasivaExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed May 23 14:06:24 COT 2018.
    -->
    <id column="COD_PROCESO_CARGA_MASIVA" jdbcType="NUMERIC" property="codProcesoCargaMasiva" />
    <result column="FECHA_INICIO" jdbcType="TIMESTAMP" property="fechaInicio" />
    <result column="FECHA_FIN" jdbcType="TIMESTAMP" property="fechaFin" />
    <result column="COD_ENTIDAD" jdbcType="NUMERIC" property="codEntidad" />
    <result column="TIPO_CARGUE" jdbcType="NUMERIC" property="tipoCargue" />
    <result column="ESTADO" jdbcType="NUMERIC" property="estado" />
    <result column="REGISTROS_EXITOSOS" jdbcType="NUMERIC" property="registrosExitosos" />
    <result column="REGISTROS_FALLIDOS" jdbcType="NUMERIC" property="registrosFallidos" />
    <result column="AUD_FECHA_ACTUALIZACION" jdbcType="TIMESTAMP" property="audFechaActualizacion" />
    <result column="AUD_COD_USUARIO" jdbcType="NUMERIC" property="audCodUsuario" />
    <result column="AUD_COD_ROL" jdbcType="NUMERIC" property="audCodRol" />
    <result column="AUD_ACCION" jdbcType="NUMERIC" property="audAccion" />
    <result column="FLG_ACTIVO" jdbcType="NUMERIC" property="flgActivo" />
    <result column="RESULTADO" jdbcType="VARCHAR" property="resultado" />
    <result column="URL_ARCHIVO_LOGS" jdbcType="VARCHAR" property="urlArchivoLogs" />
    <result column="FLG_NOTIFICADO" jdbcType="NUMERIC" property="flgNotificado" />
    
    <result column="NOMBRE_ENTIDAD" jdbcType="VARCHAR" property="nombreEntidad" />
    <result column="NOMBRE_TIPO_CARGUE" jdbcType="VARCHAR" property="nombreTipoCargue" />
    <result column="TIPO_DOCUMENTO" jdbcType="VARCHAR" property="tipoDocumento" />
    <result column="NUMERO_IDENTIFICACION" jdbcType="VARCHAR" property="numeroIdentificacion" />
    <result column="NOMBRE_COMPLETO" jdbcType="VARCHAR" property="nombreCompleto" />
    <result column="NOMBRE_ESTADO" jdbcType="VARCHAR" property="nombreEstado" />
    <result column="TOTAL" jdbcType="VARCHAR" property="total" />
    <result column="COD_PERSONA" jdbcType="NUMERIC" property="codPersona" />
    <result column="CORREO_ELECTRONICO" jdbcType="VARCHAR" property="correoElectronico" />
    
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    COD_PROCESO_CARGA_MASIVA, FECHA_INICIO, FECHA_FIN, COD_ENTIDAD, TIPO_CARGUE, ESTADO, 
    REGISTROS_EXITOSOS, REGISTROS_FALLIDOS, AUD_FECHA_ACTUALIZACION, AUD_COD_USUARIO, 
    AUD_COD_ROL, AUD_ACCION, FLG_ACTIVO, RESULTADO, URL_ARCHIVO_LOGS,  FLG_NOTIFICADO
  </sql>
  <select id="selectByExample" parameterType="co.gov.dafp.sigep2.bean.ProcesosCargaMasivaExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from PROCESOS_CARGA_MASIVA
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Short" resultMap="BaseResultMapExt">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    SELECT
    count(*) over() TOTAL,
       COD_PROCESO_CARGA_MASIVA,
       PCM.FECHA_INICIO,
       PCM.FECHA_FIN,
       E.NOMBRE_ENTIDAD,
       TC.NOMBRE_PARAMETRO NOMBRE_TIPO_CARGUE,
       TD.NOMBRE_PARAMETRO TIPO_DOCUMENTO,
       P.NUMERO_IDENTIFICACION,
       P.PRIMER_NOMBRE ||' '|| P.SEGUNDO_NOMBRE ||' '|| P.PRIMER_APELLIDO ||' '|| P.SEGUNDO_APELLIDO NOMBRE_COMPLETO,
       EST.NOMBRE_PARAMETRO NOMBRE_ESTADO,
       PCM.*
  FROM
   PROCESOS_CARGA_MASIVA PCM 
   	LEFT JOIN ENTIDAD E ON PCM.COD_ENTIDAD = E.COD_ENTIDAD
   	LEFT JOIN PARAMETRICA TC ON PCM.TIPO_CARGUE = TC.COD_TABLA_PARAMETRICA
   	LEFT JOIN USUARIO U ON PCM.AUD_COD_USUARIO = U.COD_USUARIO
   	LEFT JOIN PERSONA P ON U.COD_PERSONA = P.COD_PERSONA
   	LEFT JOIN PARAMETRICA TD ON P.COD_TIPO_IDENTIFICACION = TD.COD_TABLA_PARAMETRICA
   	LEFT JOIN PARAMETRICA EST ON PCM.ESTADO = EST.COD_TABLA_PARAMETRICA
    where PCM.COD_PROCESO_CARGA_MASIVA = #{codProcesoCargaMasiva,jdbcType=NUMERIC}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Short">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    delete from PROCESOS_CARGA_MASIVA
    where COD_PROCESO_CARGA_MASIVA = #{codProcesoCargaMasiva,jdbcType=NUMERIC}
  </delete>
  <delete id="deleteByExample" parameterType="co.gov.dafp.sigep2.bean.ProcesosCargaMasivaExample">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    delete from PROCESOS_CARGA_MASIVA
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="co.gov.dafp.sigep2.bean.ProcesosCargaMasiva">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    insert into PROCESOS_CARGA_MASIVA (COD_PROCESO_CARGA_MASIVA, FECHA_INICIO, 
      FECHA_FIN, COD_ENTIDAD, TIPO_CARGUE, 
      ESTADO, REGISTROS_EXITOSOS, REGISTROS_FALLIDOS, 
      AUD_FECHA_ACTUALIZACION, AUD_COD_USUARIO, 
      AUD_COD_ROL, AUD_ACCION, FLG_ACTIVO, 
      RESULTADO, URL_ARCHIVO_LOGS, FLG_NOTIFICADO)
    values (#{codProcesoCargaMasiva,jdbcType=NUMERIC}, #{fechaInicio,jdbcType=TIMESTAMP}, 
      #{fechaFin,jdbcType=TIMESTAMP}, #{codEntidad,jdbcType=NUMERIC}, #{tipoCargue,jdbcType=NUMERIC}, 
      #{estado,jdbcType=NUMERIC}, #{registrosExitosos,jdbcType=NUMERIC}, #{registrosFallidos,jdbcType=NUMERIC}, 
      #{audFechaActualizacion,jdbcType=TIMESTAMP}, #{audCodUsuario,jdbcType=NUMERIC}, 
      #{audCodRol,jdbcType=NUMERIC}, #{audAccion,jdbcType=NUMERIC}, #{flgActivo,jdbcType=NUMERIC}, 
      #{resultado,jdbcType=VARCHAR}, #{urlArchivoLogs,jdbcType=VARCHAR},#{flgNotificado,jdbcType=NUMERIC})
  </insert>
  <insert id="insertSelective" parameterType="co.gov.dafp.sigep2.bean.ProcesosCargaMasiva">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    insert into PROCESOS_CARGA_MASIVA
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="codProcesoCargaMasiva != null">
        COD_PROCESO_CARGA_MASIVA,
      </if>
      <if test="fechaInicio != null">
        FECHA_INICIO,
      </if>
      <if test="fechaFin != null">
        FECHA_FIN,
      </if>
      <if test="codEntidad != null">
        COD_ENTIDAD,
      </if>
      <if test="tipoCargue != null">
        TIPO_CARGUE,
      </if>
      <if test="estado != null">
        ESTADO,
      </if>
      <if test="registrosExitosos != null">
        REGISTROS_EXITOSOS,
      </if>
      <if test="registrosFallidos != null">
        REGISTROS_FALLIDOS,
      </if>
      <if test="audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION,
      </if>
      <if test="audCodUsuario != null">
        AUD_COD_USUARIO,
      </if>
      <if test="audCodRol != null">
        AUD_COD_ROL,
      </if>
      <if test="audAccion != null">
        AUD_ACCION,
      </if>
      <if test="flgActivo != null">
        FLG_ACTIVO,
      </if>
      <if test="resultado != null">
        RESULTADO,
      </if>
      <if test="urlArchivoLogs != null">
        URL_ARCHIVO_LOGS,
      </if>
       <if test="flgNotificado != null">
        FLG_NOTIFICADO,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="codProcesoCargaMasiva != null">
        #{codProcesoCargaMasiva,jdbcType=NUMERIC},
      </if>
      <if test="fechaInicio != null">
        #{fechaInicio,jdbcType=TIMESTAMP},
      </if>
      <if test="fechaFin != null">
        #{fechaFin,jdbcType=TIMESTAMP},
      </if>
      <if test="codEntidad != null">
        #{codEntidad,jdbcType=NUMERIC},
      </if>
      <if test="tipoCargue != null">
        #{tipoCargue,jdbcType=NUMERIC},
      </if>
      <if test="estado != null">
        #{estado,jdbcType=NUMERIC},
      </if>
      <if test="registrosExitosos != null">
        #{registrosExitosos,jdbcType=NUMERIC},
      </if>
      <if test="registrosFallidos != null">
        #{registrosFallidos,jdbcType=NUMERIC},
      </if>
      <if test="audFechaActualizacion != null">
        #{audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audCodUsuario != null">
        #{audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="audCodRol != null">
        #{audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="audAccion != null">
        #{audAccion,jdbcType=NUMERIC},
      </if>
      <if test="flgActivo != null">
        #{flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="resultado != null">
        #{resultado,jdbcType=VARCHAR},
      </if>
      <if test="urlArchivoLogs != null">
        #{urlArchivoLogs,jdbcType=VARCHAR},
      </if>
       <if test="flgNotificado != null">
        #{flgNotificado,jdbcType=NUMERIC},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="co.gov.dafp.sigep2.bean.ProcesosCargaMasivaExample" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    select count(*) from PROCESOS_CARGA_MASIVA
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    update PROCESOS_CARGA_MASIVA
    <set>
      <if test="record.codProcesoCargaMasiva != null">
        COD_PROCESO_CARGA_MASIVA = #{record.codProcesoCargaMasiva,jdbcType=NUMERIC},
      </if>
      <if test="record.fechaInicio != null">
        FECHA_INICIO = #{record.fechaInicio,jdbcType=TIMESTAMP},
      </if>
      <if test="record.fechaFin != null">
        FECHA_FIN = #{record.fechaFin,jdbcType=TIMESTAMP},
      </if>
      <if test="record.codEntidad != null">
        COD_ENTIDAD = #{record.codEntidad,jdbcType=NUMERIC},
      </if>
      <if test="record.tipoCargue != null">
        TIPO_CARGUE = #{record.tipoCargue,jdbcType=NUMERIC},
      </if>
      <if test="record.estado != null">
        ESTADO = #{record.estado,jdbcType=NUMERIC},
      </if>
      <if test="record.registrosExitosos != null">
        REGISTROS_EXITOSOS = #{record.registrosExitosos,jdbcType=NUMERIC},
      </if>
      <if test="record.registrosFallidos != null">
        REGISTROS_FALLIDOS = #{record.registrosFallidos,jdbcType=NUMERIC},
      </if>
      <if test="record.audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION = #{record.audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="record.audCodUsuario != null">
        AUD_COD_USUARIO = #{record.audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="record.audCodRol != null">
        AUD_COD_ROL = #{record.audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="record.audAccion != null">
        AUD_ACCION = #{record.audAccion,jdbcType=NUMERIC},
      </if>
      <if test="record.flgActivo != null">
        FLG_ACTIVO = #{record.flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="record.resultado != null">
        RESULTADO = #{record.resultado,jdbcType=VARCHAR},
      </if>
      <if test="record.urlArchivoLogs != null">
        URL_ARCHIVO_LOGS = #{record.urlArchivoLogs,jdbcType=VARCHAR},
      </if>
       <if test="record.flgNotificado != null">
        FLG_NOTIFICADO = #{record.flgNotificado,jdbcType=NUMERIC},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    update PROCESOS_CARGA_MASIVA
    set COD_PROCESO_CARGA_MASIVA = #{record.codProcesoCargaMasiva,jdbcType=NUMERIC},
      FECHA_INICIO = #{record.fechaInicio,jdbcType=TIMESTAMP},
      FECHA_FIN = #{record.fechaFin,jdbcType=TIMESTAMP},
      COD_ENTIDAD = #{record.codEntidad,jdbcType=NUMERIC},
      TIPO_CARGUE = #{record.tipoCargue,jdbcType=NUMERIC},
      ESTADO = #{record.estado,jdbcType=NUMERIC},
      REGISTROS_EXITOSOS = #{record.registrosExitosos,jdbcType=NUMERIC},
      REGISTROS_FALLIDOS = #{record.registrosFallidos,jdbcType=NUMERIC},
      AUD_FECHA_ACTUALIZACION = #{record.audFechaActualizacion,jdbcType=TIMESTAMP},
      AUD_COD_USUARIO = #{record.audCodUsuario,jdbcType=NUMERIC},
      AUD_COD_ROL = #{record.audCodRol,jdbcType=NUMERIC},
      AUD_ACCION = #{record.audAccion,jdbcType=NUMERIC},
      FLG_ACTIVO = #{record.flgActivo,jdbcType=NUMERIC},
      RESULTADO = #{record.resultado,jdbcType=VARCHAR},
      URL_ARCHIVO_LOGS = #{record.urlArchivoLogs,jdbcType=VARCHAR},
      FLG_NOTIFICADO = #{record.flgNotificado,jdbcType=NUMERIC}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="co.gov.dafp.sigep2.bean.ProcesosCargaMasiva">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    update PROCESOS_CARGA_MASIVA
    <set>
      <if test="fechaInicio != null">
        FECHA_INICIO = #{fechaInicio,jdbcType=TIMESTAMP},
      </if>
      <if test="fechaFin != null">
        FECHA_FIN = #{fechaFin,jdbcType=TIMESTAMP},
      </if>
      <if test="codEntidad != null">
        COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC},
      </if>
      <if test="tipoCargue != null">
        TIPO_CARGUE = #{tipoCargue,jdbcType=NUMERIC},
      </if>
      <if test="estado != null">
        ESTADO = #{estado,jdbcType=NUMERIC},
      </if>
      <if test="registrosExitosos != null">
        REGISTROS_EXITOSOS = #{registrosExitosos,jdbcType=NUMERIC},
      </if>
      <if test="registrosFallidos != null">
        REGISTROS_FALLIDOS = #{registrosFallidos,jdbcType=NUMERIC},
      </if>
      <if test="audFechaActualizacion != null">
        AUD_FECHA_ACTUALIZACION = #{audFechaActualizacion,jdbcType=TIMESTAMP},
      </if>
      <if test="audCodUsuario != null">
        AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC},
      </if>
      <if test="audCodRol != null">
        AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC},
      </if>
      <if test="audAccion != null">
        AUD_ACCION = #{audAccion,jdbcType=NUMERIC},
      </if>
      <if test="flgActivo != null">
        FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC},
      </if>
      <if test="resultado != null">
        RESULTADO = #{resultado,jdbcType=VARCHAR},
      </if>
      <if test="urlArchivoLogs != null">
        URL_ARCHIVO_LOGS = #{urlArchivoLogs,jdbcType=VARCHAR},
      </if>
      <if test="flgNotificado != null">
        FLG_NOTIFICADO = #{flgNotificado,jdbcType=NUMERIC},
      </if>
    </set>
    where COD_PROCESO_CARGA_MASIVA = #{codProcesoCargaMasiva,jdbcType=NUMERIC}
  </update>
  <update id="updateByPrimaryKey" parameterType="co.gov.dafp.sigep2.bean.ProcesosCargaMasiva">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 08 08:00:42 COT 2019.
    -->
    update PROCESOS_CARGA_MASIVA
    set FECHA_INICIO = #{fechaInicio,jdbcType=TIMESTAMP},
      FECHA_FIN = #{fechaFin,jdbcType=TIMESTAMP},
      COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC},
      TIPO_CARGUE = #{tipoCargue,jdbcType=NUMERIC},
      ESTADO = #{estado,jdbcType=NUMERIC},
      REGISTROS_EXITOSOS = #{registrosExitosos,jdbcType=NUMERIC},
      REGISTROS_FALLIDOS = #{registrosFallidos,jdbcType=NUMERIC},
      AUD_FECHA_ACTUALIZACION = #{audFechaActualizacion,jdbcType=TIMESTAMP},
      AUD_COD_USUARIO = #{audCodUsuario,jdbcType=NUMERIC},
      AUD_COD_ROL = #{audCodRol,jdbcType=NUMERIC},
      AUD_ACCION = #{audAccion,jdbcType=NUMERIC},
      FLG_ACTIVO = #{flgActivo,jdbcType=NUMERIC},
      RESULTADO = #{resultado,jdbcType=VARCHAR},
      URL_ARCHIVO_LOGS = #{urlArchivoLogs,jdbcType=VARCHAR},
      FLG_NOTIFICADO = #{flgNotificado,jdbcType=NUMERIC}
    where COD_PROCESO_CARGA_MASIVA = #{codProcesoCargaMasiva,jdbcType=NUMERIC}
  </update>
  <select id="cargaMasivafiltro" parameterType="co.gov.dafp.sigep2.bean.ext.PersonaExt" resultMap="BaseResultMapExt">
     SELECT
    	   count(*) over() TOTAL,
    	PCM.*, 
       PCM.FECHA_INICIO,
       PCM.FECHA_FIN,
       E.NOMBRE_ENTIDAD,
       TC.NOMBRE_PARAMETRO NOMBRE_TIPO_CARGUE,
       TD.NOMBRE_PARAMETRO TIPO_DOCUMENTO,
       P.COD_PERSONA,
       P.CORREO_ELECTRONICO,
       P.NUMERO_IDENTIFICACION,
       P.PRIMER_NOMBRE ||' '|| P.SEGUNDO_NOMBRE ||' '|| P.PRIMER_APELLIDO ||' '|| P.SEGUNDO_APELLIDO NOMBRE_COMPLETO,
       EST.NOMBRE_PARAMETRO NOMBRE_ESTADO,
       PCM.REGISTROS_EXITOSOS,
       PCM.REGISTROS_FALLIDOS,
       PCM.RESULTADO
	  FROM
	   PROCESOS_CARGA_MASIVA PCM LEFT JOIN ENTIDAD E
	          ON PCM.COD_ENTIDAD = E.COD_ENTIDAD
	   LEFT JOIN PARAMETRICA TC
	          ON PCM.TIPO_CARGUE = TC.COD_TABLA_PARAMETRICA
	      LEFT JOIN USUARIO U
	          ON PCM.AUD_COD_USUARIO = U.COD_USUARIO
	   LEFT JOIN PERSONA P
	          ON U.COD_PERSONA = P.COD_PERSONA
	   LEFT JOIN PARAMETRICA TD
	          ON P.COD_TIPO_IDENTIFICACION = TD.COD_TABLA_PARAMETRICA
	      LEFT JOIN PARAMETRICA EST
	          ON PCM.ESTADO = EST.COD_TABLA_PARAMETRICA
	  WHERE 1 =1
       <if test="fechaInicio != null">
       	AND PCM.FECHA_INICIO &gt;= #{fechaInicio,jdbcType=TIMESTAMP}
       </if>
       <if test="fechaFin != null">
       	  AND PCM.FECHA_FIN &lt;= #{fechaFin,jdbcType=TIMESTAMP}
       </if>
      <if test="codEntidad != null">
        AND PCM.COD_ENTIDAD = #{codEntidad,jdbcType=NUMERIC}
      </if>
       <if test="tipoCargue != null">
       	AND PCM.TIPO_CARGUE = #{tipoCargue,jdbcType=NUMERIC}
      </if>
       <if test="codTipoIdentificacion != null">
       AND P.COD_TIPO_IDENTIFICACION =  #{codTipoIdentificacion,jdbcType=NUMERIC}
      </if>
       <if test="numeroIdentificacion != null">
       AND UPPER(P.NUMERO_IDENTIFICACION) = UPPER(#{numeroIdentificacion,jdbcType=VARCHAR})
      </if>
       <if test="primerNombre != null">
       AND UPPER(P.PRIMER_NOMBRE) LIKE UPPER('%'||#{primerNombre,jdbcType=VARCHAR}||'%')
       </if>
       <if test="segundoNombre != null">
       AND UPPER(P.SEGUNDO_NOMBRE) LIKE UPPER('%'||#{segundoNombre,jdbcType=VARCHAR}||'%')
       </if>
       <if test="primerApellido != null">
       AND UPPER(P.PRIMER_APELLIDO) LIKE UPPER('%'||#{primerApellido,jdbcType=VARCHAR}||'%')
       </if>
       <if test="segundoApellido != null">
       AND UPPER(P.SEGUNDO_APELLIDO) LIKE UPPER('%'||#{segundoApellido,jdbcType=VARCHAR}||'%')
       </if>
       <if test="estado != null">
        AND PCM.ESTADO = #{estado,jdbcType=NUMERIC}
       </if>
       <if test="flgNotificado != null">
        AND COALESCE(PCM.FLG_NOTIFICADO,0) = #{flgNotificado,jdbcType=NUMERIC}
       </if>
       <if test="fieldName != null and ascDesc != null">
	    order by
	        <choose>  
	            <when test="fieldName == 'codProcesoCargaMasiva'">
	                PCM.COD_PROCESO_CARGA_MASIVA 
	            </when>         
	            <when test="fieldName == 'fechaInicio'">
	                PCM.FECHA_INICIO  
	            </when> 
	            <when test="fieldName == 'fechaFin'">
	               PCM.FECHA_FIN 
	            </when> 
	            <when test="fieldName == 'nombreEntidad'">
	                E.NOMBRE_ENTIDAD 
	            </when> 
	            
	            <when test="fieldName == 'nombreTipoCargue'">
	                TC.NOMBRE_PARAMETRO 
	            </when>
	            
	            <when test="fieldName == 'tipoDocumento'">
	                TD.NOMBRE_PARAMETRO 
	            </when>  
	            
	            <when test="fieldName == 'numeroIdentificacion'">
	                P.NUMERO_IDENTIFICACION 
	            </when> 
	            <when test="fieldName == 'nombreCompleto'">
	                P.PRIMER_NOMBRE 
	            </when>
	              
	            <when test="fieldName == 'nombreEstado'">
					EST.NOMBRE_PARAMETRO 
				</when>
				<when test="fieldName == 'registrosExitosos'">
					PCM.REGISTROS_EXITOSOS 
				</when>
				<when test="fieldName == 'registrosFallidos'">
					PCM.REGISTROS_FALLIDOS 
				</when>                                                                   
	        </choose>               
	        <if test="ascDesc == 'ASC'">
	            asc 
	        </if>            
	        <if test="ascDesc == 'DESC'">
	            desc 
	        </if>   
	 	</if>
    
    	<if test="fieldName == null and ascDesc == null">
    		ORDER BY COD_PROCESO_CARGA_MASIVA DESC
    	</if>
       <if test="limitInit != null">
        <if test="limitEnd != null">
            OFFSET #{limitInit,jdbcType=NUMERIC} ROWS FETCH NEXT #{limitEnd,jdbcType=NUMERIC} ROWS ONLY
        </if>
       </if>
  </select>
</mapper>