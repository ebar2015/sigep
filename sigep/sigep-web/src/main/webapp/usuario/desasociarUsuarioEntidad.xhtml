<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/resources/template/pageTemplate.xhtml">

	<f:metadata>
		<f:viewParam name="id" value='#{desasociarUsuarioEntidadBean.id}' />
		<f:viewParam name="recursoId" value="#{desasociarUsuarioEntidadBean.recursoId}" />
		<f:viewParam name="dialog"
			value='#{desasociarUsuarioEntidadBean.dialog}' />
		<f:event type="preRenderView"
			listener='#{desasociarUsuarioEntidadBean.retrieve}' />
		<f:event type="preRenderView"
			listener='#{desasociarUsuarioEntidadBean.showDialog}' />
	</f:metadata>

	<ui:param name="pintarMiga" value="3" />
	<ui:param name="pageTitle" value="${titles['TTL_ADMON_SISTEMA']}" />
	<ui:param name="pageSubtitle1" value="${titles['TTL_USER']}" />
	<ui:param name="pageSubtitle2" value="${titles['TTL_DESASOCIAR_USUARIO_ENTIDAD']}" />
	

	<ui:define name="main">
		<div class="row">
			<div class="col-md-12" align="center">
				<h:panelGroup>
					<h2>
						<p:outputLabel
							value="• ${titles['TTL_DESASOCIAR_USUARIO_ENTIDAD']} •"
							styleClass="page-subtitle" style="color: #263948!important;" />
					</h2>
				</h:panelGroup>
			</div>
		</div>
		<div class="col-md-3"></div>
		<div class="panel-body form-horizontal cuadrito col-md-6"
			style="margin: auto !important; padding-top: 12px !important; padding-bottom: 25px !important;">

			<div class="row" align="right">
				<div class="col-md-12">
					<label class="form-label-formularios">${titles['TTL_REQUIRED']}</label>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6">
					<p:outputLabel value="${titles['TTL_TIPO_DOCUMENTO']}"
						for="tipoDocumento" styleClass="log-label form-label-formularios" />
					<h:panelGroup>
						<h:selectOneMenu id="tipoDocumento"
							disabled="#{!desasociarUsuarioEntidadBean.entidadSeleccionada}"
							converter="tipoDocumentoConverter"
							value="#{desasociarUsuarioEntidadBean.persona.tipoIdentificacionId}"
							var="t" filter="true" filterMatchMode="contains" required="true"
							title="${titles['TTL_SELECT']} ${titles['TTL_TIPO_DOCUMENTO']}"
							requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
							styleClass="form-control-form-act-usua">
							<f:selectItem itemLabel="${titles['TTL_SELECT']}" itemDisabled="true"
								itemValue="#{null}" />
							<f:selectItems value="#{tiposDocumentoEntidad}" var="tipoDoc"
								itemLabel="#{tipoDoc.descripcion}" itemValue="#{tipoDoc}" />
							<p:ajax process="@this" update="@form"
								listener="#{desasociarUsuarioEntidadBean.limpiarDoc()}" />
							<f:validator validatorId="tipoDocumentoValidator" />
						</h:selectOneMenu>
						<p:message for="tipoDocumento" display="text" />
					</h:panelGroup>
				</div>
				<div class="col-md-6">
					<p:outputLabel value="${titles['TTL_NICK_NAME']}"
						for="numeroDocumento"
						styleClass="log-label form-label-formularios" />
					<h:panelGroup>
						<p:remoteCommand name="validarCedula"
							action="#{desasociarUsuarioEntidadBean.buscarPersona}"
							process="contains" update="contains" />
						<p:inputText id="numeroDocumento" required="true"
							requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
							styleClass="form-control-acti-usua" autocomplete="off"
							style="color:#333;"
							disabled="#{!desasociarUsuarioEntidadBean.entidadSeleccionada}"
							value="#{desasociarUsuarioEntidadBean.persona.numeroIdentificacion}"
							title="${titles['TTL_INGRESAR']} ${titles['TTL_NICK_NAME']} ${titles['TTL_TIPO_ALFANUMERICO']}"
							onkeydown="if (event.keyCode === 13) { validarCedula(); return false; }">
							<c:choose>
								<c:when
									test="${desasociarUsuarioEntidadBean.persona.tipoIdentificacionId.id == 42}">
									<f:validator validatorId="nickNameValidatorPassport" />
								</c:when>
								<c:otherwise>
									<f:validator validatorId="nickNameValidator" />
								</c:otherwise>
							</c:choose>
							<p:keyFilter regEx="/[A-Z0-9_]/i" />

						</p:inputText>
						<p:message for="numeroDocumento" display="text" />
					</h:panelGroup>
				</div>
			</div>
			<br /> <br />
			<div class="row" align="center">
				<p:commandButton value="${titles['TTL_SEARCH']}" id="btnBuscarUsuarioDesasociar"
					disabled="#{!desasociarUsuarioEntidadBean.entidadSeleccionada}"
					process="@this,tipoDocumento,numeroDocumento" update="frmPrincipal"
					styleClass="btn btn-primary"
					style="font-size: 1.5em!important; padding-left:7%!important; padding-right:7%!important; border-radius: 4px!important;"
					actionListener="#{desasociarUsuarioEntidadBean.buscarPersona()}" />
			</div>
			<p:spacer height="3" />
			<hr
				style="display: block; margin-top: 0.5em; margin-bottom: -1.4em; margin-left: auto; margin-right: auto; border: 0.5px solid #CCCCCC; width: 95%;" />
			<span
				style="font-size: 1.8em; font-weight: 500; color: #245379; background-color: #F3F3F3; margin-left: 0.8em; vertical-align: middle;">
				${titles['TTL_DATOS_USUARIO']} </span> <br /> <br />
			<div class="row">
				<div class="col-md-6">
					<p:outputLabel
						value="${titles['LBL_TRANSVERSAL_PERSONAS_PRIMER_NOMBRE']}"
						styleClass="form-label-formularios" />
					<p:inputText id="txtPrimerNombre" readonly="true"
						styleClass="form-control-acti-usua" autocomplete="off"
						value="#{desasociarUsuarioEntidadBean.persona.primerNombre}"
						
						 />
				</div>
				<div class="col-md-6">
					<p:outputLabel
						value="${titles['LBL_TRANSVERSAL_PERSONAS_SEGUNDO_NOMBRE']}"
						styleClass="form-label-formularios" />
					<p:inputText id="txtSegundoNombre" readonly="true"
						styleClass="form-control-acti-usua" autocomplete="off"
						value="#{desasociarUsuarioEntidadBean.persona.segundoNombre}"
						title="${titles['TTL_INGRESAR']} ${titles['LBL_TRANSVERSAL_PERSONAS_SEGUNDO_NOMBRE']} ${titles['TTL_TIPO_ALFANUMERICO']}"
						 />
				</div>
			</div>
			<br />
			<div class="row">
				<div class="col-md-6">
					<p:outputLabel
						value="${titles['LBL_TRANSVERSAL_PERSONAS_PRIMER_APELLIDO']}"
						styleClass="form-label-formularios" />
					<p:inputText id="txtPrimerApellido" readonly="true"
						styleClass="form-control-acti-usua" autocomplete="off"
						value="#{desasociarUsuarioEntidadBean.persona.primerApellido}" />
				</div>
				<div class="col-md-6">
					<p:outputLabel
						value="${titles['LBL_TRANSVERSAL_PERSONAS_SEGUNDO_APELLIDO']}"
						styleClass="form-label-formularios" />
					<p:inputText id="txtSegundoApellido" readonly="true"
						styleClass="form-control-acti-usua" autocomplete="off"
						value="#{desasociarUsuarioEntidadBean.persona.segundoApellido}" />
				</div>
			</div>
			<br /> <br />
			<div class="row" align="center">
				<div class="col-md-12">
					<div class="col-md-2"></div>
					<div class="col-md-4 media-btn-cancelar">
						<p:commandButton id="btnDesasociarUsuario" value="${titles['TTL_DESASOCIAR']}"
							styleClass="btn btn-primary"
							style="padding-left:10%!important;padding-right:10%!important; font-size:1.5em!important;border-radius:4px!important;margin-bottom:1%;"
							process="@this" update="panel"
							disabled="#{desasociarUsuarioEntidadBean.disableButton}"
							onclick="PF('confirmacion').show();" />
					</div>
					<div class="col-md-4">
						<p:commandButton value="${titles['TTL_CANCEL']}"
							resetValues="true" title="${titles['TTL_CANCEL']}" process="@this"
							update="contains" styleClass="btn btn-default"
							style="background:#D1D1D1!important;color:#2A89B5!important;padding-left:13%!important;padding-right:13%!important;font-size:1.5em!important;border-radius:4px!important;"
							actionListener="#{desasociarUsuarioEntidadBean.cancelar()}" />
					</div>
					<div class="col-md-2"></div>
				</div>
			</div>
			<p:dialog header="• ${titles['TTL_DESASOCIAR_USUARIO_ENTIDAD']} •"
				widgetVar="confirmacion" modal="true" closeOnEscape="false"
				draggable="false" closable="false" height="auto" resizable="false"
				style="background: #F1F1F1!important;opacity: 1!important;">
				<p:panel id="panel"
					style="background: #F1F1F1!important;opacity: 1!important;">
					<br />
					<div class="col-md-12" align="center">
						<p:outputLabel
							value="#{desasociarUsuarioEntidadBean.strMensajeDesasociar}"
							style="font-size:1.2em!important; color:#245279; font-weight: normal;margin-bottom: 1em;"
							escape="false" />
					</div>
					<hr
						style="display: block; margin-top: 1em; margin-bottom: 1em; margin-left: auto; margin-right: auto; border: 0.5px solid #CCCCCC; width: 95%;" />
					<div class="row" align="center">
						<div class="col-md-2"></div>
						<div class="col-md-4">
							<p:commandButton id="btnDesasociar" value="${titles['TTL_OK']}"
								styleClass="btn btn-primary"
								style="padding-left:10%!important;padding-right:10%!important;border-radius:4px!important;margin-bottom:1%;"
								process="@this contains" update="contains"
								actionListener="#{desasociarUsuarioEntidadBean.persist()}" />
						</div>
						<div class="col-md-4">
							<p:commandButton value="${titles['TTL_CANCEL']}"
								process="@this contains" update="contains"
								styleClass="btn btn-default"
								style="padding-left:9%!important;padding-right:9%!important;margin-bottom:1%;"
								onclick="PF('confirmacion').hide();" />
						</div>
						<div class="col-md-2"></div>
					</div>
				</p:panel>
			</p:dialog>
		</div>
		<div class="col-md-3"></div>
	</ui:define>
</ui:composition>