<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/resources/template/pageTemplate.xhtml">

	<f:metadata>
		<f:viewParam name="id"
			value='#{gestionarRolBean.id}' />
		<f:viewParam name="dialog"
			value='#{gestionarRolBean.dialog}' />
		<f:event type="preRenderView"
			listener='#{gestionarRolBean.retrieve}' />
		<f:event type="preRenderView"
			listener='#{gestionarRolBean.showDialog}' />
	</f:metadata>

	<ui:param name="pageTitle"
		value="${titles['TTL_ADMIN_SISTEMA_BREADCRUMB']}" />
	<ui:param name="pageSubtitle"
		value="Consultar Configuración Auditoría" />

	<ui:define name="main">
				<div class="row">
					<div class="col-md-12" align="center">
						
						<h:panelGroup>
							<h2 style="margin-top: 0.55%;">
								<p:outputLabel value="• Consultar/Asignar Permisos por Rol •"
									styleClass="page-subtitle" />
							</h2>
						</h:panelGroup>
					</div>
				</div>
				
		<p:outputPanel>
		
			<p:panel>
				<br />
   				<div class="row">
					<div class="col-md-12" style="text-align: center;">
						<p:outputLabel
							value="${titles['LBL_ROLES_MSG_ASIGNAR_PERMISOS_ROL']}"
						   	for="tablaAsignarPermisosRol"
							styleClass="advisor" />
						<p:outputLabel
							value="#{gestionarRolBean.rol.nombre.concat(' - ').concat(gestionarRolBean.rol.descripcionRol)}"
						   	for="tablaAsignarPermisosRol"
							styleClass="advisor" />
					</div>
				</div>
				<p:dataTable id="tablaAsignarPermisosRol" paginator="true" var="variable"
					value="#{gestionarRolBean.listaAsignarPermisosRol}" reflow="true" 
					emptyMessage="${messages['MSG_TABLAS_SIN_REGISTROS']}"
					rowIndexVar="rowIndex" rows="#{paginatorSize}" rowsPerPageTemplate="#{paginatorsSize}" >
					<p:column headerText="Nombre Tabla"
						style="word-wrap: break-word!important">
						<h:outputText value="#{variable.nombreTabla}" />
					</p:column>
					<p:column headerText="Descripción Tabla">
						<h:outputText value="#{variable.descripcionTabla}" />
					</p:column>
					<p:column headerText="Consultar"
						style="width:100px;text-align: center">
						<p:selectBooleanCheckbox value="#{variable.flgSelect}">
							<p:ajax update="tablaAsignarPermisosRol"
								listener="#{gestionarRolBean.cambioCheck(variable.flgSelect,variable.codTablaAuditoria)}" />
						</p:selectBooleanCheckbox>
					</p:column>
					<p:column headerText="Creación"
						style="width:100px;text-align: center">
						<p:selectBooleanCheckbox value="#{variable.flgInsert}"
							id="insertFLG">
							<p:ajax update="tablaAsignarPermisosRol"
								listener="#{gestionarRolBean.cambioCheck1(variable.flgInsert,variable.codTablaAuditoria)}" />
						</p:selectBooleanCheckbox>
					</p:column>
					<p:column headerText="Modificación"
						style="width:100px;text-align: center">
						<p:selectBooleanCheckbox value="#{variable.flgUpdate}"
							id="updateFLG">
							<p:ajax update="tablaAsignarPermisosRol"
								listener="#{gestionarRolBean.cambioCheck2(variable.flgUpdate,variable.codTablaAuditoria)}" />
						</p:selectBooleanCheckbox>
					</p:column>
					<p:column headerText="Eliminación"
						style="width:100px;text-align: center">
						<p:selectBooleanCheckbox value="#{variable.flgDelete}"
							styleClass="checkboxstyle">
							<p:ajax update="tablaAsignarPermisosRol"
								listener="#{gestionarRolBean.cambioCheck3(variable.flgDelete,variable.codTablaAuditoria)}" />
						</p:selectBooleanCheckbox>
					</p:column>
					<p:column style="width:100px;text-align: center"
						headerText="Ver Detalle">
						<a
							href="consultarDetalleAuditoriaConf.xhtml?id=#{variable.codTablaAuditoria}"
							class="btn btn-primary" style="text-aling: center"><span
							class="glyphicon glyphicon-view"></span>Detalle</a>
					</p:column>
				</p:dataTable>				
			</p:panel>
			<div class="row">
						<div class="col-md-12">
							<p:messages id="messages1" autoUpdate="true" showDetail="true"
								closable="true" globalOnly="true"
								style="font-family:Helvetica;text-align:center;font-size:1.2em!important;background-color:rgb(242,242,242); border-radius: 1em;padding-top:0" />
						</div>
					</div>
		</p:outputPanel>
		<br></br>
		<br></br>
		<p:outputPanel id="paneldetalle">
			<p:panel id="hijopaneldetalle"
				rendered="#{gestionarRolBean.habilitarPanelVerDetalle}">
				<div class="row row-background-white">
					<br /> <br />
					<hr class="hr-style hr-style-two" />
					<span class="span-style"> Detalle Configuración Auditoría </span> <br />
					<div class="row" align="right">
						<div class="col-md-12">
							<label class="form-label-formularios">${titles['TTL_REQUIRED']}</label>
						</div>
					</div>
					<div class="row" align="left">
						<div class="col-md-12">
							<div class="col-md-4">
								<h4 class="form-label-formularios">
									<p:outputLabel
										value="#{gestionarRolBean.auditoriasporClave.nombreTabla}">
									</p:outputLabel>
								</h4>

							</div>
						</div>
					</div>
					<br></br>
					<p:panelGrid>
						<div class="row">
							<div class="col-md-12">
								<p:outputLabel>
								</p:outputLabel>
								<div class="col-md-4">
									<p:outputLabel value="* Tipo Acción:"
										styleClass="log-label form-label-formularios" />
									<h:selectOneMenu id="tAccion" filter="false" required="false"
										value="#{gestionarRolBean.tipoAccion.id}"
										filterMatchMode="contains"
										styleClass="form-control-form-act-usua"
										style="width:90%!important;">
										<f:selectItem itemValue="#{null}"
											itemLabel="-- Seleccione Tipo Acción --" />
										<f:selectItems value="#{webUtils.accionesAuditoria}" />
									</h:selectOneMenu>
								</div>
								<div class="col-md-4">
									<p:outputLabel value="* Fecha Inicial:"
										styleClass="log-label form-label-formularios" />
									<p:calendar pattern="dd/MM/yyyy" />
								</div>
								<div class="col-md-4">
									<p:outputLabel value="* Fecha Final:"
										styleClass="log-label form-label-formularios" />
									<p:calendar pattern="dd/MM/yyyy" />
								</div>
							</div>
						</div>
						<br></br>
						<div class="row">
							<div class="col-md-12">
								<div class="col-md-5"></div>
								<div class="col-md-2">
									<p:commandButton value="Consultar" styleClass="btn btn-primary">
									</p:commandButton>
								</div>
								<div class="col-md-5"></div>
							</div>
						</div>
					</p:panelGrid>
				</div>
			</p:panel>
		</p:outputPanel>

		<br />
		<br />
	</ui:define>
</ui:composition>