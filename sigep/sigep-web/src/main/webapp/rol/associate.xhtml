<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	template="/resources/template/pageTemplate.xhtml">

	<f:metadata>
		<f:viewParam name="id" value="#{gestionarRolBean.id}" />
		<f:viewParam name="recursoId" value="#{gestionarRolBean.recursoId}" />
		<f:viewParam name="dialog" value="#{gestionarRolBean.dialog}" />
		<f:viewParam name="tipoIdentificacion"
			value='#{gestionarRolBean.tipoId}' />
		<f:viewParam name="numeroIdentificacion"
			value='#{gestionarRolBean.numeroId}' />
		<f:event listener="#{gestionarRolBean.retrieve}" type="preRenderView" />
		<f:event listener="#{gestionarRolBean.showDialog}" type="preRenderView" />
	</f:metadata>

	<ui:param name="pageTitle"
		value="${titles['TTL_ADMIN_SISTEMA_BREADCRUMB']}" />
	<ui:param name="pageSubtitle" value="${titles['TTL_ROLES_TITLE']}" />

	<ui:define name="main">
		<style>
.ui-selectonemenu-filter-container>.ui-icon {
	display: none;
}

td:nth-child(odd) {
	width: 2em !important;
}
</style>
		<div class="row">
			<div class="col-md-12" align="center">
				<h:panelGroup>
					<h2>
						<p:outputLabel value="• ${titles['TTL_ROLES_ASIGNAR']} •"
							styleClass="page-subtitle" style="color: #263948!important;" />
					</h2>
				</h:panelGroup>
			</div>
		</div>

		<div class="row row-background-white">
			<br /> <br />
			<div class="row">
				<div class="col-md-12" align="center">
					<p:outputLabel value="${titles['TTL_ROLES_ASIGNAR_SUBTITULO']}" styleClass="advisor" />
				</div>
			</div>
			<hr style="display: block; margin-top: 0.5em; margin-bottom: 0.5em; border: 0.5px solid #CCCCCC; width: 98%;" />
			<br />
			<div class="row">
				<div class="col-sm-12">
					<div class="col-md-4">
						<p:outputLabel value="${titles['TTL_TIPO_DOCUMENTO']}:"
							for="tipoDocumento" styleClass="log-label form-label-formularios" />
						<h:panelGroup>
							<h:selectOneMenu id="tipoDocumento"
								converter="tipoDocumentoConverter"
								value="#{gestionarRolBean.tipoDocumento}" var="t" filter="true"
								filterMatchMode="contains" required="true"
								title="${titles['TTL_SELECT']} ${titles['TTL_TIPO_DOCUMENTO']}"
								requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
								styleClass="form-control-form-act-usua">
								<f:selectItem itemLabel="${titles['TTL_SELECT']}" itemValue="#{null}" />
								<f:selectItems value="#{tiposDocumentoEntidad}" var="tipoDoc"
									itemLabel="#{tipoDoc.descripcion}" itemValue="#{tipoDoc}" />
								<p:ajax process="@this" update="@form"
									listener="#{gestionarRolBean.limpiarDoc()}" />
							</h:selectOneMenu>
							<p:message for="tipoDocumento" display="text" />
						</h:panelGroup>
					</div>
					<div class="col-md-4">
						<p:outputLabel value="${titles['TTL_NICK_NAME']}:"
							for="numeroDocumento"
							styleClass="log-label form-label-formularios" />
						<h:panelGroup>
							<p:remoteCommand name="validarCedula"
								process="@this numeroDocumento tipoDocumento"
								actionListener="#{gestionarRolBean.listener}" update="contains" />
							<p:inputText id="numeroDocumento" maxlength="15" required="true"
								styleClass="form-control-acti-usua" autocomplete="off"
								title="${titles['TTL_INGRESE']} ${titles['TTL_NICK_NAME']} ${titles['TTL_TIPO_ALFANUMERICO']}"
								requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
								value="#{gestionarRolBean.numeroDocumento}"
								onchange="validarCedula();"
								onkeypress="javascript:return window.event.keyCode != 13;">
								<c:choose>
									<c:when test="${gestionarRolBean.tipoDocumento.id == gestionarRolBean.TIPO_DOC_PASAPORTE}">
										<f:validator validatorId="nickNameValidatorPassport" />
									</c:when>
									<c:otherwise>
										<f:validator validatorId="nickNameValidator" />
									</c:otherwise>
								</c:choose>
								<p:keyFilter regEx="/[A-Z0-9_]/i" />
							</p:inputText>
							<p:message for="numeroDocumento" display="text" />
						</h:panelGroup>
					</div>
					<div class="col-md-4">
						<p:outputLabel value="${titles['LBL_NOMBRES_APELLIDOS']}:"
							for="nombres" styleClass="log-label form-label-formularios" />
						<p:inputText id="nombres"
							value="#{gestionarRolBean.nombreUsuario}" readonly="true"
							class="form-control-acti-usua" autocomplete="false">
						</p:inputText>
						<p:message for="nombres" display="text" />
					</div>
				</div>
			</div>
			<h:panelGroup id="panelFormularioUno"
				rendered="#{!gestionarRolBean.habilitarFormulario}">
				<div class="row">
					<div class="col-md-12">
						<div class="col-md-4">
							<p:outputLabel value="${titles['TTL_ROLES_COL1']}:"
								for="rolLista" styleClass="log-label form-label-formularios" />
							<h:selectOneMenu id="rolLista" converter="#{rolConverter}"
								value="#{gestionarRolBean.rol}" var="t" filter="false"
								filterMatchMode="contains" required="true"
								requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
								styleClass="form-control-form-act-usua"
								title="${titles['TTL_SELECT']} ${titles['TTL_ROLES_COL1']}"
								rendered="#{gestionarRolBean.rol.id == 0}">
								<f:selectItem itemValue="#{null}" itemLabel="${titles['TTL_SELECT']}" />
								<f:selectItems value="#{gestionarRolBean.listaRoles}"
									var="rolLista" itemLabel="#{rolLista.nombre}"
									itemValue="#{rolLista}" />
							</h:selectOneMenu>
							<h:panelGroup rendered="#{gestionarRolBean.rol.id > 0}">
								<br />
								<p:inputText id="rol" autocomplete="false" required="true"
									value="#{gestionarRolBean.rol.nombre}"
									class="form-control-acti-usua" disabled="true">
								</p:inputText>
								<p:message for="rol" display="text" />
							</h:panelGroup>
							<p:message for="rolLista" display="text" />
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12" align="center">
						<div class="col-md-5"></div>
						<div class="col-md-3">
							<p:commandButton value="${titles['TTL_ENTIDADES_USUARIO']}"
								rendered="#{gestionarRolBean.blnPermisoBtnSelectEnt}"
								id="btnSelecionarentidades" styleClass="btn btn-primary"
								process="@this rolLista" update="contains"
								actionListener="#{gestionarRolBean.abrirFormularioTabla}" />
						</div>
					</div>
				</div>
				<br />
				<br />

				<div class="row">
					<div class="col-md-12">
						<div class="col-md-4">
							<h:outputLabel
								value="${titles['TTL_ASIGNAR_RESPONSABLE_ENT_CODSIGEP']}:"
								for="codigoSigep" styleClass="log-label form-label-formularios" />
							<p:inputText id="codigoSigep" disabled="true"
								value="#{gestionarRolBean.codigoSigep}"
								onkeypress="return sololetras(event);" maxlength="2"
								class="form-control-acti-usua" autocomplete="false">
							</p:inputText>
						</div>
						<div class="col-sm-4">
							<h:outputLabel value="${titles['LBL_CT_NOMBRE_ENTIDAD']}:"
								for="nombreEntidad"
								styleClass="log-label form-label-formularios" />
							<p:inputText id="nombreEntidad" disabled="true"
								value="#{gestionarRolBean.nombreEntidad}"
								class="form-control-acti-usua" autocomplete="false">
							</p:inputText>
						</div>
						<div class="col-md-4">
							<p:outputLabel value="${titles['TTL_DEPENDENCIA_ESPECIAL']}:"
								for="dependencia" styleClass="log-label form-label-formularios" />
							<h:selectOneMenu id="dependencia"
								value="#{gestionarRolBean.dependencia}" filter="true"
								filterMatchMode="contains" required="false"
								requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
								styleClass="form-control-form-act-usua"
								title="${titles['TTL_SELECT']} ${titles['LBL_DEPENDENCIA']}">
								<f:selectItem itemValue="#{null}"
									itemLabel="${titles['TTL_SELECT']}" />
								<f:selectItems
									value="#{webUtils.getDependenciaEntidadEspecial(gestionarRolBean.getEntidadUsuario().getId())}" />
								<p:column>
									<h:outputText value="#{t.codDependenciaEntidad}" />
								</p:column>
								<p:column>
									<h:outputText value="#{t.nombreDependencia}" />
								</p:column>
							</h:selectOneMenu>
							<p:message for="dependencia" display="text" />
						</div>
					</div>

					<h:panelGroup id="panelDependencia">
						<div class="row">
							<div class="col-md-12">
								<div class="col-md-4">
									<p:outputLabel value="${titles['LBL_FECHA_INICIAL']}:"
										for="fechaInicio"
										styleClass="log-label form-label-formularios" />
									<p:calendar navigator="true" locale="es" readonlyInput="false"
										onkeypress="return false;" id="fechaInicio"
										pattern="#{fechaFormato}" yearRange="c-100:c+100"
										title="${titles['TTL_INGRESE']} ${titles['LBL_FECHA_INICIAL']}"
										value="#{gestionarRolBean.fechaIncio}"
										placeholder="${titles['LBL_FORMATO_FECHA']}" disabled="false"
										mindate="#{gestionarRolBean.today}">
										<p:ajax event="dateSelect" update="fechaFin" />
									</p:calendar>
									<p:message for="fechaInicio" display="text" />
								</div>

								<div class="col-md-4">
									<p:outputLabel value="${titles['LBL_FECHA_FIN_2']}:"
										for="fechaFin1" styleClass="log-label form-label-formularios" />
									<p:calendar id="fechaFin1" navigator="true"
										readonlyInput="false" onkeypress="return false;" mask="true"
										yearRange="#{rangoAnios}" mode="popup"
										placeholder="${titles['LBL_FORMATO_FECHA']}"
										converterMessage="#{messages.DLG_FORMATO_INVALIDO}"
										locale="#{lenguajeBean.localeCode}" effect="slideDown"
										value="#{gestionarRolBean.fechaFin}"
										title="${titles['TTL_SELECT']} ${titles['LBL_FECHA_FIN_2']}"
										pattern="#{fechaFormato}"
										mindate="#{gestionarRolBean.fechaIncio}">
										<f:attribute name="startDate"
											value="#{gestionarRolBean.fechaIncio}" />
										<f:attribute name="startDateName"
											value="${titles['LBL_FECHA_INICIAL']}" />
										<f:attribute name="endDateName"
											value="${titles['LBL_FECHA_FIN_2']}" />
										<f:validator validatorId="dateRangeValidator" />
									</p:calendar>
									<p:message for="fechaFin1" display="text" />
								</div>
							</div>
						</div>
					</h:panelGroup>
				</div>

				<br />
				<div class="row" align="center">
					<h:panelGroup>
						<div class="col-md-4"></div>
						<div class="col-md-2">
							<p:commandButton value="${titles['TTL_ASSOCIATE']}"
								process="@this rolLista dependencia fechaInicio fechaFin1"
								update="contains"
								action="#{gestionarRolBean.asociarUsuarioEntidad()}"
								styleClass="btn btn-primary">
							</p:commandButton>
						</div>
						<div class="col-md-2">
							<p:commandButton value="${titles['TTL_CANCEL']}"
								resetValues="true" process="@this" update="contains"
								actionListener="#{gestionarRolBean.cancelar()}"
								styleClass="btn btn-default"
								style="padding-right: 1.5em!important; padding-left: 1.5em!important; font-size: 1.4em!important" />
						</div>
					</h:panelGroup>
				</div>
			</h:panelGroup>
			<br />
			<h:panelGroup id="panelFormularioDos"
				rendered="#{gestionarRolBean.habilitarFormulario}">
				<div class="row">
					<div class="col-md-12">
						<p:scrollPanel mode="native" id="panelScroll">
							<p:dataTable id="tablaConsulta" style="width: 2000px"
								value="#{gestionarRolBean.lstEntidades}" var="entidad"
								paginator="true" rows="#{paginatorSize}" rowsPerPageTemplate="#{paginatorsSize}"
								reflow="true"
								selection="#{gestionarRolBean.entidadesSeleccionadas}"
								currentPageReportTemplate="{currentPage} ${titles['LBL_DE']} {totalPages}"
								paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
								emptyMessage="${messages['MSG_TABLAS_SIN_REGISTROS']}"
								rowKey="#{entidad.codEntidad}"
								rowSelectMode="checkbox">
								<p:ajax event="rowSelectCheckbox"
		                            process="@this" listener="#{gestionarRolBean.rowSelectListener}"/>
		                            
			                    <p:ajax event="rowSelect" 
			                        process="@this" listener="#{gestionarRolBean.rowSelectListener}"/>
			                            
			                    <p:ajax event="rowUnselectCheckbox"
		                            process="@this" listener="#{gestionarRolBean.rowUnselectListener}"/>
                            
			                    <p:ajax event="toggleSelect"
		                            process="@this" listener="#{gestionarRolBean.toggleSelected}" update= "@this"/>
								
								<p:column selectionMode="multiple"
			                              style="width:16px;text-align:center">
			                    </p:column>
								
								<p:column headerText="#{titles.TTL_COD_SIGEP}"
									sortBy="#{entidad.codigoSigep}" sortable="true"
									filterBy="#{entidad.codigoSigep}"  filterMatchMode="contains">
									<h:outputText value="#{entidad.codigoSigep}" />
								</p:column>
								<p:column headerText="${titles['LBL_CT_NOMBRE_ENTIDAD']}"
									sortBy="#{entidad.nombreEntidad}" sortable="true"
									filterBy="#{entidad.nombreEntidad}"  filterMatchMode="contains">
									<h:outputText value="#{entidad.nombreEntidad}" />
								</p:column>
								<p:column headerText="${titles.TTL_SIGLA}"
									sortBy="#{entidad.sigla}" sortable="true"
									filterBy="#{entidad.sigla}"  filterMatchMode="contains">
									<h:outputLabel value="#{entidad.sigla}" />
								</p:column>
								<p:column headerText="${titles.TTL_SECTOR}"
									sortBy="#{entidad.sectorAdministrativo}" sortable="true"
									filterBy="#{entidad.sectorAdministrativo}"  filterMatchMode="contains">
									<h:outputLabel value="#{entidad.codSectorAdministrativo}"
										converter="parametricaBgDecimalConverter" />
								</p:column>
								<p:column headerText="${titles['LBL_ORDEN']}"
									sortBy="#{entidad.orden}" sortable="true"
									filterBy="#{entidad.orden}"  filterMatchMode="contains">
									<h:outputLabel value="#{entidad.codOrden}"
										converter="parametricaBgDecimalConverter" />
								</p:column>
								<p:column headerText="${titles['LBL_CLASIFICACION_ORGANICA']}"
									sortBy="#{entidad.clasificacionOrganica}" sortable="true"
									filterBy="#{entidad.clasificacionOrganica}"  filterMatchMode="contains">
									<h:outputLabel value="#{entidad.codClasificacionOrganica}"
										converter="parametricaBgDecimalConverter" />
								</p:column>
								<p:column headerText="${titles['TTL_NATURALEZA_JURIDICA']}"
									sortBy="#{entidad.naturalezaJuridica}" sortable="true"
									filterBy="#{entidad.naturalezaJuridica}"  filterMatchMode="contains">
									<h:outputLabel value="#{entidad.codNaturaleza}"
										converter="parametricaBgDecimalConverter" />
								</p:column>
								<p:column headerText="${titles['TTL_DEPARTAMENTO_ENTIDAD']}"
									sortBy="#{entidad.departamento}" sortable="true"
									filterBy="#{entidad.departamento}"  filterMatchMode="contains">
									<h:outputLabel value="#{entidad.departamento}" />
								</p:column>
								<p:column headerText="${titles['TTL_ASESOR_DAFP']}"
									sortBy="#{entidad.asesor}" sortable="true"
									filterBy="#{entidad.asesor}"  filterMatchMode="contains">
									<h:outputLabel value="#{entidad.asesor}" />
								</p:column>
								<p:column headerText="${titles.TTL_DEPENDENCIA_ESPECIAL}">
									<h:selectOneMenu id="dependencia"
										value="#{entidad.codDependenciaEntidad}" filter="true"
										filterMatchMode="contains" required="false"
										requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
										styleClass="form-control-form-act-usua"
										style="font-size: 0.9em!important"
										title="${titles['TTL_SELECT']} ${titles['LBL_DEPENDENCIA']}">
										<f:selectItem itemValue="#{null}"
											itemLabel="${titles['TTL_SELECT']}" />
										<f:selectItems
											value="#{webUtils.getDependenciaEntidadEspecial(entidad.codEntidad)}" />
									</h:selectOneMenu>
								</p:column>
								<p:column headerText="${titles['LBL_FECHA_INICIAL']}:"
									style="font-size: 0.9em!important"
									sortBy="#{entidad.fechaI}" sortable="true">
									<p:calendar navigator="true" locale="es" readonlyInput="false"
										style="font-size: 0.9em!important" onkeypress="return false;"
										pattern="#{fechaFormato}" yearRange="c-100:c+100"
										title="${titles['TTL_INGRESE']} ${titles['LBL_FECHA_INICIAL']}"
										value="#{entidad.fechaI}"
										placeholder="${titles['LBL_FORMATO_FECHA']}" disabled="false"
										mindate="#{gestionarRolBean.today}">
										<p:ajax event="dateSelect" process="@this" />
									</p:calendar>
								</p:column>
								<p:column headerText="${titles['LBL_FECHA_FIN_2']}:"
									style="font-size: 0.9em!important"
									sortBy="#{entidad.fechaF}">
									<p:calendar id="fechaFin" navigator="true"
										readonlyInput="false" onkeypress="return false;" mask="true"
										yearRange="#{rangoAnios}" mode="popup"
										placeholder="${titles['LBL_FORMATO_FECHA']}"
										locale="#{lenguajeBean.localeCode}" effect="slideDown"
										value="#{entidad.fechaF}"
										title="${titles['TTL_SELECT']} ${titles['LBL_FECHA_FIN_2']}"
										pattern="#{fechaFormato}" mindate="#{t.fechaInicio}">
										<p:ajax event="dateSelect" process="@this" />
									</p:calendar>
								</p:column>
							</p:dataTable>
						</p:scrollPanel>
					</div>
				</div>
				<br />

				<div class="row" align="center">
					<h:panelGroup>
						<div class="col-md-4"></div>
						<div class="col-md-2" style="margin-bottom: 4%;">
							<p:commandButton value="${titles['TTL_ASSOCIATE']}"
								process="@this tablaConsulta rolLista " update="contains"
								action="#{gestionarRolBean.asignarRoles()}"
								styleClass="btn btn-primary"
								style="padding-left:17%!important;padding-right:17%!important; font-size:1.5em!important;">
							</p:commandButton>
						</div>
						
						<div class="col-md-2" style="margin-bottom: 4%;">
							<p:commandButton value="${titles['TTL_CANCEL']}"
								resetValues="true" process="@this" update="contains"
								actionListener="#{gestionarRolBean.cancelar()}"
								styleClass="btn btn-default"
								style="padding-left:15%!important;padding-right:15%!important;font-size:1.5em!important;" />
						</div>
						<div class="col-md-4"></div>
					</h:panelGroup>
				</div>
			</h:panelGroup>
			<br />

			<p:scrollPanel mode="native" id="panelScrollRol">
			<p:dataTable id="dataTableRolByUser" var="dataRol" paginator="true"
				rows="#{paginatorSize}" reflow="true"
				rowsPerPageTemplate="#{paginatorsSize}"
				style="width: 1500px"
				emptyMessage="${messages['MSG_TABLAS_SIN_REGISTROS']}"
				currentPageReportTemplate="{currentPage} ${titles['LBL_DE']} {totalPages}"
				paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
				value="#{gestionarRolBean.listaRolesByUser}">
				<p:column headerText="${titles['TTL_ROLES_COL1']}"
					style="word-wrap: break-word!important;font-size: 1em !important;" sortBy="#{dataRol.nombre}"
					filterBy="#{dataRol.nombre}"  filterMatchMode="contains">
					<h:outputText value="#{dataRol.nombre}" />
				</p:column>
				<p:column headerText="${titles['TTL_ROLES_COL2']}"
					style="word-wrap: break-word!important;font-size: 1em !important;" sortBy="#{dataRol.descripcionRol}"
					filterBy="#{dataRol.descripcionRol}"  filterMatchMode="contains">
					<h:outputText value="#{dataRol.descripcionRol}" />
				</p:column>
				<p:column headerText="${titles['TTL_CODIGO_SIGEP']}"
					style="word-wrap: break-word!important;font-size: 1em !important;" sortBy="#{dataRol.codigoSigep}"
					filterBy="#{dataRol.codigoSigep}"  filterMatchMode="contains">
					<h:outputText value="#{dataRol.codigoSigep}" />
				</p:column>
				<p:column headerText="${titles['LBL_CT_NOMBRE_ENTIDAD']}"
					style="word-wrap: break-word!important;font-size: 1em !important;" sortBy="#{dataRol.nombreEntidad}" 
					filterBy="#{dataRol.nombreEntidad}"  filterMatchMode="contains">
					<h:outputText value="#{dataRol.nombreEntidad}" />
				</p:column>
				<p:column headerText="${titles['TTL_ROLES_COL_DEPENDENCIA']}"
					style="word-wrap: break-word!important;font-size: 1em !important;" sortBy="#{dataRol.nombreDependencia}"
					filterBy="#{dataRol.nombreDependencia}"  filterMatchMode="contains">
					<h:outputText
						value="#{dataRol.nombreDependencia eq 'TTL_YES' ? titles.TTL_YES : titles.TTL_NO}" />
				</p:column>
				<p:column headerText="${titles['TTL_ROLES_COL_FECHA_INI']}"
					style="word-wrap: break-word!important;font-size: 1em !important;"
					sortBy="#{dataRol.fechaInicio}"
					filterBy="#{dataRol.fechaInicio}"  filterMatchMode="contains">
					<h:outputText value="#{dataRol.fechaInicio}">
						<f:convertDateTime pattern="#{fechaFormato}" />
					</h:outputText>
				</p:column>
				<p:column headerText="${titles['TTL_ROLES_COL_FECHA_FIN']}"
					style="word-wrap: break-word!important;font-size: 1em !important;"
					sortBy="#{dataRol.fechaFin}"
					filterBy="#{dataRol.fechaFin}"  filterMatchMode="contains">
					<h:outputText value="#{dataRol.fechaFin}">
						<f:convertDateTime pattern="#{fechaFormato}" />
					</h:outputText>
				</p:column>
				<p:column headerText="${titles['LBL_ACCIONES']}"
					style="opacity: 1!important; text-align: center!important;font-size: 1em !important;">
					<p:commandButton title="${titles['LBL_ROLES_MODIFICAR_FECHA']}"
						icon="icon-edit" styleClass="icon-btn"
						update="frmPrincipal:editarFecha" process="@this"
						actionListener="#{gestionarRolBean.seleccionarModificarFechas(dataRol)}">
					</p:commandButton>
					<p:commandButton title="${titles['LBL_ELIMINAR']}"
						icon="icon-delete" process="@this" styleClass="icon-btn"
						onclick="PF('eliminarRol').show();">
						<f:setPropertyActionListener value="#{dataRol}"  target="#{gestionarRolBean.rolAsignado}" />
						<f:setPropertyActionListener value="#{dataUser}" target="#{gestionarRolBean.usuarioSeleccionado}" />
					</p:commandButton>
				</p:column>
			</p:dataTable>
			</p:scrollPanel>
		</div>

		<!-- ### INICIO ### MODAL PARA REDIRECCIONAR A ACTIVAR USUARIO  -->
		<div id="dialogActivarUsuario" class="modal fade" role="dialog">
			<div class="modal-dialog" style="top: 25%; width: 34.5%;">
				<div class="modal-content">
					<div class="modal-header" align="center">
						<h4 class="modal-title">•
							#{messages.MSG_CUENTA_USUARIO_NO_EXISTE} •</h4>
					</div>
					<div class="modal-body">
						<p:panel id="panelDialogActivarUsuario"
							style="background: transparent!important;">
							<div class="col-md-12" align="center"
								style="margin-top: 3%; margin-bottom: 3%;">
								<p:outputLabel
									value="#{messages.MSG_USUARIO_ASOCIADO_NO_ENCONTRADO}"
									style="font-size:1.5em!important; color:#245379; font-weight: normal;"
									escape="false" />
								<p:outputLabel value="#{messages.MSG_USUARIO_ASOCIADO_ACTIVAR}"
									style="font-size:1.5em!important; color:#245379; font-weight: normal;"
									escape="false" />
							</div>
							<hr
								style="border-top: 1.5px solid rgb(196, 196, 196); width: 95%; margin-top: 15px; margin-bottom: 15px;" />
							<div class="row" align="center">
								<div class="col-md-2"></div>
								<div class="col-md-4">
									<p:commandButton id="btnActivarUsuario"
										value="${titles['TTL_OK']}" styleClass="btn btn-primary"
										style="padding-left:15%!important;padding-right:15%!important; font-size:1.4em!important; padding-top:0!important; margin-bottom:1.5%;"
										process="@this" update="@this"
										action="#{gestionarRolBean.redireccionarActivarUsuario()}"
										onclick="$('#dialogActivarUsuario').modal('hide')" />
									<p:message for="btnActivarUsuario" display="text" />
								</div>
								<div class="col-md-4">
									<p:commandButton value="${titles['TTL_CANCEL']}"
										process="@this" update="@this" styleClass="btn btn-default"
										style="padding-left:15%!important;padding-right:15%!important; font-size:1.4em!important; padding-top:0!important; margin-bottom:1.5%;"
										onclick="$('#dialogActivarUsuario').modal('hide')" />
								</div>
								<div class="col-md-2"></div>
							</div>
							<br />
						</p:panel>
					</div>
				</div>
			</div>
		</div>
		
		<!-- ### INICIO ### MODAL PARA REDIRECCIONAR A ACTIVAR USUARIO  -->
		<div id="dialogActivarUsuarioInactivo" class="modal fade" role="dialog">
			<div class="modal-dialog" style="top: 25%; width: 34.5%;">
				<div class="modal-content">
					<div class="modal-header" align="center">
						<h4 class="modal-title">•
							#{messages.MSG_ROL_USINAC} •</h4>
					</div>
					<div class="modal-body">
						<p:panel id="panelDialogActivarUsuarioA"
							style="background: transparent!important;">
							<div class="col-md-12" align="center"
								style="margin-top: 3%; margin-bottom: 3%;">
								<p:outputLabel
									value="#{messages.MSG_ROL_USINAC_ACTIVAR}"
									style="font-size:1.5em!important; color:#245379; font-weight: normal;"
									escape="false" />
							</div>
							<hr
								style="border-top: 1.5px solid rgb(196, 196, 196); width: 95%; margin-top: 15px; margin-bottom: 15px;" />
							<div class="row" align="center">
								<div class="col-md-2"></div>
								<div class="col-md-4">
									<p:commandButton id="btnActivarUsuarioA"
										value="${titles['TTL_OK']}" styleClass="btn btn-primary"
										style="padding-left:15%!important;padding-right:15%!important; font-size:1.4em!important; padding-top:0!important; margin-bottom:1.5%;"
										process="@this" update="@this"
										action="#{gestionarRolBean.redireccionarActivarUsuario()}"
										onclick="$('#dialogActivarUsuario').modal('hide')" />
									<p:message for="btnActivarUsuario" display="text" />
								</div>
								<div class="col-md-4">
									<p:commandButton value="${titles['TTL_CANCEL']}"
										process="@this" update="@this" styleClass="btn btn-default"
										style="padding-left:15%!important;padding-right:15%!important; font-size:1.4em!important; padding-top:0!important; margin-bottom:1.5%;"
										onclick="$('#dialogActivarUsuarioInactivo').modal('hide')" />
								</div>
								<div class="col-md-2"></div>
							</div>
							<br />
						</p:panel>
					</div>
				</div>
			</div>
		</div>
		
		
		<!-- ### INICIO CAMBIO DE FECHAS -->
		<p:dialog widgetVar="editarFecha" width="600px" id="editarFecha"
			modal="true" draggable="false" closable="false" height="250"
			resizable="false" responsive="true"
			header="• #{titles.LBL_ROLES_MODIFICAR_FECHA} •">
			<br />
			<br />
			<p:panel id="panelConfirmacionEditarFecha"
				style="background: transparent!important;">
				<div class="row" align="center">
					<p:outputLabel style="font-size:15px;color:#235379;"
						value="#{messages.MSG_ROL_FECHA}">
					</p:outputLabel>
				</div>
				<br />
				<br />
				<div class="row">
					<div class="col-md-12">
						<div class="col-md-6">
							<p:outputLabel value="${titles['LBL_FECHA_INICIAL']}:"
								for="fechaInicio1" styleClass="log-label form-label-formularios" />
							<p:calendar id="fechaInicio1"
								title="${titles['TTL_INGRESE']} ${titles['LBL_FECHA_INICIAL']}"
								mask="true" yearRange="#{rangoAnios}" navigator="true"
								placeholder="${titles['LBL_FORMATO_FECHA']}"
								mindate="#{fechaSistema}" pattern="#{fechaFormato}"
								required="true" effect="slideDown"
								requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
								converterMessage="#{messages.DLG_FORMATO_INVALIDO}"
								locale="#{lenguajeBean.localeCode}" icon="fa fa-calendar"
								value="#{gestionarRolBean.rolAsignado.fechaInicio}">
								<p:ajax event="dateSelect" update="fechaFin" />
								<p:ajax event="change" update="fechaFin" />
							</p:calendar>
							<h:outputText>
								<f:convertDateTime pattern="#{fechaFormato}" />
							</h:outputText>
							<p:message for="fechaInicio1" display="text" />
						</div>

						<div class="col-md-6">
							<p:outputLabel value="${titles['LBL_FECHA_FIN_2']}:"
								for="fechaFin" styleClass="log-label form-label-formularios" />
							<p:calendar id="fechaFin"
								title="${titles['TTL_INGRESE']} ${titles['TTL_ROLES_COL_FECHA_FIN']}"
								mask="true" yearRange="#{rangoAnios}" navigator="true"
								placeholder="${titles['LBL_FORMATO_FECHA']}"
								pattern="#{fechaFormato}" effect="slideDown"
								requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
								converterMessage="#{messages.DLG_FORMATO_INVALIDO}"
								locale="#{lenguajeBean.localeCode}" icon="fa fa-calendar"
								mindate="#{gestionarRolBean.rolAsignado.fechaInicio}"
								value="#{gestionarRolBean.rolAsignado.fechaFin}">
								<f:attribute name="startDate"
									value="#{gestionarRolBean.rolAsignado.fechaInicio}" />
								<f:attribute name="startDateName"
									value="${titles['LBL_FECHA_INICIAL']}" />
								<f:attribute name="endDateName"
									value="${titles['LBL_FECHA_FIN_2']}" />
								<f:validator validatorId="dateRangeValidator" />
							</p:calendar>
							<h:outputText>
								<f:convertDateTime pattern="#{fechaFormato}" />
							</h:outputText>
							<p:message for="fechaFin" display="text" />
						</div>
					</div>

					<div class="col-md-12" align="center">
						<br />
						<div class="col-md-2"></div>
						<div class="col-md-4">
							<p:commandButton id="btnModificarRolAsignado"
								value="${titles['TTL_OK']}" styleClass="btn btn-primary"
								style="padding-left:15%!important;padding-right:15%!important; font-size:1em!important; padding-top:0!important; margin-bottom:1.5%;"
								process=" panelConfirmacionEditarFecha"
								update=" panelConfirmacionEditarFecha  dataTableRolByUser "
								actionListener="#{gestionarRolBean.modificarRolAsignadoUsuario(gestionarRolBean.rolAsignado)}" />
						</div>
						<div class="col-md-4">
							<p:commandButton value="${titles['TTL_CANCEL']}" process="@this"
								update="@this" styleClass="btn btn-default"
								style="padding-left:15%!important;padding-right:15%!important; font-size:1em!important; padding-top:0!important; margin-bottom:1.5%;"
								onclick="PF('editarFecha').hide();" />
						</div>
					</div>
					<br /> <br />
				</div>
			</p:panel>
		</p:dialog>
		<!-- ### FIN CAMBIO DE FECHAS -->

		<!-- ### INICIO ### MODAL PARA CONFIRMAR LA ELIMINACION DE LA ASIGNACION DEL ROL AL USUARIO  -->
		<p:dialog header="• ${titles['TTL_ROLES_ELIMINAR']} •"
			widgetVar="eliminarRol" id="eliminarRol" minHeight="200" modal="true"
			resizable="false" closeOnEscape="false" responsive="true"
			draggable="false" closable="false" appendTo="@(body)" width="550">
			<p:panel id="panelConfirmacionEliminarRol"
				style="background: transparent!important;">
				<div class="col-md-12" align="center"
					style="margin-top: 3%; margin-bottom: 3%;">
					<p:outputLabel value="#{messages.MSG_USUARIO_ELIMINAR_ROL_ASIGNADO}"
						style="font-size:1.5em!important; color:#245379; font-weight: normal;" escape="false" />
				</div>
				<hr style="border-top: 1.5px solid rgb(196, 196, 196); width: 95%; margin-top: 15px; margin-bottom: 15px;" />
				<div class="row" align="center">
					<div class="col-md-2"></div>
					<div class="col-md-4">
						<p:commandButton id="btnEliminarRolAsignado"
							value="${titles['TTL_OK']}" styleClass="btn btn-primary"
							style="padding-left:15%!important;padding-right:15%!important; font-size:1.4em!important; padding-top:0!important; margin-bottom:1.5%;"
							process="@this" update="contains dataTableRolByUser"
							actionListener="#{gestionarRolBean.eliminarRolAsignadoUsuario(gestionarRolBean.rolAsignado)}"
							onclick="PF('eliminarRol').show();" />
						<p:message for="btnEliminarRolAsignado" display="text" />
					</div>
					<div class="col-md-4">
						<p:commandButton value="${titles['TTL_CANCEL']}" process="@this"
							update="@this" styleClass="btn btn-default"
							style="padding-left:15%!important;padding-right:15%!important; font-size:1.4em!important; padding-top:0!important; margin-bottom:1.5%;"
							onclick="PF('eliminarRol').hide();" />
					</div>
					<div class="col-md-2"></div>
				</div>
				<br />
			</p:panel>
		</p:dialog>
	</ui:define>
</ui:composition>