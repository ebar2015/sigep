<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/resources/template/pageTemplate.xhtml">
	
	<ui:param name="pintarMiga" value="3" />
	<ui:param name="pageTitle" value="${titles['TTL_ADMON_SISTEMA']}" />
	<ui:param name="pageSubtitle1" value="${titles['TTL_ADMON_MAESTROS']}" />
	<ui:param name="pageSubtitle2" value="${titles['TTL_ADMON_MAESTRO_ENFERMEDAD']}" />
	<ui:define name="main">
		<div class="row">
			<div class="col-md-12" align="center">
				<h2><p:outputLabel value="• #{titles.LBL_PARAMETRICA} #{titles.TTL_ENFERMEDAD} •" styleClass="page-subtitle" /></h2>
			</div>
		</div>
		<div class="row" style="background: transparent !important;">
			<p:spacer height="2" />
			<div class="col-md-12">
				<div class="col-md-3" style="margin-right: 5.3em;"></div>
				<div class="col-md-4">
					<p:autoComplete id="NombreEnfermedad" maxlength="255"
						placeholder="${titles['TTL_NOMBRE_ENFERMEDAD']}"
						title="${titles['TTL_INGRESE']} ${titles['TTL_NOMBRE_ENFERMEDAD']} ${titles['TTL_TIPO_ALFANUMERICO']}"
						onkeypress="return anular(event)" style="background-color: white"
						process="@this" scrollable="true" scrollHeight="150"
						completeMethod="#{enfermedadBean.listaEnfermedad}"
						value="#{enfermedadBean.nombreEnfermedad}">
						<p:ajax event="itemSelect" listener="#{enfermedadBean.filtrarEnfermedad()}"
							update ="dataTableEnfermedades"/>
					</p:autoComplete>
					<p:message for="NombreEnfermedad" display="text" />
				</div>
				<div class="col-md-1 btn-search"
					style="margin-left: -31px !important;">
					<p:commandButton value="#{titles.TTL_SEARCH}"
						id="btnAdmonBuscarParametro" styleClass="btn btn-primary"
						style="font-size: 1.5em!important; border-radius: 0px!important;background-color: #2a89b5!important; margin-right: -11%;"
						action="#{enfermedadBean.filtrarEnfermedad()}"
						process="@this NombreEnfermedad"
						update="NombreEnfermedad dataTableEnfermedades" />
				</div>
				<div class="col-md-4"></div>
			</div>
		</div>
		<br />
		<div class="row row-background-white" style="margin-left: 0px; padding-top: 2em;">
		<p:spacer height="4" />
		<span class="span-style">#{titles.TTL_ENFERMEDAD}</span> <hr class="hr-style hr-style-two" />
		<br /> <br />
		<div class="col-md-12" style="text-align: right;">
			<div style="padding-right: 1%; display: inline-block">
				<p:commandButton id="btnAgregarEnfermedad"
					value="${titles['LBL_ADD_NEW']}" icon="fa fa-fw fa-plus-circle"
					process="@this" styleClass="btn btn-transparent"
					actionListener="#{enfermedadBean.nuevaEnfermedad()}"
					immediate="true"
					update="panelEnfermedad"
					oncomplete="window.location.href='#frmPrincipal:panelEnfermedad';">
					<p:resetInput target="frmPrincipal:panelEnfermedad" />
				</p:commandButton>
			</div>
			<div
				style="padding: 0px 0px 0px 5px; margin-left: 1px; display: inline-block; vertical-align: bottom;">
				<label class="form-label-formularios"
					style="line-height: 1.7; margin-right: 10px;"> </label>
			</div>
		</div>
		<div class="col-md-12"
			style="padding-left: 2% !important; padding-right: 2% !important;">
			<p:dataTable id="dataTableEnfermedades" paginator="true" reflow="true"
				rowIndexVar="rowIndex"
				rows="#{paginatorSize}" rowsPerPageTemplate="#{paginatorsSize}"
				value="#{enfermedadBean.lstEnfermedad}"
				var="dataEnfermedad"
				currentPageReportTemplate="{currentPage} ${titles['LBL_DE']} {totalPages}"
				paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
				emptyMessage="${messages['MSG_TABLAS_SIN_REGISTROS']}">
				<p:column headerText="${titles['TTL_CODIGO_ENFERMEDAD']}"
					style="word-wrap: break-word!important;"
					sortBy="#{dataEnfermedad.codCie10}"
					filterBy="#{dataEnfermedad.codCie10}"  filterMatchMode="contains">
					<h:outputText value="#{dataEnfermedad.codCie10}" />
				</p:column>
				
				<p:column headerText="${titles['TTL_NOMBRE_ENFERMEDAD']}"
					style="word-wrap: break-word!important;"
					sortBy="#{dataEnfermedad.nombreEnfermedad}"
					filterBy="#{dataEnfermedad.nombreEnfermedad}"  filterMatchMode="contains">
					<h:outputText value="#{dataEnfermedad.nombreEnfermedad}" />
				</p:column>
				<p:column headerText="#{titles.TTL_ACTIVO}"
					style="word-wrap: break-word!important;text-align: center!important;"
					sortBy="#{dataEnfermedad.flgActivo}">
					<p:selectBooleanCheckbox
						value="#{dataEnfermedad.flgActivo == 1 ? true : false}"
						disabled="true" />
				</p:column>
				<p:column headerText="${titles['LBL_ACCIONES']}"
					style="opacity: 1!important; text-align:center!important; padding: 1%!important;">
					<p:commandButton id="btnEditarEnfermedad"
						title="${titles['TTL_EDIT']}" icon="icon-edit"
						styleClass="icon-btn btn-view-data" 
						immediate="true"
						process="@this"
						update="frmPrincipal:panelEnfermedad"
						oncomplete="window.location.href='#frmPrincipal:panelEnfermedad';"
						actionListener="#{enfermedadBean.modificarEnfermedad(dataEnfermedad)}">
					</p:commandButton>					
					
					<p:commandButton id="btnConsultarEnfermedad"
						title="${titles['TTL_VER_DETALLE']}" icon="icon-view"
						styleClass="icon-btn btn-view-data" process="@this"
						update="frmPrincipal:panelEnfermedad"
						actionListener="#{enfermedadBean.consultarEnfermedad(dataEnfermedad)}"
						oncomplete="window.location.href='#frmPrincipal:panelEnfermedad';">
					</p:commandButton>
					<p:commandButton id="btnEliminarEnfermedad"
						title="${titles['BTN_ELIMINAR']}" icon="icon-delete" process="@this"
						styleClass="icon-btn" rendered="false">
						 <p:ajax process="@this" listener="#{enfermedadBean.solicitarConfirmacionEliminarEnfermedad(dataEnfermedad)}"/>	
					</p:commandButton>
				</p:column>
			</p:dataTable>
		</div>

	</div>
	<br />
	<p:outputPanel id="panelEnfermedad">
		<p:panel id="subpanelEnfermedad"
			widgetVar="subpanelEnfermedad"
			rendered="#{enfermedadBean.habilitaFormulario}">
			<div class="row row-background-white">
				<br />
				<p:spacer height="2" />
				<hr class="hr-style hr-style-two" />
				<c:if test="#{!enfermedadBean.lbEsConsulta and !enfermedadBean.lbModificacion}">
					<span style="font-size: 2em; font-weight: 500; color: #245379; background-color: white; margin-left: 1em;">
						${titles['TTL_AGREGAR_ENFERMEDAD']}
					</span> 
					<br /> <br />
					<div class="row" align="right">
						<div class="col-md-12">
						<label class="form-label-formularios">${titles['TTL_REQUIRED']}</label>
						</div>
					</div>
					<div class="row">
					<div class="col-md-12">
						<div class="col-md-4"></div>
					</div>
					<hr class="hr-style" />
					<br />
				</div>
				</c:if>
				<c:if test="#{!enfermedadBean.lbEsConsulta and enfermedadBean.lbModificacion}">
					<span style="font-size: 2em; font-weight: 500; color: #245379; background-color: white; margin-left: 1em;">
						${titles['TTL_MODIFICAR_ENFERMEDAD']}
					</span> 
					<br /> <br />
					<div class="row" align="right">
						<div class="col-md-12">
						<label class="form-label-formularios">${titles['TTL_REQUIRED']}</label>
						</div>
					</div>
					<div class="row">
					<div class="col-md-12">
						<div class="col-md-4"></div>
					</div>
					<hr class="hr-style" />
					<br />
				</div>
				</c:if>
				<c:if test="#{enfermedadBean.lbEsConsulta and !enfermedadBean.lbModificacion}">
					<span style="font-size: 2em; font-weight: 500; color: #245379; background-color: white; margin-left: 1em;">
						${titles['TTL_ENFERMEDAD']}
					</span> 
					<br /><br /> <br />
				</c:if>
				<p:panel>
					<div class="row">
						<div class="col-md-12">
							<div class="col-md-6">
								<p:outputLabel value="${titles['TTL_CODIGO_ENFERMEDAD']}"
									styleClass="log-label form-label-formularios" for="IdEnfermedad" />
								<p:inputText id="IdEnfermedad" required="true" disabled="#{enfermedadBean.lbEsConsulta or enfermedadBean.lbModificacion}"
								           requiredMessage="#{messages.DLG_VALOR_REQUERIDO}" maxlength="8"
											value="#{enfermedadBean.enfermedadSeleccionada.codCie10}" 
											title="${titles['TTL_INGRESE']} ${titles['TTL_CODIGO_ENFERMEDAD']} ${titles['TTL_TIPO_ALFANUMERICO']}">
								<f:validator validatorId="textAlfaCaractEspecialValidator" />
								<f:validator validatorId="maxByteLengthValidator" />
								</p:inputText>
								<p:message for="IdEnfermedad" display="text" />
							</div>
							
							<div class="col-md-6">
								<p:outputLabel value="${titles['TTL_NOMBRE_ENFERMEDAD']}"
									styleClass="log-label form-label-formularios" for="nombreEnfermedadInput"/>
								<p:inputText id="nombreEnfermedadInput" required="true" disabled="#{enfermedadBean.lbEsConsulta}"
											requiredMessage="#{messages.DLG_VALOR_REQUERIDO}" maxlength="256"
											value="#{enfermedadBean.enfermedadSeleccionada.nombreEnfermedad}"
											title="${titles['TTL_INGRESE']} ${titles['TTL_NOMBRE_ENFERMEDAD']} ${titles['TTL_TIPO_ALFANUMERICO']}" >
								<f:validator validatorId="textAlfaCaractEspecialValidator" />
								<f:validator validatorId="maxByteLengthValidator" />
								</p:inputText>
								<p:message for="nombreEnfermedadInput" display="text" />
							</div>
						</div>
						<div class="col-md-12">
							<div class="col-md-4">
								<p:outputLabel value="#{titles.TTL_ACTIVO}:" for="activoEnfermedad"
									styleClass="log-label form-label-formularios" />
								<br />
								<p:selectBooleanCheckbox required="true" id="activoEnfermedad"
									disabled="#{enfermedadBean.lbEsConsulta}"
									requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
									title="${titles['TTL_SELECT']} ${titles['TTL_ACTIVO']}"
									value="#{enfermedadBean.blnFlgActivo}">
								</p:selectBooleanCheckbox>
								<p:message for="activoEnfermedad" display="text" />
							</div>
						</div>
						</div>
	
				</p:panel>
				<div class="row" align="center" style="margin-top:4.3em!important">
					<div class="col-md-4"></div>
					<div class="col-md-2" style="margin-bottom: 2%;">
						<p:panel id="idpanelGuardarEnfermedad"
							style="padding: 0%;">
							<c:if test="#{!enfermedadBean.lbEsConsulta}">
								<p:commandButton value="${titles['TTL_SAVE']}"
									process="frmPrincipal:panelEnfermedad"
									update="panelEnfermedad dataTableEnfermedades"
									actionListener="#{enfermedadBean.guardarEnfermedad()}"
									styleClass="btn btn-primary"
									style="font-size: 1.5em!important; padding-left: 1.5em!important; padding-right: 1.5em!important;" />
							</c:if>
							<c:if test="#{enfermedadBean.lbEsConsulta}">
								<p:commandButton value="${titles['TTL_OK']}"
									process="frmPrincipal:panelEnfermedad"
									update="panelEnfermedad dataTableEnfermedades"
									actionListener="#{enfermedadBean.aceptarConsulta()}"
									styleClass="btn btn-primary"
									style="font-size: 1.5em!important; padding-left: 1.5em!important; padding-right: 1.5em!important;" />
							</c:if>
						</p:panel>
					</div>
					
					<div class="col-md-2" style="margin-bottom: 2%;">
						<p:commandButton value="${titles['TTL_CANCEL']}"
							styleClass="btn btn-default btn-update-disable"
							process="@this" 
							rendered="#{!enfermedadBean.lbEsConsulta}"
							style="border:0px;padding-left:11.5%!important;padding-right:11.5%!important; font-family:Helveltica; 
							font-size:1.5em!important; padding-top:0!important;"
							onclick="PF('dlg2').show();" >
							<p:resetInput target="frmPrincipal:panelEnfermedad" />
						</p:commandButton>
					</div>
					<div class="col-md-4"></div>
				</div>
				
				<br />
			</div>
		</p:panel>
	</p:outputPanel>


		<p:dialog header="• ${titles['TTL_MENSAJE_IMPORTANTE']} •"
			widgetVar="dlg2" modal="true"  minHeight="300" draggable="false"
			closable="false" appendTo="@(body)">

			<br />
			<div class="row" style="text-align: justify; padding: 0% 3%;"
				align="center">
				<center>
					<h5>#{enfermedadBean.strMensajeConfirmacion}</h5>
				</center>
			</div>
			<div class="row" align="center">
				<div class="col-md-3"></div>
				<div class="col-md-3" style="margin-bottom: 2%;">
					<p:commandButton value="#{titles.LBL_SI}" process="@this"
						styleClass="btn btn-primary"
						actionListener="#{enfermedadBean.accionConfirmada()}"
						style="padding-left:10%!important;padding-right:10%!important;font-size:1.5em!important;"
						onclick="PF('dlg2').hide();"
						update="frmPrincipal:panelEnfermedad frmPrincipal:dataTableEnfermedades" />
				</div>
				<div class="col-md-3" style="margin-bottom: 2%;">
					<p:commandButton value="#{titles.TTL_NO}"
						styleClass="btn btn-default"
						onclick="PF('dlg2').hide();">
					</p:commandButton>
				</div>
				<div class="col-md-3"></div>
			</div>
		</p:dialog>


		<p:dialog header="• ${titles['TTL_MENSAJE_IMPORTANTE']} •"
			widgetVar="dlgEliminarnEnfermedad" width="680px" modal="true"
			resizable="false" closeOnEscape="false" responsive="true"
			draggable="false" closable="false">
			<br />
			<div class="row" style="text-align: justify; padding: 0% 3%;"
				align="center">
				<center>
					<h5>#{enfermedadBean.strMensajeConfirmacionEliminacion}</h5>
				</center>
			</div>
			<br />
			<div class="row" align="center">
				<div class="col-md-3"></div>
				<div class="col-md-3" style="margin-bottom: 2%;">
					<p:commandButton value="#{titles.LBL_SI}" process="@this"
						styleClass="btn btn-primary"
						style="padding-left:10%!important;padding-right:10%!important;font-size:1.5em!important;"
						action="#{enfermedadBean.accionConfirmada()}"
						onclick="PF('dlgEliminarnEnfermedad').hide();"
						update="frmPrincipal:panelEnfermedad frmPrincipal:dataTableEnfermedades" />
				</div>
				<div class="col-md-3" style="margin-bottom: 2%;">
					<p:commandButton value="#{titles.TTL_NO}" process="@this"
						styleClass="btn btn-default"
						style="padding-left:9%!important;padding-right:9%!important;font-size:1.5em!important;"
						onclick="PF('dlgEliminarnEnfermedad').hide();">
					</p:commandButton>
				</div>
				<div class="col-md-3"></div>
			</div>
			<br />
		</p:dialog>

	</ui:define>
		
</ui:composition>