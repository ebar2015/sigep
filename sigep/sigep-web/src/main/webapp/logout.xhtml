<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/resources/template/pageTemplate.xhtml">

	<f:metadata>
		<f:event type="preRenderView" listener="#{resultadoPreguntaBean.abrirDialogo()}"  />
	</f:metadata>
	
	<ui:param name="pageTitle" value="${titles['TTL_HOME']}" />
	<ui:param name="pageSubtitle" value="${titles['TTL_HOME']}" />
	
	<ui:define name="main">

		<!-- Inicia Consultar Pregunta Opinion -->
		<div id="DialogGenerarPreguntaOpinion" class="modal fade"
			role="dialog">
			<div class="modal-dialog modal-dialog-2" style="top: 25%; width: 45%;">
				<div class="modal-content" >
					<div class="modal-body">
						<p:outputPanel id="panelConsultarPreguntaOpinion">
							<p:panel id="subpanelConsultarPreguntaOpinion" rendered="#{resultadoPreguntaBean.habilitarPanelDialogoPregunta}"
								style="background: transparent!important;">
								<div class="row">
									<div class="col-md-12" align="center">
										<p:outputLabel value="${messages['MSG_PREGUNTA_OPINION_SOLICITUD']}" styleClass="advisor" />
									</div>
								</div>
								<hr
									style="display: block; margin-top: 0.5em; margin-bottom: 0.5em; border: 0.5px solid #CCCCCC; width: 98%;" />
								<br />
								<div class="row">
									<div class="col-md-12" align="center">
										<p:outputLabel id="mostrarPregunta" disabled="true"
											styleClass="text-label"
											value="#{resultadoPreguntaBean.preguntaRandom}" />
									</div>
								</div>
								<br />
								<div class="row">
									<div class="col-md-12" align="center">
										<p:rating id="calificacionPregunta" cancel="false"
											value="#{resultadoPreguntaBean.resultadoPregunta.puntaje}"
											required="true"
											requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
											style="opacity: 1!important;" />
										<p:message for="calificacionPregunta" display="text" />
									</div>
								</div>
								
								<div class="row">
									<div class="col-md-12">
										<p:outputLabel value="Comentario:" for="comentario"
											styleClass="log-label form-label-formularios" />
										<p:inputTextarea id="comentario" rows="4" cols="33"
											maxlength="200"
											styleClass="form-control-acti-usua form-control"
											style="resize: none;overflow-x: hidden;word-wrap: break-word!important;"
											value="#{resultadoPreguntaBean.resultadoPregunta.comentario}" />
										<p:message for="comentario" display="text" />
									</div>
								</div>
								<br /><br />
								<div class="row" align="center">
									<div class="col-md-12">
										<div class="col-md-2"/>
										<div class="col-md-4">
											<p:commandButton id="enviar" value="${titles['TTL_SEND']}"
												onclick=" if($('.ui-rating-star-on').length > 0){$(this).closest('.ui-outputpanel').hide();$('.label-opinion').fadeIn('slow');}"
												styleClass="btn btn-primary" validateClient="true"
												style="    padding-left: 2.5em!important; padding-right: 2.5em!important;"
												process="panelConsultarPreguntaOpinion"
												update=" panelConsultarPreguntaOpinion @this"
												actionListener="#{resultadoPreguntaBean.guardarResultadoPregunta}" />
										</div>
										<div class="col-md-3">
											<p:commandButton id="btnNoContestar"
												value="${titles['LBL_PREGUNTA_OPINION_NO_CONTESTAR']}"
												styleClass="btn btn-default"
												validateClient="false"
												process="@this"
												update="panelConsultarPreguntaOpinion @this"
												actionListener="#{resultadoPreguntaBean.cerrarSesion()}">
											</p:commandButton>
										</div>
									</div>
								</div>
							</p:panel>
						</p:outputPanel>
						<div class="label-opinion" style="display:none;">
							<h3 class="label-opinion">Gracias por su respuesta</h3>
						</div>
						
					</div>
				</div>
			</div>
		</div>
		<!-- Finaliza Consultar Pregunta Opinion -->
	</ui:define>
</ui:composition>