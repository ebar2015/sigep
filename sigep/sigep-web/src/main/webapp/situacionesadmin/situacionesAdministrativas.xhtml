<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/resources/template/pageTemplate.xhtml">

	<ui:param name="pageTitle" value="${titles['TTL_INFORMACIONEMPLEOS']}" />
	<ui:param name="pageSubtitle"
		value="${titles['TTL_SITUACIONESADMINISTRATIVAS']}" />

	<ui:define name="main">
		<script>
		$("#btnCancelarAccion").on("click",function(event){ 
		     event.prevenDefault(); 
		     $('#panelAccionSA')[0].reset(); 
		});
		</script>
		
		<script>
			function onBtnContinuarClicked() {
				const hidden = $('[id$="accionRealizarDialog"]').attr("aria-hidden");
				const value = hidden === 'true' ? 'false' : 'true';
				$('[id$="accionRealizarDialog"]').attr("aria-hidden", value);
			}
		</script>

		<!-- Titulo -->
		<div class="row">
			<div class="col-md-12" align="center">
				<h2>
					<p:outputLabel
						value="• ${titles['TTL_SITUACIONES_ADMINISTRATIVAS']} •"
						styleClass="page-subtitle" />
				</h2>
			</div>
		</div>
		<div class="row row-background-white">
			<br /> <br />
			<p:panel id="panelBuscarServPublico">
				<p:remoteCommand name="enterDown"
					action="#{situacionesAdministrativasBean.mostrarTablaFuncionario()}"
					process="panelBuscarServPublico" update="contains" />
				<hr class="hr-style hr-style-two" />
				<span class="span-style">
					${titles['TTL_BUSCAR_SERV_PUBLICO']} </span>
				<br />
				<br />
				<div class="row">
					<div class="col-md-12">
						<div class="col-md-4">
							<p:outputLabel for="tipoDocumento"
								styleClass="log-label form-label-formularios"
								value="${titles['TTL_TIPO_DOCUMENTO']}:" />
							<p:selectOneMenu id="tipoDocumento"
								filter="true" filterMatchMode ="contains"
								value="#{situacionesAdministrativasBean.codTipoIdentificacionBuscar}"
								styleClass="form-control-form-act-usua">
								<f:selectItem itemLabel="#{titles.TTL_SELECT}" itemValue="#{null}" />
								<f:selectItems value="#{webUtils.tiposDeIdentificacion}" />
							</p:selectOneMenu>
						</div>
						<div class="col-md-4">
							<p:outputLabel for="numeroDocumento"
								value="${titles['TTL_NICK_NAME']}:"
								styleClass="log-label form-label-formularios" />
							<p:inputText id="numeroDocumento" autocomplete="false"
								maxlength="50"
								value="#{situacionesAdministrativasBean.numeroIdentificacionBuscar}"
								class="form-control-acti-usua"
								onkeydown="if (event.keyCode === 13) { enterDown(); return false; }">
								<f:validator validatorId="maxByteLengthValidator" />
							</p:inputText>
							<p:message for="numeroDocumento" display="text" />
						</div>
						<div class="col-md-4">
							<p:outputLabel for="primerNombre"
								value="${titles['LBL_TRANSVERSAL_PERSONAS_PRIMER_NOMBRE']}:"
								styleClass="log-label form-label-formularios" />
							<p:inputText id="primerNombre" autocomplete="false"
								maxlength="50"
								value="#{situacionesAdministrativasBean.primerNombreBuscar}"
								class="form-control-acti-usua"
								onkeydown="if (event.keyCode === 13) { enterDown(); return false; }">
								<f:validator validatorId="maxByteLengthValidator" />
							</p:inputText>
						</div>
					</div>
				</div>
				<br />
				<div class="row">
					<div class="col-md-12">
						<div class="col-md-4">
							<p:outputLabel for="segundoNombre"
								value="${titles['LBL_TRANSVERSAL_PERSONAS_SEGUNDO_NOMBRE']}:"
								styleClass="log-label form-label-formularios" />
							<p:inputText id="segundoNombre" autocomplete="false"
								maxlength="50"
								value="#{situacionesAdministrativasBean.segundoNombreBuscar}"
								class="form-control-acti-usua"
								onkeydown="if (event.keyCode === 13) { enterDown(); return false; }">
								<f:validator validatorId="maxByteLengthValidator" />
							</p:inputText>
						</div>
						<div class="col-md-4">
							<p:outputLabel for="primerApellido"
								value="${titles['LBL_TRANSVERSAL_PERSONAS_PRIMER_APELLIDO']}:"
								styleClass="log-label form-label-formularios" />
							<p:inputText id="primerApellido" autocomplete="false"
								maxlength="50"
								value="#{situacionesAdministrativasBean.primerApellidoBuscar}"
								class="form-control-acti-usua"
								onkeydown="if (event.keyCode === 13) { enterDown(); return false; }">
								<f:validator validatorId="maxByteLengthValidator" />
							</p:inputText>
						</div>
						<div class="col-md-4">
							<p:outputLabel for="segundoApellido"
								value="${titles['LBL_TRANSVERSAL_PERSONAS_SEGUNDO_APELLIDO']}:"
								styleClass="log-label form-label-formularios" />
							<p:inputText id="segundoApellido" autocomplete="false"
								maxlength="50"
								value="#{situacionesAdministrativasBean.segundoApellidoBuscar}"
								class="form-control-acti-usua"
								onkeydown="if (event.keyCode === 13) { enterDown(); return false; }">
								<f:validator validatorId="maxByteLengthValidator" />
							</p:inputText>
						</div>
					</div>
				</div>
				<br />
				<br />
				<div class="row" align="center">
					<div class="col-md-3"></div>
					<div class="col-md-3" style="margin-bottom: 2%;">
						<p:commandButton id="btnBuscarServidorPublicoSA" update="frmPrincipal:panelSitAdmin"
							process="panelBuscarServPublico"
							actionListener="#{situacionesAdministrativasBean.mostrarTablaFuncionario()}"
							styleClass="btn btn-primary" value="#{titles.TTL_SEARCH}"
							oncomplete="window.location.href='#frmPrincipal:panelSitAdmin'"
							style="font-size: 1.5em!important; padding-left:15%!important; padding-right:15%!important;" />
					</div>
					<div class="col-md-3" style="margin-bottom: 3%;">
						<p:commandButton id="btnCancelarB" value="${titles['TTL_CANCEL']}"
							actionListener="#{situacionesAdministrativasBean.cancelarBusquedaFuncP()}"
							process="@this" update="panelBuscarServPublico panelSitAdmin"
							styleClass="btn btn-default" resetValues="true"
							style="padding-left:10.5%!important;padding-right:10.5%!important;font-size:1.5em!important; padding-top:0!important;" />
					</div>
					<div class="col-md-3"></div>
				</div>
			</p:panel>
		</div>
		<br />
		<br />
		<!--Tabla Resultados de busqueda -->
		<h:panelGroup id="panelSitAdmin">
			<p:panel id="subPanelSitAdmin" widgetVar="subPanelSitAdmin"
				rendered="#{situacionesAdministrativasBean.habilitarFormulario}">

				<div class="row row-background-white">
					<br /> <br />
					<hr class="hr-style hr-style-two" />
					<span class="span-style">#{titles.TTL_RESULTADO_BUSQUEDA}</span> <br /> <br />
					<div class="col-md-12"
						style="padding-right: 2% !important; padding-left: 2% !important; margin-bottom: 3%;">
						<p:panel id="panelTablaResultado" widgetVar="panelTablaResultado"
							style="background: transparent;">
							<p:dataTable id="tablaFunc" var="dataFunc" reflow="true"
								selection="#{situacionesAdministrativasBean.persona}"
								rowKey="#{dataFunc.codPersona}"
								value="#{situacionesAdministrativasBean.listaFuncionario}"
								emptyMessage="${messages['MSG_TABLAS_SIN_REGISTROS']}"
								paginator="true"
								rows="#{paginatorSize}"
								rowsPerPageTemplate="#{paginatorsSize}"
								currentPageReportTemplate="{currentPage} ${titles['LBL_DE']} {totalPages}"
								paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}">

								<p:column headerText="#{titles.TTL_TIPO_DOCUMENTO}"
									style="word-wrap: break-word!important;"
									sortBy="#{dataFunc.nombreTipoDocuento}" sortable="true">
									<h:outputText value="#{dataFunc.nombreTipoDocuento}" />
								</p:column>
								<p:column headerText="#{titles.TTL_NICK_NAME}"
									style="word-wrap: break-word!important;"
									sortBy="#{dataFunc.numeroIdentificacion}" sortable="true">
									<h:outputText value="#{dataFunc.numeroIdentificacion}" />
								</p:column>
								<p:column
									headerText="${titles['LBL_TRANSVERSAL_PERSONAS_PRIMER_NOMBRE']}"
									style="word-wrap: break-word!important;"
									sortBy="#{dataFunc.primerNombre}" sortable="true">
									<h:outputText value="#{dataFunc.primerNombre}" />
								</p:column>
								<p:column
									headerText="${titles['LBL_TRANSVERSAL_PERSONAS_SEGUNDO_NOMBRE']}"
									style="word-wrap: break-word!important;"
									sortBy="#{dataFunc.segundoNombre}" sortable="true">
									<h:outputText value="#{dataFunc.segundoNombre}" />
								</p:column>
								<p:column
									headerText="${titles['LBL_TRANSVERSAL_PERSONAS_PRIMER_APELLIDO']}"
									style="word-wrap: break-word!important;"
									sortBy="#{dataFunc.primerApellido}" sortable="true">
									<h:outputText value="#{dataFunc.primerApellido}" />
								</p:column>
								<p:column
									headerText="${titles['LBL_TRANSVERSAL_PERSONAS_SEGUNDO_APELLIDO']}"
									style="word-wrap: break-word!important;"
									sortBy="#{dataFunc.segundoApellido}" sortable="true">
									<h:outputText value="#{dataFunc.segundoApellido}" />
								</p:column>
								<p:column headerText="${titles['TTL_SELECT']}"
									selectionMode="single" style="width:16px;text-align:center">
								</p:column>
							</p:dataTable>
						</p:panel>
					</div>
					<br /> <br />
					<div class="row" align="center">
						<div class="col-md-3"></div>
						<div class="col-md-3" style="margin-bottom: 3%;">
							<p:commandButton id="btnContinuar" value="${titles['TTL_OK']}"
								process="panelSitAdmin"
								actionListener="#{situacionesAdministrativasBean.verAccion(situacionesAdministrativasBean.persona.codPersona)}"
								styleClass="btn btn-primary"
								oncomplete="onBtnContinuarClicked()"
								style="padding-left:12%!important;padding-right:12%!important;font-size:1.5em!important; padding-top:0!important;">
							</p:commandButton>
						</div>
						<div class="col-md-3" style="margin-bottom: 3%;">
							<p:commandButton id="btnCancelar" value="${titles['TTL_CANCEL']}"
								actionListener="#{situacionesAdministrativasBean.cancelarBusquedaFuncP()}"
								process="@this" update="panelBuscarServPublico panelSitAdmin"
								styleClass="btn btn-default" resetValues="true"
								style="padding-left:10.5%!important;padding-right:10.5%!important;font-size:1.5em!important; padding-top:0!important;" />
						</div>
						<div class="col-md-3"></div>
					</div>
				</div>
			</p:panel>
		</h:panelGroup>

		<!-- Modal accion a realizar -->
		<p:dialog header="• ${titles['LBL_ACCIONES']} •" id="accionRealizarDialog"
			minHeight="300" widgetVar="accionRealizarDialog" modal="true"
			resetValues="true" resizable="false" closeOnEscape="false"
			draggable="false" closable="false" responsive="true">
			<p:panel id="panelAccionSA"
				style="background: transparent !important;">
				<div class="row" align="center">
					<div class="col-md-12" style="margin-top: 3%; margin-bottom: 3%;">
						<p:outputLabel for="selectAccion"
							value="${titles['TTL_BIENES_RENTAS_MENSAJE_INICIO']}"
							styleClass="log-label form-label-formularios" />
						<br />
						<h:selectOneMenu id="selectAccion"
							value="#{situacionesAdministrativasBean.accion}" required="true"
							requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
							styleClass="form-control-form-act-usua">
							<f:selectItem itemLabel="#{titles.TTL_SELECT}" itemValue="#{null}" />
							<f:selectItem itemLabel="#{titles.TTL_GESTIONAR_SA}" itemValue="gestionsarSA" />
							<f:selectItem itemLabel="#{titles.LBL_CONSULTAR_SITUACIONES_ADMINISTRATIVAS}" itemValue="consultarSA" />
						</h:selectOneMenu>
						<p:message for="selectAccion" display="text" />
					</div>
				</div>
				<hr class="hr-style-modales" />
				<div class="row" align="center">
					<div class="col-md-2"></div>
					<div class="col-md-4">
						<p:commandButton id="btnConfirmarAccion" process="panelAccionSA"
							update="panelAccionSA"
							actionListener="#{situacionesAdministrativasBean.mostrarFormAccion()}"
							value="${titles['TTL_TO_CONTINUE']}" styleClass="btn btn-primary" />
					</div>
					<div class="col-md-4">
						<p:commandButton id="btnCancelarAccion" update="panelAccionSA"
							process="@this" resetValues="true"
							actionListener="#{situacionesAdministrativasBean.cancelarAccion()}"
							value="${titles['TTL_CANCEL']}" styleClass="btn btn-default" />
					</div>
					<div class="col-md-2"></div>
				</div>
				<br />
			</p:panel>
		</p:dialog>
	</ui:define>

</ui:composition>