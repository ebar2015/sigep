<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
<h:outputStylesheet>
	.ui-widget-overlay{
		position:absolute!important;
	}
</h:outputStylesheet>
<h:panelGroup>

	<f:event listener="#{reporteBean.validateForm}" type="postValidate" />
	<p:importEnum
		type="co.gov.dafp.sigep2.util.xml.reporte.config.TipoDato"
		var="PFTipoDato" />
	<p:importEnum
		type="co.gov.dafp.sigep2.util.xml.reporte.config.FormatoReporte"
		var="PFFormatoReporte" />
	<p:importEnum
		type="co.gov.dafp.sigep2.util.xml.reporte.config.FormaConsulta"
		var="PFFormaConsulta" />
	<p:importEnum
		type="co.gov.dafp.sigep2.util.xml.reporte.config.CalificadorComparacion"
		var="PFCalificador" />

	<div class="row">
		<div class="col-md-12" align="center">
			<h:panelGroup>
				<h2>
					<h:panelGroup
						rendered="#{reporteBean.recursoId eq 'GestionarReporteConsultarTag'}">
						<p:outputLabel
							value="${titles['TTL_SUB_TRANSVERSAL_PLANTILLA_VISTA_PREVIA']}"
							styleClass="page-subtitle" style="color: #263948!important;" />
						<br />
					</h:panelGroup>
					<p:outputLabel value="• #{reporteBean.xml.nombre}•"
						styleClass="page-subtitle" style="color: #263948!important;" />
				</h2>
			</h:panelGroup>
		</div>
	</div>
	<div class="col-md-2"></div>
	<div class="panel-body form-horizontal cuadrito col-md-12"
		style="margin: auto !important; padding-right: 0px !important; padding-left: 0px !important; padding-top: 12px !important; padding-bottom: 25px !important; background-color: white;">
		<!-- Formulario -->
		<h:panelGroup id="parametros" styleClass="row" layout="block">
			<ui:repeat value="#{reporteBean.parametros}" var="parametro">
				<h:panelGroup layout="block" styleClass="col-md-3"
					rendered="#{parametro.rendered}">
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="intParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_INTEGER.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="doubleParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DECIMAL.value() || parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERCENT.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="dateParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="periodParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERIOD.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="dateStringParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_STRING.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="dateLargeParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_LARGE.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="firstDayAnioParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_FIRST_DAY_ANIO.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="lastDayAnioParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LAST_DAY_ANIO.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="monthParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_MONTH.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="trimesterParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TRIMESTER.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="semesterParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_SEMESTER.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="anioParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_ANIO.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="stringParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_STRING.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="queryParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="csvParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CSV.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="queryOpParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY_OP.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="csvOpParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CSV_OP.value()}" />
					<p:outputLabel styleClass="log-label form-label-formularios"
						for="booleanParameter" value="#{parametro.label}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_BOOLEAN.value()}" />


					<p:selectOneMenu id="calificadorParametroNumerico"
						title="${titles['TTL_SELECT']} ${titles['LBL_TRANSVERSAL_PLANTILLA_XML_PARAMETRO_CALIFICADOR']}"
						value="#{parametro.configuracionParametro.calificadorComparacion}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DECIMAL.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_INTEGER.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERCENT.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY_OP.value()}"
						filter="true" filterMatchMode="contains">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{PFCalificador.TTL_REPORTES_IGUAL}"
							noSelectionOption="true" />
						<f:selectItems var="calificador" value="#{calificadoresNumericos}"
							itemLabel="#{titles[calificador]}" itemValue="#{calificador}" />
						<p:ajax event="change" process="@this" update="@this" />
					</p:selectOneMenu>
					<p:selectOneMenu id="calificadorParametroFecha"
						title="${titles['TTL_SELECT']} ${titles['LBL_TRANSVERSAL_PLANTILLA_XML_PARAMETRO_CALIFICADOR']}"
						value="#{parametro.configuracionParametro.calificadorComparacion}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_ANIO.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_LARGE.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_FIRST_DAY_ANIO.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LAST_DAY_ANIO.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_STRING.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_MONTH.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_SEMESTER.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TRIMESTER.value() or parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERIOD.value()}"
						filter="true" filterMatchMode="contains">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{PFCalificador.TTL_REPORTES_IGUAL}"
							noSelectionOption="true" />
						<f:selectItems var="calificador" value="#{calificadoresFechas}"
							itemLabel="#{titles[calificador]}" itemValue="#{calificador}" />
						<p:ajax event="change" process="@this" update="@this" />
					</p:selectOneMenu>
					<p:selectOneMenu id="calificadorParametroCadena"
						title="${titles['TTL_SELECT']} ${titles['LBL_TRANSVERSAL_PLANTILLA_XML_PARAMETRO_CALIFICADOR']}"
						value="#{parametro.configuracionParametro.calificadorComparacion}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_STRING.value()}"
						filter="true" filterMatchMode="contains">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{PFCalificador.TTL_REPORTES_IGNORAR}"
							noSelectionOption="true" />
						<f:selectItems var="calificador" value="#{calificadoresCadenas}"
							itemLabel="#{titles[calificador]}" itemValue="#{calificador}" />
						<p:ajax event="change" process="@this" update="@this" />
					</p:selectOneMenu>

					<p:inputText required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_INTEGER.value()}"
						id="intParameter" maxlength="38" value="#{parametro.value}"
						decimalPlaces="0" decimalSeparator="" thousandSeparator=""
						styleClass="form-control-form-act-usua-acti-usua">
					</p:inputText>

					<p:inputNumber id="doubleParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DECIMAL.value() || parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERCENT.value()}"
						maxValue="9999999999999.99" value="#{parametro.value}"
						decimalPlaces="2" decimalSeparator="." thousandSeparator=","
						styleClass="form-control-form-act-usua-acti-usua">
						<f:validateDoubleRange minimum="1" />
					</p:inputNumber>

					<p:calendar mask="true" id="dateParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE.value()}"
						yearRange="#{rangoAnios}" navigator="true"
						pattern="#{fechaFormato}" value="#{parametro.value}"
						locale="#{lenguajeBean.localeCode}"
						icon="fa fa-calendar">
					</p:calendar>

					<p:calendar mask="true" id="periodParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERIOD.value()}"
						yearRange="#{rangoAnios}" navigator="true"
						pattern="#{periodoFormato}" value="#{parametro.value}"
						locale="#{lenguajeBean.localeCode}" 
						icon="fa fa-calendar">
					</p:calendar>

					<p:calendar mask="true" id="dateStringParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_STRING.value()}"
						yearRange="#{rangoAnios}" navigator="true"
						pattern="#{fechaFormato}" value="#{parametro.value}"
						locale="#{lenguajeBean.localeCode}" icon="fa fa-calendar">
					</p:calendar>

					<p:calendar mask="true" id="dateLargeParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_LARGE.value()}"
						yearRange="#{rangoAnios}" navigator="true"
						pattern="#{fechaHoraFormato}" value="#{parametro.value}"
						locale="#{lenguajeBean.localeCode}" icon="fa fa-calendar">
					</p:calendar>

					<p:calendar mask="true" id="firstDayAnioParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_FIRST_DAY_ANIO.value()}"
						yearRange="#{rangoAnios}" navigator="true"
						pattern="#{fechaHoraFormato}" value="#{parametro.value}"
						mindate="#{primerDiaAnio}" locale="#{lenguajeBean.localeCode}"
						icon="fa fa-calendar">
						<f:attribute name="minDate" value="#{primerDiaAnio}" />
						<f:validator validatorId="minDateValidator" />
					</p:calendar>

					<p:calendar mask="true" id="lastDayAnioParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LAST_DAY_ANIO.value()}"
						yearRange="#{rangoAnios}" navigator="true"
						pattern="#{fechaHoraFormato}" value="#{parametro.value}"
						maxdate="#{ultimoDiaAnio}" locale="#{lenguajeBean.localeCode}"
						icon="fa fa-calendar">
						<f:attribute name="maxDate" value="#{ultimoDiaAnio}"
							styleClass="form-control-form-act-usua" />
						<f:validator validatorId="maxDateValidator" />
					</p:calendar>

					<p:selectOneMenu id="monthParameter" value="#{parametro.value}"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						varStatus="loop"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_MONTH.value()}"
						filter="true" filterMatchMode="contains" var="t"
						styleClass="form-control-form-act-usua-form-act-usua">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{null}" itemDisabled="#{parametro.required}" />
						<c:forEach items="#{meses}" var="origen" varStatus="loop">
							<f:selectItem itemValue="#{loop.index + 1}" itemLabel="#{origen}" />
						</c:forEach>
						<p:column>
							<h:outputText value="#{t}" />
						</p:column>
					</p:selectOneMenu>

					<p:selectOneMenu id="trimesterParameter" value="#{parametro.value}"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TRIMESTER.value()}"
						filter="true" filterMatchMode="contains" var="t"
						styleClass="form-control-form-act-usua-form-act-usua">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{null}" itemDisabled="#{parametro.required}" />
						<f:selectItems value="#{trimestres}" var="origen"
							itemValue="#{origen}" itemLabel="#{origen}" />
						<p:column>
							<h:outputText value="#{t}" />
						</p:column>
					</p:selectOneMenu>

					<p:selectOneMenu id="semesterParameter" value="#{parametro.value}"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_SEMESTER.value()}"
						filter="true" filterMatchMode="contains" var="t"
						styleClass="form-control-form-act-usua-form-act-usua">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{null}" itemDisabled="#{parametro.required}" />
						<f:selectItems value="#{semestres}" var="origen"
							itemValue="#{origen}" itemLabel="#{origen}" />
						<p:column>
							<h:outputText value="#{t}" />
						</p:column>
					</p:selectOneMenu>

					<p:selectOneMenu id="anioParameter" value="#{parametro.value}"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_ANIO.value()}"
						filter="true" filterMatchMode="contains" var="t"
						styleClass="form-control-form-act-usua-form-act-usua">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{null}" itemDisabled="#{parametro.required}" />
						<f:selectItems value="#{anios}" var="origen" itemValue="#{origen}"
							itemLabel="#{origen}" />
						<p:column>
							<h:outputText value="#{t}" />
						</p:column>
					</p:selectOneMenu>

					<p:inputText id="stringParameter" value="#{parametro.value}"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_STRING.value()}"
						styleClass="form-control-form-act-usua-acti-usua"
						autocomplete="off">
					</p:inputText>

					<p:selectOneMenu id="queryParameter" value="#{parametro.value}"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY.value()}"
						filter="true" filterMatchMode="contains" var="t"
						styleClass="form-control-form-act-usua">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{null}" itemDisabled="#{parametro.required}" />
						<f:selectItems
							value="#{reporteBean.getListaQuery(parametro.source)}"
							var="origen" itemValue="#{origen}" itemLabel="#{origen.key}" />
						<p:column>
							<h:outputText value="#{t.key}" />
						</p:column>
					</p:selectOneMenu>

					<p:selectOneMenu id="csvParameter" value="#{parametro.value}"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CSV.value()}"
						filter="true" filterMatchMode="contains" var="t"
						styleClass="form-control-form-act-usua-form-act-usua">
						<f:selectItem itemLabel="${titles['TTL_SELECT']}"
							itemValue="#{null}" itemDisabled="#{parametro.required}" />
						<f:selectItems
							value="#{reporteBean.getListaCSV(parametro.source)}" var="origen"
							itemValue="#{origen}" itemLabel="#{origen.key}" />
						<p:column>
							<h:outputText value="#{t.key}" />
						</p:column>
					</p:selectOneMenu>

					<p:panelGrid columnClasses="component" columns="1"
						captionClass="component"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY_OP.value()}">
						<p:selectOneRadio id="queryOpParameter" value="#{parametro.value}"
							required="#{parametro.required}"
							requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
							rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY_OP.value()}"
							columns="1" styleClass="form-control-form-act-usua">
							<f:selectItems
								value="#{reporteBean.getListaQuery(parametro.source)}"
								var="origen" itemValue="#{origen.key}" itemLabel="#{origen}" />
						</p:selectOneRadio>
					</p:panelGrid>

					<p:panelGrid columnClasses="component" columns="1"
						captionClass="component"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CSV_OP.value()}">
						<p:selectOneRadio id="csvOpParameter" value="#{parametro.value}"
							required="#{parametro.required}"
							requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
							rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CSV_OP.value()}"
							columns="1" styleClass="form-control-form-act-usua">
							<f:selectItems
								value="#{reporteBean.getListaCSV(parametro.source)}"
								var="origen" itemValue="#{origen.key}" itemLabel="#{origen}" />
						</p:selectOneRadio>
					</p:panelGrid>

					<!-- Boolean data type -->
					<h:panelGroup
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_BOOLEAN.value()}">
						<br />
					</h:panelGroup>
					<p:selectOneRadio id="booleanParameter"
						required="#{parametro.required}"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}"
						value="#{parametro.value}"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_BOOLEAN.value()}"
						layout="responsive" columns="2">
						<f:selectItem
							itemLabel="${titles['TTL_REPORTES_FORMA_TIPO_DATO_BOOLEAN_VERDADERO']}"
							itemValue="true" />
						<f:selectItem
							itemLabel="${titles['TTL_REPORTES_FORMA_TIPO_DATO_BOOLEAN_FALSO']}"
							itemValue="false" />
						<f:selectItem
							itemLabel="${titles['TTL_REPORTES_FORMA_TIPO_DATO_BOOLEAN']}"
							itemValue="nodata" />
					</p:selectOneRadio>

					<p:message for="intParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_INTEGER.value()}" />
					<p:message for="doubleParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DECIMAL.value() || parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERCENT.value()}" />
					<p:message for="dateParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE.value()}" />
					<p:message for="periodParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERIOD.value()}" />
					<p:message for="dateStringParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_STRING.value()}" />
					<p:message for="dateLargeParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_LARGE.value()}" />
					<p:message for="firstDayAnioParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_FIRST_DAY_ANIO.value()}" />
					<p:message for="lastDayAnioParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LAST_DAY_ANIO.value()}" />
					<p:message for="monthParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_MONTH.value()}" />
					<p:message for="trimesterParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TRIMESTER.value()}" />
					<p:message for="semesterParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_SEMESTER.value()}" />
					<p:message for="anioParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_ANIO.value()}" />
					<p:message for="stringParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_STRING.value()}" />
					<p:message for="queryParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY.value()}" />
					<p:message for="csvParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CSV.value()}" />
					<p:message for="queryOpParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_QUERY_OP.value()}" />
					<p:message for="csvOpParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CSV_OP.value()}" />
					<p:message for="booleanParameter" display="text"
						rendered="#{parametro.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_BOOLEAN.value()}" />
				</h:panelGroup>
			</ui:repeat>
			<br />
		</h:panelGroup>

		<!-- DataTable  -->
		<br />
		<h:panelGroup>
			<div class="row row-background-white">
				<br />
				<div class="col-md-12" align="right">
					<h:panelGroup
						rendered="#{plantillaBean.recursoId ne 'GestionarReporteConsultarTag' and plantillaBean.xml.formaConsulta eq PFFormaConsulta.TTL_REPORTES_FORMA_CONSULTA_LOCAL}">
						<p:commandButton id="cancelBtn" value="${titles['TTL_CANCEL']}"
							title="${titles['TTL_CANCEL']}" process="@this" update="@form"
							styleClass="btn btn-transparent" style="padding: 0% !important;"
							action="#{reporteBean.cancelar()}" icon="fa fa-fw fa-backward">
						</p:commandButton>
						<p:spacer width="2" />
					</h:panelGroup>
					
					<div class="col-md-3 check-media">
						<p:outputLabel value="• ${titles['TTL_GI_SELECCIONAR_TODAS_ENTIDADES']}"
							for="sbcbTodasEntidades"
							styleClass="log-label form-label-formularios" 
							rendered="#{reporteBean.lbMostrarFiltroTodasEntidades}"/>
						<p:spacer width="4" />
						<p:selectBooleanCheckbox id="sbcbTodasEntidades"
							value="#{reporteBean.lbAplicarFiltroTodasEntidades}"
									rendered="#{reporteBean.lbMostrarFiltroTodasEntidades}">
									<p:ajax process="@this" update="sbcbTodasEntidades"/>
						</p:selectBooleanCheckbox>
					</div>					
					
					<p:commandButton value="${titles['TTL_CLEAN']}"
						title="${titles['TTL_CLEAN']}"
						process="@this" update="@this contains"
						styleClass="btn btn-primary" style="padding: 0% !important;"
						actionListener="#{reporteBean.init()}"
						rendered="#{reporteBean.xml ne null}">
						<p:ajax resetValues="true" />
					</p:commandButton>
					<p:spacer width="2" />
					<p:commandButton id="searchBtn"
						value="${titles['TTL_SUB_TRANSVERSAL_REPORTEADOR_CONSULTAR']}"
						title="${titles['TTL_SUB_TRANSVERSAL_REPORTEADOR_CONSULTAR']}"
						process="@form" update="@this,contains"
						actionListener="#{reporteBean.generarReporte}"
						styleClass="btn btn-primary" style="padding: 0% !important;"
						rendered="#{reporteBean.xml ne null and not empty reporteBean.parametros}" />
					<p:spacer width="2" />
					<p:commandButton id="chartBtn" value="${titles['BTN_TABLA_VER']}"
						title="#{titles.BTN_TABLA_VER} #{titles[reporteBean.xml.tipoGrafico]}"
				
						actionListener="#{graficoBean.init(reporteBean.xml.tipoGrafico, pageSubtitle)}"
						process="@this"
						update="@this,@widgetVar(showChart),@widgetVar(showImage)"
						styleClass="btn btn-primary" style="padding: 0% !important;"
						oncomplete="PF('showChart').show();"
						rendered="#{reporteBean.xml.tipoGrafico ne null}" />
					<p:spacer width="2" />
					<p:commandButton value="${titles['TTL_DOWNLOAD']} Excel"
						title="${titles['TTL_DOWNLOAD']} Excel" ajax="false"
						rendered="#{reporteBean.xml ne null and reporteBean.xml.formatoReporte eq PFFormatoReporte.TTL_REPORTES_FORMATO_EXCEL 
								                            and reporteBean.habilitarBotonesExportar}"
						immediate="true"
						styleClass="btn btn-primary" style="padding: 0% !important;">
						<pe:exporter type="xlsx" target="resultados"
							fileName="#{reporteBean.xml.nombre} #{fechaSistemaString}"
							postProcessor="#{reporteBean.postProcessXLS}" />
					</p:commandButton>
					<p:spacer width="2" />
					<p:commandButton value="${titles['TTL_DOWNLOAD']} CSV"
						title="${titles['TTL_DOWNLOAD']} CSV" ajax="false"
						rendered="#{reporteBean.xml ne null and reporteBean.xml.formatoReporte eq PFFormatoReporte.TTL_REPORTES_FORMATO_CSV and reporteBean.habilitarBotonesExportar}"
						immediate="true" icon="fa fa-fw fa-download"
						styleClass="btn btn-primary" style="padding: 0% !important;">
						<p:dataExporter type="csv" target="resultados"
							tableTitle="#{reporteBean.xml.nombre}"
							fileName="#{reporteBean.xml.nombre} #{fechaSistemaString}" />
					</p:commandButton>
					<p:spacer width="2" />
					<p:commandButton value="${titles['TTL_DOWNLOAD']} PDF"
						title="${titles['TTL_DOWNLOAD']} PDF" ajax="false"
						rendered="#{reporteBean.xml ne null and reporteBean.xml.formatoReporte eq PFFormatoReporte.TTL_REPORTES_FORMATO_PDF and reporteBean.habilitarBotonesExportar}"
						immediate="true" icon="fa fa-fw fa-download"
						styleClass="btn btn-transparent" style="padding: 0% !important;">
						<pe:exporter type="pdf" target="resultados"
							fileName="#{reporteBean.xml.nombre} #{fechaSistemaString}"
							postProcessor="#{reporteBean.postProcessPDF}"
							orientation="Landscape" facetBackground="#FFFFFF"
							facetFontSize="10" facetFontColor="#000000" facetFontStyle="BOLD"
							cellFontColor="#000000" cellFontSize="10" cellFontStyle="NORMAL" />
					</p:commandButton>
				</div>
				<br />
				<!-- Resultados consulta -->
				<div id="resultadosConsultaCatalogoGI" class="row">
					<div class="col-md-12"
						style="padding-left: 2% !important; padding-right: 2% !important;">
						<p:panel id="panelTableResultado" widgetVar="panelTableResultado"
							style="background: transparent; padding: 0px!important;">
							<p:dataTable id="resultados" lazy="true"
								tableStyle="margin:0 auto;width:auto"
								value="#{reporteBean.resultados}" var="registros"
								rowIndexVar="indice" sortMode="multiple"
								paginator="#{reporteBean.resultados.rowCount gt 0}"
								rows="#{paginatorSize}"
								emptyMessage="${messages['MSG_TABLAS_SIN_REGISTROS']}"
								currentPageReportTemplate="{currentPage} ${titles['LBL_DE']} {totalPages}"
								paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
								rowsPerPageTemplate="#{paginatorsSize}">
								<p:columns var="column" value="#{reporteBean.columns}"
									headerText="#{column.header}"
									style="#{(column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DECIMAL.value() or column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERCENT.value() or column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_INTEGER.value()) ? 'text-align:right;white-space:nowrap;' : ((column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LINK.value() or column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TOOLTIP.value()) ? 'text-align:center;white-space:nowrap;' : 'text-align:left;white-space:nowrap;')}"
									exportable="#{column.type ne PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LINK.value() and column.type ne PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TOOLTIP.value() and column.type ne PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CRUD.value()}"
									sortBy="#{column.property}"
									sortable="#{reporteBean.resultados.rowCount gt 1}">
									<f:facet name="header">
										<h:outputText value="#{column.header}" />
									</f:facet>
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).dateValue}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_ANIO.value()}">
										<f:convertDateTime pattern="#{anioFormato}" />
									</h:outputText>
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).dateValue}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_ANIO.value()}">
										<f:convertDateTime pattern="#{anioFormato}" />
									</h:outputText>
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).dateValue}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TRIMESTER.value()}" />
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).dateValue}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_SEMESTER.value()}" />
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).dateValue}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERIOD.value()}">
										<f:convertDateTime pattern="#{periodoFormato}" />
									</h:outputText>
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).getValorFormateado(column.type, column.mask)}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE.value()}">
										<f:convertDateTime pattern="#{fechaFormato}" />
									</h:outputText>
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).getValorFormateado(column.type, column.mask)}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DATE_LARGE.value()}">
										<f:convertDateTime pattern="#{fechaHoraFormato}" />
									</h:outputText>
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).getValorFormateado(column.type, column.mask)}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_STRING.value()}" />
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).getValorFormateado(column.type, column.mask)}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_DECIMAL.value() or column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_PERCENT.value() or column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_INTEGER.value()}">
										<f:convertNumber pattern="#{column.mask}" />
									</h:outputText>
									<h:outputText title="#{column.title}"
										value="#{registros.item.get(column.index).stringValue}"
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_ANIO.value()}" />
									<p:link id="linkToolTip" href="#" value="#{column.headerAlias}"
										rendered="#{!empty registros.item.get(column.index).stringValue and column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TOOLTIP.value()}" />
									<p:tooltip id="toolTip"
										rendered="#{!empty registros.item.get(column.index).stringValue and column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TOOLTIP.value()}"
										for="linkToolTip" escape="false" hideDelay="3000"
										globalSelector="true"
										value="#{reporteBean.getExecQuery(registros.item.get(column.index).stringValue)}"
										showEffect="clip" hideEffect="clip" position="left"
										style="max-width:80%" />
									
									<!-- 
									<p:commandLink id="linkNotUpdate" value="#{column.headerAlias}"
										process="@this" update="@this"
										actionListener="#{reporteBean.abrirDetalle(registros.item.get(column.index).stringValue)}"
										title="#{registros.item.get(column.index).stringValue.split(';')[0]}"
										rendered="#{!empty registros.item.get(column.index).stringValue and column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LINK.value() and !reporteBean.actualizarFormularioConsultarDetalle}">
									</p:commandLink>
									
									<p:commandLink id="linkUpdate" value="#{column.headerAlias}"
										process="@this" update="@form"
										actionListener="#{reporteBean.abrirDetalle(registros.item.get(column.index).stringValue)}"
										title="#{registros.item.get(column.index).stringValue.split(';')[0]}"
										rendered="#{!empty registros.item.get(column.index).stringValue and column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LINK.value() and reporteBean.actualizarFormularioConsultarDetalle}">
									</p:commandLink>
									 -->
									<p:commandButton
										title="#{titles.TTL_PRINT}"
										ajax="false"
										onclick="this.form.target='_blank'"
										action="#{reporteBean.abrinVinculo(registros.item.get(column.index).stringValue)}"
										process="@this"
										icon="icon-print"
										styleClass="icon-btn"
										rendered="#{!empty registros.item.get(column.index).stringValue and column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LINK.value() and !reporteBean.actualizarFormularioConsultarDetalle}">
									</p:commandButton>										
									
									
									
									<h:panelGroup
										rendered="#{column.type eq PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CRUD.value()}">
										<c:forEach items="#{permisosUsuarioRol}" var="crud"
											varStatus="loop">
											<p:commandButton value=" " icon="#{crud.icono}"
												styleClass="icon-btn"
												actionListener="#{reporteBean.abrirAccion(registros.item.get(column.index).longValue, crud.pagina)}"
												title="#{titles[crud.accion]}" process="@this"
												update="@form" />
											<p:spacer width="20" />
										</c:forEach>
									</h:panelGroup>
								</p:columns>
								<p:columnGroup type="footer"
									rendered="#{reporteBean.resultados.rowCount ge 1 and fn:length(reporteBean.totales) ge 1 and !empty reporteBean.totales.get(0).valorFormateado}">
									<p:row rendered="#{fn:length(reporteBean.totales) > 0}">
										<p:columns var="column" value="#{reporteBean.columns}"
											style="text-align:right"
											footerText="#{(fn:length(reporteBean.totales) ge (column.index + 1)) ? reporteBean.totales.get(column.index).valorFormateado : ''}"
											exportable="#{column.type ne PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_LINK.value() and column.type ne PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_TOOLTIP.value() and column.type ne PFTipoDato.TTL_REPORTES_FORMA_TIPO_DATO_CRUD.value()}">
										</p:columns>
									</p:row>
								</p:columnGroup>
							</p:dataTable>
						</p:panel>
					</div>
				</div>
			</div>
			<div class="col-md-12" align="left">
				<br />
				<p:outputLabel
					value="${titles['LBL_TRANSVERSAL_REPORTEADOR_TOTAL_REGISTROS']}" />
				<h:outputText value="#{reporteBean.resultados.rowCount}" />
			</div>
		</h:panelGroup>
	</div>
	<p:defaultCommand target="frmPrincipal:searchBtn" />
	<ui:include src="/gestion-informacion/reporte/grafico.xhtml" />
	
	<script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-11142030-3"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-11142030-3');
		
		</script>
</h:panelGroup>
</html>