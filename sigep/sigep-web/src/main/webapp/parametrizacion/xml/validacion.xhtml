<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/resources/template/dialogTemplate.xhtml">
	<ui:param name="pageTitle"
		value="${titles['TTL_SUB_TRANSVERSAL_PLANTILLA_XML_AGREGAR_VALIDACION']}" />

	<ui:define name="main">
		<h:panelGroup id="agregarDetalleDialog">
			<p:panelGrid columns="6"
				columnClasses="ui-grid-col-2,ui-grid-col-3,ui-grid-col-1,ui-grid-col-2,ui-grid-col-3,ui-grid-col-1"
				layout="grid" styleClass="ui-panelgrid-blank">
				<p:outputLabel for="validar"
					value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_VALIDAR']}" />
				<p:selectBooleanCheckbox id="validar"
					title="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_LLAVE']}"
					value="#{plantillaBean.validacionSeleccionada.validar}"
					required="true"
					requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
					<p:clientValidator />
				</p:selectBooleanCheckbox>
				<p:message for="validar" display="icon" />

				<p:outputLabel for="tipoValidacion"
					value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_TIPO_VALIDACION']}" />
				<p:selectOneMenu id="tipoValidacion" filter="true" required="true"
					filterMatchMode="contains"
					title="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_TIPO_VALIDACION']}"
					value="#{plantillaBean.validacionSeleccionada.tipoValidacion}"
					var="t" requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
					<f:selectItem itemLabel="${titles['TTL_SELECT']}"
						noSelectionOption="true" itemValue="${titles['TTL_SELECT']}" />
					<f:selectItems var="#{tipoValidacion}" value="#{tiposValidacion}"
						itemLabel="#{tipoValidacion}" itemValue="#{tipoValidacion}" />
					<p:column>
						<h:outputText value="#{t}" />
					</p:column>
					<p:clientValidator />
				</p:selectOneMenu>
				<p:message for="tipoValidacion" display="icon" />

				<p:outputLabel for="transaccional"
					value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_TRANSACCIONAL']}" />
				<p:selectBooleanCheckbox id="transaccional"
					title="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_TRANSACCIONAL']}"
					value="#{plantillaBean.validacionSeleccionada.transaccional}"
					required="true"
					requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
					<p:clientValidator />
				</p:selectBooleanCheckbox>
				<p:message for="transaccional" display="icon" />

				<p:outputLabel for="notificar"
					value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_NOTIFICAR']}" />
				<p:selectBooleanCheckbox id="notificar"
					title="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_NOTIFICAR']}"
					value="#{plantillaBean.validacionSeleccionada.notificacion.notificar}"
					required="true"
					requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
					<p:clientValidator />
					<p:ajax event="change" process="@this" update="@this notificacion" />
				</p:selectBooleanCheckbox>
				<p:message for="notificar" display="icon" />

				<p:outputLabel for="persistido"
					rendered="#{plantillaBean.validacionSeleccionada.tipoValidacion.value() eq 'INFORMACION'}"
					value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_PERSISTIDO']}" />
				<p:selectBooleanCheckbox id="persistido"
					rendered="#{plantillaBean.validacionSeleccionada.tipoValidacion.value() eq 'INFORMACION'}"
					title="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_PERSISTIDO']}"
					value="#{plantillaBean.validacionSeleccionada.persistido}"
					required="true"
					requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
					<p:clientValidator />
					<p:ajax event="change" process="@this" update="@this" />
				</p:selectBooleanCheckbox>
				<p:message for="persistido" display="icon"
					rendered="#{plantillaBean.validacionSeleccionada.tipoValidacion.value() eq 'INFORMACION'}" />
			</p:panelGrid>
			<h:panelGroup id="notificacion"
				rendered="#{plantillaBean.validacionSeleccionada.notificacion.notificar}">
				<p:separator />
				<p:panelGrid columns="6"
					columnClasses="ui-grid-col-2,ui-grid-col-3,ui-grid-col-1,ui-grid-col-2,ui-grid-col-3,ui-grid-col-1"
					layout="grid" styleClass="ui-panelgrid-blank">
					<p:outputLabel for="desde"
						value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_DESDE']}" />
					<p:inputText id="desde"
						placeholder="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_DESDE']}"
						value="#{plantillaBean.validacionSeleccionada.notificacion.desde}"
						required="true"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
						<f:validator validatorId="emailValidator" />
						<p:clientValidator />
					</p:inputText>
					<p:message for="desde" display="icon" />

					<p:outputLabel for="asunto"
						value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_ASUNTO']}" />
					<p:inputText id="asunto"
						placeholder="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_ASUNTO']}"
						value="#{plantillaBean.validacionSeleccionada.notificacion.asunto}"
						required="true"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
						<p:clientValidator />
					</p:inputText>
					<p:message for="asunto" display="icon" />

					<p:outputLabel for="cuerpo"
						value="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_CUERPO']}" />
					<h:outputText />
					<h:outputText />

					<h:outputText />
					<h:outputText />
					<h:outputText />
				</p:panelGrid>

				<p:panelGrid columns="3"
					columnClasses="ui-grid-col-2,ui-grid-col-9,ui-grid-col-1"
					layout="grid" styleClass="ui-panelgrid-blank">
					<h:outputText />
					<p:editor id="cuerpo"
						value="#{plantillaBean.validacionSeleccionada.notificacion.cuerpo}"
						required="true"
						requiredMessage="${messages['DLG_VALOR_REQUERIDO']}">
					</p:editor>
					<p:message for="cuerpo" display="icon" />
				</p:panelGrid>

				<p:commandButton icon="ui-icon-plus"
					value="${titles['TTL_ADD_CUENTA_CORREO']}"
					actionListener="#{plantillaBean.addCuentaCorreo}" process="@this"
					update="@this">
					<p:ajax event="dialogReturn" process="@this"
						listener="#{plantillaBean.seleccionarDetalle}"
						update="detalleCuentaCorreo" />
				</p:commandButton>
				<p:separator />
				<p:dataTable id="detalleCuentaCorreo" editable="true" reflow="true"
					rowKey="#{cuentaCorreo}"
					value="#{plantillaBean.validacionSeleccionada.notificacion.cuentaCorreo}"
					var="cuentaCorreo" emptyMessage="${messages['DLG_SIN_REGISTROS']}">
					<f:facet name="header">
						<h:outputText value="${titles['TTL_NOTIFICACIONES']}" />
					</f:facet>
					<p:column rendered="#{not empty cuentaCorreo.porPerfil}"
						headerText="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_PERFIL']}">
						<h:outputText value="#{cuentaCorreo.porPerfil}" />
					</p:column>
					<p:column rendered="#{empty cuentaCorreo.porPerfil}"
						headerText="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_NOMBRE_CUENTA']}">
						<h:outputText value="#{cuentaCorreo.nombreCuenta}" />
					</p:column>
					<p:column
						headerText="${titles['LBL_TRANSVERSAL_PLANTILLA_XML_TIPO_BANDEJA']}">
						<h:outputText value="#{cuentaCorreo.bandeja}" />
					</p:column>
				</p:dataTable>
			</h:panelGroup>
		</h:panelGroup>
	</ui:define>
	<ui:define name="botones">
		<p:commandButton icon="ui-icon-plus" title="${titles['TTL_OK']}"
			value="${titles['TTL_OK']}" process="@this agregarDetalleDialog"
			update="agregarDetalleDialog"
			actionListener="#{plantillaBean.seleccionarValidacionDialogo}" />
	</ui:define>
</ui:composition>
